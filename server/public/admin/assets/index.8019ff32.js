import{d as S,s as F,r as U,i as M,j as i,k as h,m as a,w as e,l as x,R as m,Q as r,n as c,dV as k,Y as D,q as d,N as T,x as O,b9 as P}from"./index.e2e7edc0.js";import{v as j}from"./el-loading.50b86702.js";import{E as q}from"./el-card.17101c27.js";import{E as z,a as G}from"./el-table-column.852b9ccc.js";import"./el-checkbox.e0535dea.js";/* empty css               */import{c as Q,m as Y}from"./menu.5486e1eb.js";import{u as H}from"./paging.9dd8781e.js";import I from"./edit.dadd30ab.js";import{E as J}from"./index.1d098ad3.js";import"./el-form-item.a063458d.js";import"./isEqual.556fce3b.js";import"./el-input-number.aa6076ce.js";import"./index.aefe0860.js";import"./el-radio.2f2d66ca.js";import"./el-select.f9bfaab6.js";import"./el-tree.792f8ac5.js";import"./el-tree-select.b1e82c95.js";import"./index.c43fd295.js";import"./index.f20416ed.js";import"./index.80345726.js";const K={class:"menu-lists"},W=d(" \u65B0\u589E "),X=d(" \u5C55\u5F00/\u6298\u53E0 "),Z={key:0},ee={key:1},te={key:2},oe={class:"flex"},ae=d("\u6B63\u5E38"),ne=d("\u505C\u7528"),se=d(" \u65B0\u589E "),ie=d(" \u7F16\u8F91 "),le=d(" \u5220\u9664 "),Ne=S({__name:"index",setup(ue){const C=F(),p=F();let v=!1;const _=U(!1),{pager:y,getLists:E}=H({fetchFun:Y,params:{page_type:0}}),b=async n=>{var t,s;_.value=!0,await T(),n&&((t=p.value)==null||t.setFormData({pid:n})),(s=p.value)==null||s.open("add")},N=async n=>{var t,s;_.value=!0,await T(),(t=p.value)==null||t.open("edit"),(s=p.value)==null||s.setFormData(n)},R=async n=>{await Q({id:n}),E()},$=()=>{v=!v,w(y.lists,v)},w=(n,t=!0)=>{var s;for(const l in n)(s=C.value)==null||s.toggleRowExpansion(n[l],t),n[l].children&&w(n[l].children,t)};return E(),(n,t)=>{const s=O,l=M,u=z,g=J,V=G,A=q,f=P("perms"),L=j;return i(),h("div",K,[a(A,{class:"!border-none",shadow:"never"},{default:e(()=>[x("div",null,[m((i(),r(l,{type:"primary",onClick:t[0]||(t[0]=o=>b())},{icon:e(()=>[a(s,{name:"el-icon-Plus"})]),default:e(()=>[W]),_:1})),[[f,["auth.menu/add"]]]),a(l,{onClick:$},{icon:e(()=>[a(s,{name:"el-icon-Sort"})]),default:e(()=>[X]),_:1})]),m((i(),r(V,{ref_key:"tableRef",ref:C,class:"mt-4",size:"large",data:c(y).lists,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:e(()=>[a(u,{label:"\u83DC\u5355\u540D\u79F0",prop:"name","min-width":"150","show-overflow-tooltip":""}),a(u,{label:"\u7C7B\u578B",prop:"type","min-width":"80"},{default:e(({row:o})=>[o.type==c(k).CATALOGUE?(i(),h("div",Z,"\u76EE\u5F55")):o.type==c(k).MENU?(i(),h("div",ee,"\u83DC\u5355")):o.type==c(k).BUTTON?(i(),h("div",te,"\u6309\u94AE")):D("",!0)]),_:1}),a(u,{label:"\u56FE\u6807",prop:"icon","min-width":"80"},{default:e(({row:o})=>[x("div",oe,[a(s,{name:o.icon},null,8,["name"])])]),_:1}),a(u,{label:"\u6743\u9650\u6807\u8BC6",prop:"perms","min-width":"150","show-overflow-tooltip":""}),a(u,{label:"\u72B6\u6001",prop:"is_disable","min-width":"100"},{default:e(({row:o})=>[o.is_disable==0?(i(),r(g,{key:0},{default:e(()=>[ae]),_:1})):(i(),r(g,{key:1,type:"danger"},{default:e(()=>[ne]),_:1}))]),_:1}),a(u,{label:"\u6392\u5E8F",prop:"sort","min-width":"100"}),a(u,{label:"\u66F4\u65B0\u65F6\u95F4",prop:"update_time","min-width":"180"}),a(u,{label:"\u64CD\u4F5C",width:"180",fixed:"right"},{default:e(({row:o})=>[m((i(),r(l,{type:"primary",link:"",onClick:B=>b(o.id)},{default:e(()=>[se]),_:2},1032,["onClick"])),[[f,["auth.menu/add"]]]),m((i(),r(l,{type:"primary",link:"",onClick:B=>N(o)},{default:e(()=>[ie]),_:2},1032,["onClick"])),[[f,["auth.menu/edit"]]]),m((i(),r(l,{type:"danger",link:"",onClick:B=>R(o.id)},{default:e(()=>[le]),_:2},1032,["onClick"])),[[f,["auth.menu/delete"]]])]),_:1})]),_:1},8,["data"])),[[L,c(y).loading]])]),_:1}),_.value?(i(),r(I,{key:0,ref_key:"editRef",ref:p,onSuccess:c(E),onClose:t[1]||(t[1]=o=>_.value=!1)},null,8,["onSuccess"])):D("",!0)])}}});export{Ne as default};
