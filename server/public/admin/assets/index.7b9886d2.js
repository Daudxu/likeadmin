import{a as M,b as H,c as J,d as K,e as O,f as Q,g as W}from"./dev_tools.99098b09.js";import{u as R,P as q}from"./pages.0e4e6ed9.js";import{P as D}from"./index.3457f414.js";import{d as z,ak as X,r as S,q as A,a3 as Y,a as o,b as g,c as $,f as e,w as t,l as Z,$ as l,e as b,ai as G,m as _,F as ee,g as te,k as U,t as le,al as ae,E as N,B as oe,a5 as ne,a6 as se,h as ue,am as ie}from"./vendor.41e472b3.js";import{_ as T,y as de}from"./index.c7cd6466.js";const ce={class:"data-table"},_e={class:"m-l-20"},me=_("\u67E5\u8BE2"),re=_("\u91CD\u7F6E"),pe={class:"m-15"},fe={class:"flex row-right"},ve=z({emits:["success"],setup(E,{emit:f}){const m=X(),s=S({name:"",comment:""}),{pager:c,requestApi:F,resetParams:V,resetPage:v}=R({callback:M,params:s,size:10}),y=A([]),x=n=>{y.value=n.map(({name:p,comment:u})=>({name:p,comment:u}))},r=async()=>{var n;await H({table:y.value}),(n=m.value)==null||n.close(),f("success")};return Y(()=>{var n;return(n=m.value)==null?void 0:n.visible},n=>{n&&F()}),(n,p)=>{const u=o("el-input"),a=o("el-form-item"),C=o("el-button"),k=o("el-form"),i=o("el-table-column"),B=o("el-table");return g(),$("div",ce,[e(D,{ref_key:"popupRef",ref:m,class:"inline",clickModalClose:!1,title:"\u9009\u62E9\u8868",width:"900px",async:!0,onConfirm:r},{trigger:t(()=>[Z(n.$slots,"default")]),default:t(()=>[e(k,{class:"ls-form",model:l(s),"label-width":"80px",size:"small",inline:""},{default:t(()=>[e(a,{label:"\u8868\u540D\u79F0"},{default:t(()=>[e(u,{modelValue:l(s).name,"onUpdate:modelValue":p[0]||(p[0]=h=>l(s).name=h),style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(a,{label:"\u8868\u63CF\u8FF0"},{default:t(()=>[e(u,{modelValue:l(s).comment,"onUpdate:modelValue":p[1]||(p[1]=h=>l(s).comment=h),style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(a,null,{default:t(()=>[b("div",_e,[e(C,{type:"primary",onClick:l(v)},{default:t(()=>[me]),_:1},8,["onClick"]),e(C,{onClick:l(V)},{default:t(()=>[re]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["model"]),b("div",pe,[e(B,{height:"400",data:l(c).lists,size:"small",onSelectionChange:x},{default:t(()=>[e(i,{type:"selection",width:"55"}),e(i,{label:"\u8868\u540D\u79F0",prop:"name","min-width":"100"}),e(i,{label:"\u8868\u63CF\u8FF0",prop:"comment","min-width":"100"}),e(i,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"create_time","min-width":"100"})]),_:1},8,["data"])]),b("div",fe,[e(q,{modelValue:l(c),"onUpdate:modelValue":p[2]||(p[2]=h=>G(c)?c.value=h:null),layout:"total, prev, pager, next, jumper",onChange:l(F)},null,8,["modelValue","onChange"])])]),_:3},512)])}}});const be={class:"code-preview"},he={class:"flex"},Ce={class:"content"},ge=_("\u590D\u5236"),Fe=z({props:{modelValue:{type:Boolean},code:null},setup(E){const f=A("index0"),m=s=>{de(s).then(()=>{N.success("\u590D\u5236\u6210\u529F")}).catch(()=>{N.error("\u590D\u5236\u5931\u8D25")})};return(s,c)=>{const F=o("el-scrollbar"),V=o("el-button"),v=o("el-tab-pane"),y=o("el-tabs"),x=o("el-dialog");return g(),$("div",be,[e(x,{modelValue:E.modelValue,"onUpdate:modelValue":c[1]||(c[1]=r=>G(modelValue)?modelValue.value=r:null),width:"1000px",title:"\u4EE3\u7801\u9884\u89C8"},{default:t(()=>[e(y,{modelValue:f.value,"onUpdate:modelValue":c[0]||(c[0]=r=>f.value=r),class:"demo-tabs"},{default:t(()=>[(g(!0),$(ee,null,te(E.code,(r,n)=>(g(),U(v,{label:r.name,name:`index${n}`,key:n},{default:t(()=>[b("div",he,[e(F,{class:"flex-1",style:{height:"70vh"}},{default:t(()=>[b("div",Ce,le(r.content),1)]),_:2},1024),b("div",null,[e(V,{onClick:p=>m(r.content),type:"text",icon:l(ae)},{default:t(()=>[ge]),_:2},1032,["onClick","icon"])])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}});var ye=T(Fe,[["__scopeId","data-v-f850e614"]]);const we={class:"code-generation"},Ve={class:"m-l-20"},xe=_("\u67E5\u8BE2"),ke=_("\u91CD\u7F6E"),Ee=_("\u5BFC\u5165\u6570\u636E\u8868"),De=_("\u751F\u6210\u4EE3\u7801"),$e=_("\u5220\u9664"),Be={class:"m-t-15"},Pe=_("\u9884\u89C8"),Se=_("\u4EE3\u7801\u751F\u6210"),Ue=_("\u7F16\u8F91"),ze=_("\u540C\u6B65"),Ae=_("\u5220\u9664"),Ge={class:"flex row-right"},Ne=z({setup(E){oe();const f=S({table_name:"",table_comment:""}),m=S({show:!1,code:[]}),{pager:s,requestApi:c,resetParams:F,resetPage:V}=R({callback:J,params:f}),v=A([]),y=u=>{v.value=u.map(({id:a})=>a)},x=async u=>{await K({id:u})},r=async u=>{await O({id:u}),c()},n=async u=>{const a=ie.service({text:"\u6B63\u5728\u751F\u6210\u4E2D..."}),C=await Q({id:u});m.show=!0,m.code=C,a.close()},p=async u=>{const a=await W({id:u});a.file&&window.open(a.file,"_blank")};return c(),(u,a)=>{const C=o("el-input"),k=o("el-form-item"),i=o("el-button"),B=o("el-form"),h=o("el-card"),w=o("el-table-column"),I=o("router-link"),j=o("el-table"),L=ne("loading");return g(),$("div",we,[e(h,{shadow:"never"},{default:t(()=>[e(B,{class:"ls-form",model:l(f),"label-width":"80px",size:"small",inline:""},{default:t(()=>[e(k,{label:"\u8868\u540D\u79F0"},{default:t(()=>[e(C,{modelValue:l(f).table_name,"onUpdate:modelValue":a[0]||(a[0]=d=>l(f).table_name=d),class:"ls-input"},null,8,["modelValue"])]),_:1}),e(k,{label:"\u8868\u63CF\u8FF0"},{default:t(()=>[e(C,{modelValue:l(f).table_comment,"onUpdate:modelValue":a[1]||(a[1]=d=>l(f).table_comment=d),class:"ls-input"},null,8,["modelValue"])]),_:1}),e(k,null,{default:t(()=>[b("div",Ve,[e(i,{type:"primary",onClick:l(V)},{default:t(()=>[xe]),_:1},8,["onClick"]),e(i,{onClick:l(F)},{default:t(()=>[ke]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["model"])]),_:1}),se((g(),U(h,{class:"m-t-16",shadow:"never"},{default:t(()=>[e(ve,{class:"inline m-r-10",onSuccess:l(c)},{default:t(()=>[e(i,{type:"primary",size:"small"},{default:t(()=>[Ee]),_:1})]),_:1},8,["onSuccess"]),e(i,{size:"small",disabled:!v.value.length,onClick:a[2]||(a[2]=d=>p(v.value))},{default:t(()=>[De]),_:1},8,["disabled"]),e(D,{class:"m-l-10 inline",disabled:!v.value.length,content:"\u786E\u8BA4\u5220\u9664\u9009\u4E2D\u6570\u636E\u8868\uFF1F",onConfirm:a[3]||(a[3]=d=>r(v.value))},{trigger:t(()=>[e(i,{size:"small",disabled:!v.value.length},{default:t(()=>[$e]),_:1},8,["disabled"])]),_:1},8,["disabled"]),b("div",Be,[e(j,{data:l(s).lists,size:"small",onSelectionChange:y},{default:t(()=>[e(w,{type:"selection",width:"55"}),e(w,{label:"\u8868\u540D\u79F0",prop:"table_name"}),e(w,{label:"\u8868\u63CF\u8FF0",prop:"table_comment"}),e(w,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"create_time"}),e(w,{label:"\u66F4\u65B0\u65F6\u95F4",prop:"update_time"}),e(w,{label:"\u64CD\u4F5C",width:"240",fixed:"right"},{default:t(({row:d})=>[e(i,{type:"text",onClick:P=>n(d.id)},{default:t(()=>[Pe]),_:2},1032,["onClick"]),e(i,{type:"text",onClick:P=>p(d.id)},{default:t(()=>[Se]),_:2},1032,["onClick"]),e(I,{class:"m-l-10",to:{path:"/dev_tools/code/edit",query:{id:d.id}}},{default:t(()=>[e(i,{type:"text"},{default:t(()=>[Ue]),_:1})]),_:2},1032,["to"]),e(D,{class:"inline m-l-10",content:"\u786E\u8BA4\u8981\u540C\u6B65\u8868\u7ED3\u6784\u5417\uFF1F",onConfirm:P=>x(d.id)},{trigger:t(()=>[e(i,{type:"text"},{default:t(()=>[ze]),_:1})]),_:2},1032,["onConfirm"]),e(D,{class:"inline m-l-10",onConfirm:P=>r(d.id)},{trigger:t(()=>[e(i,{type:"text"},{default:t(()=>[Ae]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),b("div",Ge,[e(q,{modelValue:l(s),"onUpdate:modelValue":a[4]||(a[4]=d=>G(s)?s.value=d:null),layout:"total, prev, pager, next, jumper",onChange:l(c)},null,8,["modelValue","onChange"])])]),_:1})),[[L,l(s).loading]]),l(m).show?(g(),U(ye,{key:0,modelValue:l(m).show,"onUpdate:modelValue":a[5]||(a[5]=d=>l(m).show=d),code:l(m).code},null,8,["modelValue","code"])):ue("",!0)])}}});var Le=T(Ne,[["__scopeId","data-v-ecb0e950"]]);export{Le as default};
