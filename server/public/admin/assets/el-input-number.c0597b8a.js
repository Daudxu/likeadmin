import{a8 as ne,x as te,F as d,au as v,d as le,ct as ie,P as ae,r as ue,l as se,ao as oe,k as g,dI as V,I as pe,ap as de,L as ce,m as be,ae as me,o as m,c as A,Q as $,h as n,T as F,v as I,a as C,w as G,f as y,dJ as _e,dK as he,p as R,i as Y,dg as fe,dL as ge,az as T,X as ve,D as Ne,M as j,$ as xe}from"./index.9fc232cc.js";import{E as we}from"./el-input.8962c0a5.js";import{C as Ve,I as Ie,U as ye}from"./event.776e7e11.js";import{v as H}from"./index.0c5865cb.js";const Ee=ne({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,disabled:Boolean,size:te,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:i=>i===null||d(i)||["min","max"].includes(i),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:i=>i>=0&&i===Number.parseInt(`${i}`,10)}}),ke={[Ve]:(i,E)=>i!==E,blur:i=>i instanceof FocusEvent,focus:i=>i instanceof FocusEvent,[Ie]:i=>d(i)||v(i),[ye]:i=>d(i)||v(i)},Se=["aria-label","onKeydown"],Pe=["aria-label","onKeydown"],ze={name:"ElInputNumber"},Ae=le({...ze,props:Ee,emits:ke,setup(i,{expose:E,emit:c}){const t=i,{t:D}=ie(),p=ae("input-number"),h=ue(),u=se({currentValue:t.modelValue,userInput:null}),{formItem:_}=oe(),B=g(()=>d(t.modelValue)&&N(t.modelValue,-1)<t.min),K=g(()=>d(t.modelValue)&&N(t.modelValue)>t.max),J=g(()=>{const e=U(t.step);return V(t.precision)?Math.max(U(t.modelValue),e):(e>t.precision,t.precision)}),k=g(()=>t.controls&&t.controlsPosition==="right"),M=pe(),f=de(),Q=g(()=>{if(u.userInput!==null)return u.userInput;let e=u.currentValue;if(v(e))return"";if(d(e)){if(Number.isNaN(e))return"";V(t.precision)||(e=e.toFixed(t.precision))}return e}),O=(e,r)=>{if(V(r)&&(r=J.value),r===0)return Math.round(e);let l=String(e);const a=l.indexOf(".");if(a===-1||!l.replace(".","").split("")[a+r])return e;const x=l.length;return l.charAt(x-1)==="5"&&(l=`${l.slice(0,Math.max(0,x-1))}6`),Number.parseFloat(Number(l).toFixed(r))},U=e=>{if(v(e))return 0;const r=e.toString(),l=r.indexOf(".");let a=0;return l!==-1&&(a=r.length-l-1),a},N=(e,r=1)=>d(e)?O(e+t.step*r):u.currentValue,S=()=>{if(f.value||K.value)return;const e=t.modelValue||0,r=N(e);z(r)},P=()=>{if(f.value||B.value)return;const e=t.modelValue||0,r=N(e,-1);z(r)},L=(e,r)=>{const{max:l,min:a,step:s,precision:b,stepStrictly:x,valueOnClear:w}=t;let o=Number(e);if(v(e)||Number.isNaN(o))return null;if(e===""){if(w===null)return null;o=Ne(w)?{min:a,max:l}[w]:w}return x&&(o=Math.round(o/s)*s),V(b)||(o=O(o,b)),(o>l||o<a)&&(o=o>l?l:a,r&&c("update:modelValue",o)),o},z=e=>{var r;const l=u.currentValue,a=L(e);l!==a&&(u.userInput=null,c("update:modelValue",a),c("input",a),c("change",a,l),(r=_==null?void 0:_.validate)==null||r.call(_,"change").catch(s=>j()),u.currentValue=a)},W=e=>u.userInput=e,X=e=>{const r=e!==""?Number(e):"";(d(r)&&!Number.isNaN(r)||e==="")&&z(r),u.userInput=null},q=()=>{var e,r;(r=(e=h.value)==null?void 0:e.focus)==null||r.call(e)},Z=()=>{var e,r;(r=(e=h.value)==null?void 0:e.blur)==null||r.call(e)},ee=e=>{c("focus",e)},re=e=>{var r;c("blur",e),(r=_==null?void 0:_.validate)==null||r.call(_,"blur").catch(l=>j())};return ce(()=>t.modelValue,e=>{u.currentValue=L(e,!0),u.userInput=null},{immediate:!0}),be(()=>{var e;const{min:r,max:l,modelValue:a}=t,s=(e=h.value)==null?void 0:e.input;if(s.setAttribute("role","spinbutton"),Number.isFinite(l)?s.setAttribute("aria-valuemax",String(l)):s.removeAttribute("aria-valuemax"),Number.isFinite(r)?s.setAttribute("aria-valuemin",String(r)):s.removeAttribute("aria-valuemin"),s.setAttribute("aria-valuenow",String(u.currentValue)),s.setAttribute("aria-disabled",String(f.value)),!d(a)&&a!=null){let b=Number(a);Number.isNaN(b)&&(b=null),c("update:modelValue",b)}}),me(()=>{var e;const r=(e=h.value)==null?void 0:e.input;r==null||r.setAttribute("aria-valuenow",`${u.currentValue}`)}),E({focus:q,blur:Z}),(e,r)=>(m(),A("div",{class:F([n(p).b(),n(p).m(n(M)),n(p).is("disabled",n(f)),n(p).is("without-controls",!e.controls),n(p).is("controls-right",n(k))]),onDragstart:r[0]||(r[0]=T(()=>{},["prevent"]))},[e.controls?$((m(),A("span",{key:0,role:"button","aria-label":n(D)("el.inputNumber.decrease"),class:F([n(p).e("decrease"),n(p).is("disabled",n(B))]),onKeydown:I(P,["enter"])},[C(n(R),null,{default:G(()=>[n(k)?(m(),y(n(_e),{key:0})):(m(),y(n(he),{key:1}))]),_:1})],42,Se)),[[n(H),P]]):Y("v-if",!0),e.controls?$((m(),A("span",{key:1,role:"button","aria-label":n(D)("el.inputNumber.increase"),class:F([n(p).e("increase"),n(p).is("disabled",n(K))]),onKeydown:I(S,["enter"])},[C(n(R),null,{default:G(()=>[n(k)?(m(),y(n(fe),{key:0})):(m(),y(n(ge),{key:1}))]),_:1})],42,Pe)),[[n(H),S]]):Y("v-if",!0),C(n(we),{id:e.id,ref_key:"input",ref:h,type:"number",step:e.step,"model-value":n(Q),placeholder:e.placeholder,disabled:n(f),size:n(M),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[I(T(S,["prevent"]),["up"]),I(T(P,["prevent"]),["down"])],onBlur:re,onFocus:ee,onInput:W,onChange:X},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown"])],34))}});var Fe=ve(Ae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Ke=xe(Fe);export{Ke as E};
