import{d as Q,r as c,j as $,k as H,Z as M,l as O,m as P,E as Z,c as v,a as e,w as o,Q as G,f as V,s as K,o as m,h as u,e as R,V as U,bQ as q,i as W,g as n}from"./index.4149a48a.js";import{v as X}from"./el-loading.8c0b3715.js";import{E as Y}from"./el-switch.a1860b41.js";import{E as ee}from"./el-input.599b1ec4.js";import"./el-tag.9e3c4172.js";import{E as te,a as ue}from"./el-select.78c92bab.js";import{E as oe}from"./el-cascader-panel.6cbdec04.js";import"./el-checkbox.80ea4ef6.js";import"./el-radio.16909e67.js";import{E as le,a as ae}from"./el-form-item.7ceb148d.js";import{E as se}from"./el-card.7c629b39.js";import{E as re}from"./el-page-header.39f54f3a.js";import{_ as de}from"./index.64c1b4ab.js";import{F as ie}from"./index.bb85de28.js";import{e as ne,f as pe,g as me,h as _e}from"./auth.afb0fd90.js";import{a as ce,b as fe}from"./organization.eb29ec2b.js";import"./validator.05d2ed49.js";import"./event.776e7e11.js";import"./index.167a0229.js";import"./index.a562812b.js";import"./scroll.e142c331.js";import"./isEqual.3e5e6f6d.js";import"./arrays.6dddb988.js";import"./_baseFlatten.3e27949f.js";import"./index.49de65c8.js";import"./el-overlay.59b56e97.js";import"./material.600b8deb.js";import"./index.09db807e.js";import"./el-table-column.2a1628a8.js";import"./el-tree.c59e758e.js";import"./el-popover.8f7686ec.js";import"./pages.c93c200d.js";import"./el-image-viewer.4c49366b.js";const ve={class:"admin"},Fe={class:"flex-1"},be=R("div",{class:"form-tips"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A100*100px\uFF0C\u652F\u6301jpg\uFF0Cjpeg\uFF0Cpng\u683C\u5F0F",-1),Be=n("\u65B0\u589E\u90E8\u95E8"),ge=n("|"),Ee=n("\u5237\u65B0"),Ve=n("\u65B0\u589E\u5C97\u4F4D"),Ce=n("|"),De=n("\u5237\u65B0"),we=n("\u65B0\u589E\u89D2\u8272"),ye=n("|"),he=n("\u5237\u65B0"),Ae={key:0,class:"muted"},ke=n("\u4FDD\u5B58"),nt=Q({__name:"edit",setup(xe){const C=c(null),{router:N,route:S}=$(),r=H(()=>{var s;return(s=S.query)==null?void 0:s.id}),F=c(!1),b=c([]),D=c([]),w=c([]),{formData:t,rules:B}=M(O({formData:{account:"",name:"",role_id:"",avatar:"",password:"",password_confirm:"",disable:0,multipoint_login:0,dept_id:"",jobs_id:""},rules:{account:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:["blur"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:["blur"]}],role_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272",trigger:["blur"]}],password:[],password_confirm:[]}})),y=()=>{ne({page_type:0}).then(s=>{b.value=s.lists,r.value&&t.value.root==1&&b.value.push({id:0,name:"\u7CFB\u7EDF\u7BA1\u7406\u5458"})})},h=()=>{ce().then(s=>{D.value=A(s)})},A=s=>s.map(p=>{const _=p.children||[];return _.length&&A(_),p.status==0?p.disabled=!0:p.disabled=!1,p}),k=()=>{fe({page_type:0}).then(s=>{w.value=s.lists})},T=()=>{if(!r.value){B.value.password=[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:["blur"]}],B.value.password_confirm=[{required:!0,message:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801",trigger:["blur"]}];return}F.value=!0,pe({id:r.value}).then(s=>{t.value=s,s.jobs_id==0&&(t.value.jobs_id="")}).finally(()=>{F.value=!1})},z=()=>{var s;(s=C.value)==null||s.validate(a=>{if(!a)return;Array.isArray(t.value.dept_id)&&(t.value.dept_id=t.value.dept_id[t.value.dept_id.length-1]),(r.value?me({...t.value,id:r.value}):_e(t.value)).then(()=>{setTimeout(()=>N.go(-1),500)})})};return P(()=>{T(),y(),h(),k()}),(s,a)=>{const p=re,_=se,f=ee,d=le,I=oe,i=Z,g=K("router-link"),x=te,L=ue,j=Y,J=X;return m(),v("div",ve,[e(_,{shadow:"never"},{default:o(()=>[e(p,{content:u(r)?"\u7F16\u8F91\u7BA1\u7406\u5458":"\u65B0\u589E\u7BA1\u7406\u5458",onBack:a[0]||(a[0]=l=>s.$router.back())},null,8,["content"])]),_:1}),G((m(),V(_,{shadow:"never",class:"m-t-15"},{default:o(()=>[e(u(ae),{ref_key:"formRefs",ref:C,rules:u(B),class:"ls-form",model:u(t),"label-width":"150px"},{default:o(()=>[e(d,{label:"\u8D26\u53F7",prop:"account"},{default:o(()=>[e(f,{modelValue:u(t).account,"onUpdate:modelValue":a[1]||(a[1]=l=>u(t).account=l),placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",disabled:u(r)&&u(t).root},null,8,["modelValue","disabled"])]),_:1}),e(d,{label:"\u5934\u50CF"},{default:o(()=>[R("div",Fe,[e(de,{modelValue:u(t).avatar,"onUpdate:modelValue":a[2]||(a[2]=l=>u(t).avatar=l),limit:1},null,8,["modelValue"]),be])]),_:1}),e(d,{label:"\u540D\u79F0",prop:"name"},{default:o(()=>[e(f,{modelValue:u(t).name,"onUpdate:modelValue":a[3]||(a[3]=l=>u(t).name=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"dept_id"},{default:o(()=>[e(I,{modelValue:u(t).dept_id,"onUpdate:modelValue":a[4]||(a[4]=l=>u(t).dept_id=l),options:D.value,props:{value:"id",label:"name",checkStrictly:!0},clearable:""},null,8,["modelValue","options"]),e(g,{to:"/organization/department",target:"_blank"},{default:o(()=>[e(i,{type:"text",style:{margin:"0 10px"}},{default:o(()=>[Be]),_:1})]),_:1}),e(i,{type:"text"},{default:o(()=>[ge]),_:1}),e(i,{type:"text",onClick:h},{default:o(()=>[Ee]),_:1})]),_:1}),e(d,{label:"\u5C97\u4F4D",prop:"jobs_id"},{default:o(()=>[e(L,{modelValue:u(t).jobs_id,"onUpdate:modelValue":a[5]||(a[5]=l=>u(t).jobs_id=l),placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D"},{default:o(()=>[(m(!0),v(U,null,q(w.value,(l,E)=>(m(),V(x,{key:E,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(g,{to:"/organization/post",target:"_blank"},{default:o(()=>[e(i,{type:"text",style:{margin:"0 10px"}},{default:o(()=>[Ve]),_:1})]),_:1}),e(i,{type:"text"},{default:o(()=>[Ce]),_:1}),e(i,{type:"text",onClick:k},{default:o(()=>[De]),_:1})]),_:1}),e(d,{label:"\u89D2\u8272",prop:"role_id"},{default:o(()=>[e(L,{modelValue:u(t).role_id,"onUpdate:modelValue":a[6]||(a[6]=l=>u(t).role_id=l),placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",disabled:u(r)&&u(t).root},{default:o(()=>[(m(!0),v(U,null,q(b.value,(l,E)=>(m(),V(x,{key:E,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"]),e(g,{to:"/permission/role",target:"_blank"},{default:o(()=>[e(i,{type:"text",style:{margin:"0 10px"}},{default:o(()=>[we]),_:1})]),_:1}),e(i,{type:"text"},{default:o(()=>[ye]),_:1}),e(i,{type:"text",onClick:y},{default:o(()=>[he]),_:1})]),_:1}),e(d,{label:"\u5BC6\u7801",prop:"password"},{default:o(()=>[e(f,{modelValue:u(t).password,"onUpdate:modelValue":a[7]||(a[7]=l=>u(t).password=l),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u786E\u8BA4\u5BC6\u7801",prop:"password_confirm"},{default:o(()=>[e(f,{modelValue:u(t).password_confirm,"onUpdate:modelValue":a[8]||(a[8]=l=>u(t).password_confirm=l),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u7BA1\u7406\u5458\u72B6\u6001"},{default:o(()=>[e(j,{modelValue:u(t).disable,"onUpdate:modelValue":a[9]||(a[9]=l=>u(t).disable=l),"active-value":0,"inactive-value":1,disabled:u(r)&&u(t).root},null,8,["modelValue","disabled"]),u(r)&&u(t).root?(m(),v("div",Ae,"\u7CFB\u7EDF\u7BA1\u7406\u5458\u72B6\u6001\u4E0D\u5141\u8BB8\u5173\u95ED")):W("",!0)]),_:1}),e(d,{label:"\u652F\u6301\u591A\u5904\u767B\u5F55"},{default:o(()=>[e(j,{modelValue:u(t).multipoint_login,"onUpdate:modelValue":a[10]||(a[10]=l=>u(t).multipoint_login=l),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1})),[[J,F.value]]),e(ie,null,{default:o(()=>[e(i,{type:"primary",onClick:z},{default:o(()=>[ke]),_:1})]),_:1})])}}});export{nt as default};
