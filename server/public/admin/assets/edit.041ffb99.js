import{_ as H}from"./index.b6938fb2.js";import{F as I}from"./index.319a77f2.js";import{e as M,f as O,g as G,h as K}from"./auth.4c42682d.js";import{a as P,b as Q}from"./organization.836dafbb.js";import{d as W,r as f,k as X,l as Y,N as Z,m as ee,n as ue,c as F,a as e,w as t,y as le,g as w,e as i,z as te,o as _,i as l,H as q,I as N,j as oe,O as ae,f as se,h as p}from"./index.6235ba03.js";import"./index.a594d598.js";import"./index.9923ef6e.js";import"./pages.9569697b.js";const de={class:"admin"},ne=se("div",{class:"muted"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A100*100px\uFF0C\u652F\u6301jpg\uFF0Cjpeg\uFF0Cpng\u683C\u5F0F",-1),re=p("\u65B0\u589E\u90E8\u95E8"),ie=p("|"),pe=p("\u5237\u65B0"),me=p("\u65B0\u589E\u5C97\u4F4D"),_e=p("|"),ce=p("\u5237\u65B0"),fe=p("\u65B0\u589E\u89D2\u8272"),ve=p("|"),Fe=p("\u5237\u65B0"),be={key:0,class:"muted"},Be=p("\u4FDD\u5B58"),ke=W({__name:"edit",setup(ge){const y=f(null),{router:R,route:T}=X(),d=Y(()=>{var s;return(s=T.query)==null?void 0:s.id}),b=f(!1),B=f([]),C=f([]),E=f([]),{formData:u,rules:g}=Z(ee({formData:{account:"",name:"",role_id:"",avatar:"",password:"",password_confirm:"",disable:0,multipoint_login:0,dept_id:"",jobs_id:""},rules:{account:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:["blur"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:["blur"]}],role_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272",trigger:["blur"]}],password:[],password_confirm:[]}})),h=()=>{M({page_type:0}).then(s=>{B.value=s.lists,d.value&&u.value.root==1&&B.value.push({id:0,name:"\u7CFB\u7EDF\u7BA1\u7406\u5458"})})},A=()=>{P().then(s=>{C.value=k(s)})},k=s=>s.map(m=>{const c=m.children||[];return c.length&&k(c),m.status==0?m.disabled=!0:m.disabled=!1,m}),x=()=>{Q({page_type:0}).then(s=>{E.value=s.lists})},z=()=>{if(!d.value){g.value.password=[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:["blur"]}],g.value.password_confirm=[{required:!0,message:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801",trigger:["blur"]}];return}b.value=!0,O({id:d.value}).then(s=>{u.value=s,s.jobs_id==0&&(u.value.jobs_id="")}).finally(()=>{b.value=!1})},J=()=>{var s;(s=y.value)==null||s.validate(a=>{if(!a)return;Array.isArray(u.value.dept_id)&&(u.value.dept_id=u.value.dept_id[u.value.dept_id.length-1]),(d.value?G({...u.value,id:d.value}):K(u.value)).then(()=>{setTimeout(()=>R.go(-1),500)})})};return ue(()=>{z(),h(),A(),x()}),(s,a)=>{const m=i("el-page-header"),c=i("el-card"),v=i("el-input"),n=i("el-form-item"),S=i("el-cascader"),r=i("el-button"),V=i("router-link"),j=i("el-option"),L=i("el-select"),U=i("el-switch"),$=te("loading");return _(),F("div",de,[e(c,{shadow:"never"},{default:t(()=>[e(m,{content:l(d)?"\u7F16\u8F91\u7BA1\u7406\u5458":"\u65B0\u589E\u7BA1\u7406\u5458",onBack:a[0]||(a[0]=o=>s.$router.back())},null,8,["content"])]),_:1}),le((_(),w(c,{shadow:"never",class:"m-t-15"},{default:t(()=>[e(l(ae),{ref_key:"formRefs",ref:y,rules:l(g),class:"ls-form",model:l(u),"label-width":"150px"},{default:t(()=>[e(n,{label:"\u8D26\u53F7",prop:"account"},{default:t(()=>[e(v,{modelValue:l(u).account,"onUpdate:modelValue":a[1]||(a[1]=o=>l(u).account=o),placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",disabled:l(d)&&l(u).root},null,8,["modelValue","disabled"])]),_:1}),e(n,{label:"\u5934\u50CF"},{default:t(()=>[e(H,{modelValue:l(u).avatar,"onUpdate:modelValue":a[2]||(a[2]=o=>l(u).avatar=o),limit:1},null,8,["modelValue"]),ne]),_:1}),e(n,{label:"\u540D\u79F0",prop:"name"},{default:t(()=>[e(v,{modelValue:l(u).name,"onUpdate:modelValue":a[3]||(a[3]=o=>l(u).name=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(n,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"dept_id"},{default:t(()=>[e(S,{modelValue:l(u).dept_id,"onUpdate:modelValue":a[4]||(a[4]=o=>l(u).dept_id=o),options:C.value,props:{value:"id",label:"name",checkStrictly:!0},clearable:""},null,8,["modelValue","options"]),e(V,{to:"/organization/department",target:"_blank"},{default:t(()=>[e(r,{type:"text",style:{margin:"0 10px"}},{default:t(()=>[re]),_:1})]),_:1}),e(r,{type:"text"},{default:t(()=>[ie]),_:1}),e(r,{type:"text",onClick:A},{default:t(()=>[pe]),_:1})]),_:1}),e(n,{label:"\u5C97\u4F4D",prop:"jobs_id"},{default:t(()=>[e(L,{modelValue:l(u).jobs_id,"onUpdate:modelValue":a[5]||(a[5]=o=>l(u).jobs_id=o),placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D"},{default:t(()=>[(_(!0),F(q,null,N(E.value,(o,D)=>(_(),w(j,{key:D,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(V,{to:"/organization/post",target:"_blank"},{default:t(()=>[e(r,{type:"text",style:{margin:"0 10px"}},{default:t(()=>[me]),_:1})]),_:1}),e(r,{type:"text"},{default:t(()=>[_e]),_:1}),e(r,{type:"text",onClick:x},{default:t(()=>[ce]),_:1})]),_:1}),e(n,{label:"\u89D2\u8272",prop:"role_id"},{default:t(()=>[e(L,{modelValue:l(u).role_id,"onUpdate:modelValue":a[6]||(a[6]=o=>l(u).role_id=o),placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",disabled:l(d)&&l(u).root},{default:t(()=>[(_(!0),F(q,null,N(B.value,(o,D)=>(_(),w(j,{key:D,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"]),e(V,{to:"/permission/role",target:"_blank"},{default:t(()=>[e(r,{type:"text",style:{margin:"0 10px"}},{default:t(()=>[fe]),_:1})]),_:1}),e(r,{type:"text"},{default:t(()=>[ve]),_:1}),e(r,{type:"text",onClick:h},{default:t(()=>[Fe]),_:1})]),_:1}),e(n,{label:"\u5BC6\u7801",prop:"password"},{default:t(()=>[e(v,{modelValue:l(u).password,"onUpdate:modelValue":a[7]||(a[7]=o=>l(u).password=o),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),e(n,{label:"\u786E\u8BA4\u5BC6\u7801",prop:"password_confirm"},{default:t(()=>[e(v,{modelValue:l(u).password_confirm,"onUpdate:modelValue":a[8]||(a[8]=o=>l(u).password_confirm=o),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),e(n,{label:"\u7BA1\u7406\u5458\u72B6\u6001"},{default:t(()=>[e(U,{modelValue:l(u).disable,"onUpdate:modelValue":a[9]||(a[9]=o=>l(u).disable=o),"active-value":0,"inactive-value":1,disabled:l(d)&&l(u).root},null,8,["modelValue","disabled"]),l(d)&&l(u).root?(_(),F("div",be,"\u7CFB\u7EDF\u7BA1\u7406\u5458\u72B6\u6001\u4E0D\u5141\u8BB8\u5173\u95ED")):oe("",!0)]),_:1}),e(n,{label:"\u652F\u6301\u591A\u5904\u767B\u5F55"},{default:t(()=>[e(U,{modelValue:l(u).multipoint_login,"onUpdate:modelValue":a[10]||(a[10]=o=>l(u).multipoint_login=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1})),[[$,b.value]]),e(I,null,{default:t(()=>[e(r,{type:"primary",onClick:J},{default:t(()=>[Be]),_:1})]),_:1})])}}});export{ke as default};
