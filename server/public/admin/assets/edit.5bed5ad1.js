import{d as O,aq as R,l as S,k as q,dt as j,L as H,K as $,m as K,o as i,c as B,a as t,w as o,h as r,e as d,f as _,V as x,bQ as J,az as M,g as c,dz as X,dA as Y,E as I,cM as Z,dB as ee,u as ue,r as L,dC as m,Q as te,i as b}from"./index.c1f325b4.js";import{v as oe}from"./el-loading.8dc7055b.js";import{F as le}from"./index.f4d06b75.js";import{E as ae,a as se}from"./el-form-item.33ff04fa.js";import{E as ne}from"./el-input-number.59452f54.js";import{E as W}from"./el-input.e89a13b8.js";/* empty css                       */import{E as de,a as ie}from"./el-radio.276ba9c2.js";import"./el-tag.3edda91c.js";import"./el-select.bb7c2e43.js";import"./el-tree.9d92b441.js";import"./el-checkbox.8391ac06.js";import{E as re}from"./el-tree-select.5902e7fb.js";import{E as pe}from"./el-card.d9624d25.js";import{E as me}from"./el-page-header.bfe59338.js";import{E as ce}from"./el-popover.53c49fb8.js";import{a as Fe,b as _e,c as Ee,d as fe}from"./auth.5c87da08.js";import"./isEqual.3ef07690.js";import"./event.776e7e11.js";import"./index.207c757c.js";import"./index.c64003a8.js";import"./index.974ff37c.js";import"./scroll.1bb717b2.js";import"./validator.8d8d675a.js";import"./_baseFlatten.3d6951e9.js";const ve={class:"icon-select"},be=d("div",{class:"m-b-12"},"\u8BF7\u9009\u62E9\u56FE\u6807",-1),Ve={style:{height:"300px"}},Ce={class:"flex flex-wrap"},Be={class:"flex w-4"},he=c("\u65E0"),De=O({__name:"select",props:{modelValue:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(V,{emit:E}){const h=X(),F=R(),a=S({inputValue:"",popoverVisible:!1,popoverWidth:0,mouseoverSelect:!1,inputFocus:!1}),g=()=>{a.inputFocus=a.popoverVisible=!0},u=()=>{a.inputFocus=!1,a.popoverVisible=a.mouseoverSelect},w=p=>{a.mouseoverSelect=a.popoverVisible=!1,E("update:modelValue",p),E("change",p)},D=()=>{E("update:modelValue",""),E("change","")},A=q(()=>{if(!a.inputValue)return h;const p=a.inputValue.toLowerCase();return h.filter(l=>{if(l.toLowerCase().indexOf(p)!==-1)return l})}),k=()=>{$(()=>{var l;const p=(l=F.value)==null?void 0:l.$el.offsetWidth;a.popoverWidth=p<300?300:p})};return j(document.body,"click",()=>{a.popoverVisible=!!(a.inputFocus||a.mouseoverSelect)}),H(()=>a.popoverVisible,async p=>{var l,e;await $(),p?(l=F.value)==null||l.focus():(e=F.value)==null||e.blur()}),K(()=>{k()}),(p,l)=>{const e=Y,v=I,y=Z,U=ce;return i(),B("div",ve,[t(U,{visible:a.popoverVisible,"onUpdate:visible":l[3]||(l[3]=n=>a.popoverVisible=n),width:a.popoverWidth},{reference:o(()=>[t(r(W),{ref_key:"inputRef",ref:F,modelValue:a.inputValue,"onUpdate:modelValue":l[2]||(l[2]=n=>a.inputValue=n),modelModifiers:{trim:!0},placeholder:"\u641C\u7D22\u56FE\u6807",disabled:V.disabled,onFocus:g,onBlur:u},{prepend:o(()=>[d("div",Be,[V.modelValue?(i(),_(e,{key:V.modelValue,name:V.modelValue},null,8,["name"])):(i(),B(x,{key:1},[he],64))])]),append:o(()=>[t(v,{link:""},{default:o(()=>[t(e,{name:"el-icon-Close",size:18,onClick:D})]),_:1})]),_:1},8,["modelValue","disabled"])]),default:o(()=>[d("div",{onMouseover:l[0]||(l[0]=M(n=>a.mouseoverSelect=!0,["stop"])),onMouseout:l[1]||(l[1]=M(n=>a.mouseoverSelect=!1,["stop"]))},[d("div",null,[be,d("div",Ve,[t(y,null,{default:o(()=>[d("div",Ce,[(i(!0),B(x,null,J(r(A),n=>(i(),B("div",{key:n,class:"m-4"},[t(v,{onClick:f=>w(n)},{default:o(()=>[t(e,{name:n,size:18},null,8,["name"])]),_:2},1032,["onClick"])]))),128))])]),_:1})])])],32)]),_:1},8,["visible","width"])])}}}),ye={class:"menu-edit"},ge=c("\u76EE\u5F55"),we=c("\u83DC\u5355"),Ae=c("\u6309\u94AE"),ke=d("div",{class:"form-tips"},"\u8BBF\u95EE\u7684\u8DEF\u7531\u5730\u5740\uFF0C\u5982\uFF1A`user`\uFF0C\u5982\u5916\u7F51\u5730\u5740\u9700\u5185\u94FE\u8BBF\u95EE\u5219\u4EE5`http(s)://`\u5F00\u5934",-1),Ue=d("div",{class:"form-tips"},"\u8BBF\u95EE\u7684\u7EC4\u4EF6\u8DEF\u5F84\uFF0C\u5982\uFF1A`user/setting`\uFF0C\u9ED8\u8BA4\u5728`views`\u76EE\u5F55\u4E0B",-1),Te=d("div",{class:"form-tips"},"\u5C06\u4F5C\u4E3Aserver\u7AEFAPI\u9A8C\u6743\u4F7F\u7528\uFF0C\u5982`auth.admin/user`\uFF0C\u8BF7\u8C28\u614E\u4FEE\u6539",-1),Ne=d("div",{class:"form-tips"},'\u8BBF\u95EE\u8DEF\u7531\u7684\u9ED8\u8BA4\u4F20\u9012\u53C2\u6570\uFF0C\u5982\uFF1A`{"id": 1, "name": "admin"}`\u6216`id=1&name=admin`',-1),$e=c("\u663E\u793A"),xe=c("\u9690\u85CF"),Me=d("div",{class:"form-tips"},"\u9009\u62E9\u9690\u85CF\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4F46\u4ECD\u7136\u53EF\u4EE5\u8BBF\u95EE",-1),Le=c("\u6B63\u5E38"),Oe=c("\u505C\u7528"),Re=d("div",{class:"form-tips"},"\u9009\u62E9\u505C\u7528\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4E5F\u4E0D\u80FD\u88AB\u8BBF\u95EE",-1),Se=c("\u53D6\u6D88"),qe=c("\u4FDD\u5B58"),mu=O({__name:"edit",setup(V){const{query:E}=ee(),h=ue(),F=L(!1),a=R(),g=q(()=>E.id?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355"),u=S({pid:0,type:m.CATALOGUE,icon:"",name:"",sort:1,paths:"",perms:"",component:"",selected:"",params:"",is_cache:0,is_show:1,is_disable:0}),w={pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355",trigger:["blur","change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",trigger:"blur"}],paths:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740",trigger:"blur"}],component:[{required:!0,message:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u5730\u5740",trigger:"blur"}]},D=L([]),A=async()=>{const l=await Fe({page_type:0}),e={id:0,name:"\u9876\u7EA7",children:[]};e.children=l.lists,D.value.push(e)},k=async()=>{const l=E.id;if(!!l){F.value=!0;try{const e=await _e({id:l});Object.keys(u).forEach(v=>{u[v]=e[v]}),F.value=!1}catch{F.value=!1}}},p=async()=>{var e;const l=E.id;await((e=a.value)==null?void 0:e.validate()),l?await Ee({id:l,...u}):await fe(u),h.back()};return A(),k(),(l,e)=>{const v=me,y=pe,U=re,n=ae,f=de,T=ie,C=W,P=ne,z=se,N=I,G=le,Q=oe;return i(),B("div",ye,[t(y,{shadow:"never"},{default:o(()=>[t(v,{content:r(g),onBack:e[0]||(e[0]=s=>l.$router.back())},null,8,["content"])]),_:1}),te((i(),_(y,{class:"m-t-16",shadow:"never"},{default:o(()=>[t(z,{class:"ls-form",ref_key:"formRef",ref:a,model:u,"label-width":"120px",rules:w},{default:o(()=>[t(n,{label:"\u7236\u7EA7\u83DC\u5355",prop:"pid"},{default:o(()=>[t(U,{modelValue:u.pid,"onUpdate:modelValue":e[1]||(e[1]=s=>u.pid=s),data:D.value,clearable:"","node-key":"id",props:{label:"name"},placeholder:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355","check-strictly":""},null,8,["modelValue","data"])]),_:1}),t(n,{label:"\u83DC\u5355\u7C7B\u578B",prop:"type",required:""},{default:o(()=>[t(T,{modelValue:u.type,"onUpdate:modelValue":e[2]||(e[2]=s=>u.type=s)},{default:o(()=>[t(f,{label:r(m).CATALOGUE},{default:o(()=>[ge]),_:1},8,["label"]),t(f,{label:r(m).MENU},{default:o(()=>[we]),_:1},8,["label"]),t(f,{label:r(m).BUTTON},{default:o(()=>[Ae]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"\u83DC\u5355\u540D\u79F0",prop:"name"},{default:o(()=>[t(C,{modelValue:u.name,"onUpdate:modelValue":e[3]||(e[3]=s=>u.name=s),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u.type!=r(m).BUTTON?(i(),_(n,{key:0,label:"\u83DC\u5355\u56FE\u6807",prop:"icon"},{default:o(()=>[t(De,{modelValue:u.icon,"onUpdate:modelValue":e[4]||(e[4]=s=>u.icon=s),style:{width:"280px"}},null,8,["modelValue"])]),_:1})):b("",!0),t(n,{label:"\u83DC\u5355\u6392\u5E8F",prop:"sort"},{default:o(()=>[t(P,{modelValue:u.sort,"onUpdate:modelValue":e[5]||(e[5]=s=>u.sort=s)},null,8,["modelValue"])]),_:1}),u.type!=r(m).BUTTON?(i(),_(n,{key:1,label:"\u8DEF\u7531\u8DEF\u5F84",prop:"paths"},{default:o(()=>[d("div",null,[t(C,{modelValue:u.paths,"onUpdate:modelValue":e[6]||(e[6]=s=>u.paths=s),style:{width:"280px"},placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u8DEF\u5F84"},null,8,["modelValue"]),ke])]),_:1})):b("",!0),u.type==r(m).MENU?(i(),_(n,{key:2,label:"\u7EC4\u4EF6\u8DEF\u5F84",prop:"component"},{default:o(()=>[d("div",null,[t(C,{modelValue:u.component,"onUpdate:modelValue":e[7]||(e[7]=s=>u.component=s),style:{width:"280px"},placeholder:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u8DEF\u5F84"},null,8,["modelValue"]),Ue])]),_:1})):b("",!0),u.type!=r(m).CATALOGUE?(i(),_(n,{key:3,label:"\u6743\u9650\u5B57\u7B26",prop:"perms"},{default:o(()=>[d("div",null,[t(C,{modelValue:u.perms,"onUpdate:modelValue":e[8]||(e[8]=s=>u.perms=s),style:{width:"280px"},placeholder:"\u8BF7\u8F93\u5165\u6743\u9650\u5B57\u7B26"},null,8,["modelValue"]),Te])]),_:1})):b("",!0),u.type==r(m).MENU?(i(),_(n,{key:4,label:"\u8DEF\u7531\u53C2\u6570",prop:"params"},{default:o(()=>[d("div",null,[t(C,{modelValue:u.params,"onUpdate:modelValue":e[9]||(e[9]=s=>u.params=s),style:{width:"280px"},placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u53C2\u6570"},null,8,["modelValue"]),Ne])]),_:1})):b("",!0),u.type!=r(m).BUTTON?(i(),_(n,{key:5,label:"\u662F\u5426\u663E\u793A",prop:"is_show",required:""},{default:o(()=>[d("div",null,[t(T,{modelValue:u.is_show,"onUpdate:modelValue":e[10]||(e[10]=s=>u.is_show=s)},{default:o(()=>[t(f,{label:1},{default:o(()=>[$e]),_:1}),t(f,{label:0},{default:o(()=>[xe]),_:1})]),_:1},8,["modelValue"]),Me])]),_:1})):b("",!0),u.type!=r(m).BUTTON?(i(),_(n,{key:6,label:"\u83DC\u5355\u72B6\u6001",prop:"is_disable",required:""},{default:o(()=>[d("div",null,[t(T,{modelValue:u.is_disable,"onUpdate:modelValue":e[11]||(e[11]=s=>u.is_disable=s)},{default:o(()=>[t(f,{label:0},{default:o(()=>[Le]),_:1}),t(f,{label:1},{default:o(()=>[Oe]),_:1})]),_:1},8,["modelValue"]),Re])]),_:1})):b("",!0)]),_:1},8,["model"])]),_:1})),[[Q,F.value]]),t(G,null,{default:o(()=>[t(N,{onClick:e[12]||(e[12]=s=>l.$router.back())},{default:o(()=>[Se]),_:1}),t(N,{type:"primary",onClick:p},{default:o(()=>[qe]),_:1})]),_:1})])}}});export{mu as default};
