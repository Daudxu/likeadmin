import{L as x,y as R,x as U,W as S,s as L,A as N,E as I}from"./element-plus.1a139bf1.js";import{d as q,a as M,b as P}from"./department.3596f17b.js";import{P as T}from"./index.aabb1301.js";import{d as O,s as _,r as E,e as W,a0 as j,o as f,c as z,V as l,M as a,a as d,L as G,S as H,u as J}from"./@vue.96b5b8e0.js";const K={class:"edit-popup"},Q={class:"h-[400px]"},X={class:"w-80"},Y={class:"w-80"},Z={class:"w-80"},$=d("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C \u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D",-1),ae=O({__name:"edit",emits:["success","close"],setup(ee,{expose:F,emit:i}){const m=_(),n=_(),c=E([]),r=E("add"),v=W(()=>r.value=="edit"?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8"),u=j({id:"",pid:"",name:"",leader:"",mobile:"",sort:0,status:1}),V={pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",trigger:["change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:["blur"]}]},b=async()=>{const o=await q();c.value=o},B=async()=>{var o,e;await((o=m.value)==null?void 0:o.validate()),r.value=="edit"?await M(u):await P(u),(e=n.value)==null||e.close(),i("success")},D=(o="add")=>{var e;r.value=o,(e=n.value)==null||e.open()},w=o=>{for(const e in u)o[e]!=null&&o[e]!=null&&(u[e]=o[e])},A=()=>{i("close")};return b(),F({open:D,setFormData:w}),(o,e)=>{const C=x,s=R,p=U,h=S,k=L,y=N,g=I;return f(),z("div",K,[l(T,{ref_key:"popupRef",ref:n,title:J(v),async:!0,width:"600px",clickModalClose:!0,onConfirm:B,onClose:A},{default:a(()=>[d("div",Q,[l(g,null,{default:a(()=>[l(y,{ref_key:"formRef",ref:m,model:u,"label-width":"100px",rules:V},{default:a(()=>[u.pid!==0?(f(),G(s,{key:0,label:"\u4E0A\u7EA7\u90E8\u95E8",prop:"pid"},{default:a(()=>[l(C,{class:"w-80",modelValue:u.pid,"onUpdate:modelValue":e[0]||(e[0]=t=>u.pid=t),data:c.value,clearable:"","node-key":"id",props:{value:"id",label:"name"},"check-strictly":"","default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},null,8,["modelValue","data"])]),_:1})):H("",!0),l(s,{label:"\u90E8\u95E8\u540D\u79F0",prop:"name"},{default:a(()=>[d("div",X,[l(p,{modelValue:u.name,"onUpdate:modelValue":e[1]||(e[1]=t=>u.name=t),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])])]),_:1}),l(s,{label:"\u8D1F\u8D23\u4EBA",prop:"leader"},{default:a(()=>[d("div",Y,[l(p,{modelValue:u.leader,"onUpdate:modelValue":e[2]||(e[2]=t=>u.leader=t),placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\u59D3\u540D"},null,8,["modelValue"])])]),_:1}),l(s,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"mobile"},{default:a(()=>[d("div",Z,[l(p,{modelValue:u.mobile,"onUpdate:modelValue":e[3]||(e[3]=t=>u.mobile=t),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD"},null,8,["modelValue"])])]),_:1}),l(s,{label:"\u6392\u5E8F",prop:"sort"},{default:a(()=>[d("div",null,[l(h,{modelValue:u.sort,"onUpdate:modelValue":e[4]||(e[4]=t=>u.sort=t)},null,8,["modelValue"]),$])]),_:1}),l(s,{label:"\u90E8\u95E8\u72B6\u6001"},{default:a(()=>[l(k,{modelValue:u.status,"onUpdate:modelValue":e[5]||(e[5]=t=>u.status=t),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})])]),_:1},8,["title"])])}}});export{ae as _};
