import{m as ee,c3 as de,ad as ue,ai as X,S as ce,ac as fe,aB as oe,cR as j,L as V,cS as P,cT as me,a_ as pe,cU as ge,aA as H,a8 as Z,a9 as G,d as q,P as te,a as O,U as k,bx as ve,al as ye,ct as be,y as J,cV as he,k as $,o as D,c as U,e as z,T as w,h as o,t as ke,w as _,f as K,W as we,p as Ee,i as W,q as ae,az as Ce,X as le,cW as Te,cX as Se,G as _e,cY as xe,ag as Q,r as x,cZ as Me,c_ as Ae,K as De,N as Le,c$ as F,O as Ie,d0 as Be,Y as Oe,Q as Re,aw as Ne,d1 as ze,bo as Ye,ak as $e,bf as He,$ as Ue}from"./index.c6bd4263.js";import{U as ne}from"./event.776e7e11.js";import{g as Xe}from"./scroll.601310da.js";var Y=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(Y||{});const se=Symbol("dialogInjectionKey"),Ve=(e,t,r)=>{let s={offsetX:0,offsetY:0};const u=n=>{const d=n.clientX,v=n.clientY,{offsetX:m,offsetY:p}=s,a=e.value.getBoundingClientRect(),f=a.left,E=a.top,L=a.width,I=a.height,M=document.documentElement.clientWidth,B=document.documentElement.clientHeight,A=-f+m,C=-E+p,T=M-f-L+m,y=B-E-I+p,S=g=>{const b=Math.min(Math.max(m+g.clientX-d,A),T),R=Math.min(Math.max(p+g.clientY-v,C),y);s={offsetX:b,offsetY:R},e.value.style.transform=`translate(${X(b)}, ${X(R)})`},l=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",l)},c=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",u)},i=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",u)};ee(()=>{de(()=>{r.value?c():i()})}),ue(()=>{i()})},Ge=e=>{if(ce(e)||fe("[useLockscreen]","You need to pass a ref param to this function"),!oe||j(document.body,"el-popup-parent--hidden"))return;let t=0,r=!1,s="0",u=0;const c=()=>{ge(document.body,"el-popup-parent--hidden"),r&&(document.body.style.paddingRight=s)};V(e,i=>{if(!i){c();return}r=!j(document.body,"el-popup-parent--hidden"),r&&(s=document.body.style.paddingRight,u=Number.parseInt(P(document.body,"paddingRight"),10)),t=Xe();const n=document.documentElement.clientHeight<document.body.scrollHeight,d=P(document.body,"overflowY");t>0&&(n||d==="scroll")&&r&&(document.body.style.paddingRight=`${u+t}px`),me(document.body,"el-popup-parent--hidden")}),pe(()=>c())},ie=e=>{if(!e)return{onClick:H,onMousedown:H,onMouseup:H};let t=!1,r=!1;return{onClick:i=>{t&&r&&e(i),t=r=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{r=i.target===i.currentTarget}}},Ke=Z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:G([String,Array,Object])},zIndex:{type:G([String,Number])}}),We={click:e=>e instanceof MouseEvent};var Ze=q({name:"ElOverlay",props:Ke,emits:We,setup(e,{slots:t,emit:r}){const s=te("overlay"),u=d=>{r("click",d)},{onClick:c,onMousedown:i,onMouseup:n}=ie(e.customMaskEvent?void 0:u);return()=>e.mask?O("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:i,onMouseup:n},[k(t,"default")],Y.STYLE|Y.CLASS|Y.PROPS,["onClick","onMouseup","onMousedown"]):ve("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[k(t,"default")])}});const qe=Ze,re=Z({center:{type:Boolean,default:!1},closeIcon:{type:ye,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),je={close:()=>!0},Pe=["aria-label"],Je=["id"],Qe={name:"ElDialogContent"},Fe=q({...Qe,props:re,emits:je,setup(e){const t=e,{t:r}=be(),{Close:s}=Te,{dialogRef:u,headerRef:c,bodyId:i,ns:n,style:d}=J(se),{focusTrapRef:v}=J(he),m=Se(v,u),p=$(()=>t.draggable);return Ve(u,c,p),(a,f)=>(D(),U("div",{ref:o(m),class:w([o(n).b(),o(n).is("fullscreen",a.fullscreen),o(n).is("draggable",o(p)),{[o(n).m("center")]:a.center},a.customClass]),style:ae(o(d)),tabindex:"-1",onClick:f[1]||(f[1]=Ce(()=>{},["stop"]))},[z("header",{ref_key:"headerRef",ref:c,class:w(o(n).e("header"))},[k(a.$slots,"header",{},()=>[z("span",{role:"heading",class:w(o(n).e("title"))},ke(a.title),3)]),a.showClose?(D(),U("button",{key:0,"aria-label":o(r)("el.dialog.close"),class:w(o(n).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=E=>a.$emit("close"))},[O(o(Ee),{class:w(o(n).e("close"))},{default:_(()=>[(D(),K(we(a.closeIcon||o(s))))]),_:1},8,["class"])],10,Pe)):W("v-if",!0)],2),z("div",{id:o(i),class:w(o(n).e("body"))},[k(a.$slots,"default")],10,Je),a.$slots.footer?(D(),U("footer",{key:0,class:w(o(n).e("footer"))},[k(a.$slots,"footer")],2)):W("v-if",!0)],6))}});var eo=le(Fe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const oo=Z({...re,appendToBody:{type:Boolean,default:!1},beforeClose:{type:G(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,required:!0},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),to={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ne]:e=>_e(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ao=(e,t)=>{const s=Le().emit,{nextZIndex:u}=xe();let c="";const i=Q(),n=Q(),d=x(!1),v=x(!1),m=x(!1),p=x(e.zIndex||u());let a,f;const E=Me("namespace",Ae),L=$(()=>{const h={},N=`--${E.value}-dialog`;return e.fullscreen||(e.top&&(h[`${N}-margin-top`]=e.top),e.width&&(h[`${N}-width`]=X(e.width))),h});function I(){s("opened")}function M(){s("closed"),s(ne,!1),e.destroyOnClose&&(m.value=!1)}function B(){s("close")}function A(){f==null||f(),a==null||a(),e.openDelay&&e.openDelay>0?{stop:a}=F(()=>S(),e.openDelay):S()}function C(){a==null||a(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=F(()=>l(),e.closeDelay):l()}function T(){function h(N){N||(v.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(h):C()}function y(){e.closeOnClickModal&&T()}function S(){!oe||(d.value=!0)}function l(){d.value=!1}function g(){s("openAutoFocus")}function b(){s("closeAutoFocus")}e.lockScroll&&Ge(d);function R(){e.closeOnPressEscape&&T()}return V(()=>e.modelValue,h=>{h?(v.value=!1,A(),m.value=!0,s("open"),p.value=e.zIndex?p.value++:u(),De(()=>{t.value&&(t.value.scrollTop=0)})):d.value&&C()}),V(()=>e.fullscreen,h=>{!t.value||(h?(c=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=c)}),ee(()=>{e.modelValue&&(d.value=!0,m.value=!0,A())}),{afterEnter:I,afterLeave:M,beforeLeave:B,handleClose:T,onModalClick:y,close:C,doClose:l,onOpenAutoFocus:g,onCloseAutoFocus:b,onCloseRequested:R,titleId:i,bodyId:n,closed:v,style:L,rendered:m,visible:d,zIndex:p}},lo=["aria-label","aria-labelledby","aria-describedby"],no={name:"ElDialog"},so=q({...no,props:oo,emits:to,setup(e,{expose:t}){const r=e,s=Ie();Be({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},$(()=>!!s.title));const u=te("dialog"),c=x(),i=x(),n=x(),{visible:d,titleId:v,bodyId:m,style:p,rendered:a,zIndex:f,afterEnter:E,afterLeave:L,beforeLeave:I,handleClose:M,onModalClick:B,onOpenAutoFocus:A,onCloseAutoFocus:C,onCloseRequested:T}=ao(r,c);Oe(se,{dialogRef:c,headerRef:i,bodyId:m,ns:u,rendered:a,style:p});const y=ie(B),S=$(()=>r.draggable&&!r.fullscreen);return t({visible:d,dialogContentRef:n}),(l,g)=>(D(),K(He,{to:"body",disabled:!l.appendToBody},[O($e,{name:"dialog-fade",onAfterEnter:o(E),onAfterLeave:o(L),onBeforeLeave:o(I),persisted:""},{default:_(()=>[Re(O(o(qe),{"custom-mask-event":"",mask:l.modal,"overlay-class":l.modalClass,"z-index":o(f)},{default:_(()=>[z("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(v),"aria-describedby":o(m),class:w(`${o(u).namespace.value}-overlay-dialog`),onClick:g[0]||(g[0]=(...b)=>o(y).onClick&&o(y).onClick(...b)),onMousedown:g[1]||(g[1]=(...b)=>o(y).onMousedown&&o(y).onMousedown(...b)),onMouseup:g[2]||(g[2]=(...b)=>o(y).onMouseup&&o(y).onMouseup(...b))},[O(o(ze),{loop:"",trapped:o(d),"focus-start-el":"container",onFocusAfterTrapped:o(A),onFocusAfterReleased:o(C),onReleaseRequested:o(T)},{default:_(()=>[o(a)?(D(),K(eo,{key:0,ref_key:"dialogContentRef",ref:n,"custom-class":l.customClass,center:l.center,"close-icon":l.closeIcon,draggable:o(S),fullscreen:l.fullscreen,"show-close":l.showClose,style:ae(o(p)),title:l.title,onClose:o(M)},Ye({header:_(()=>[l.$slots.title?k(l.$slots,"title",{key:1}):k(l.$slots,"header",{key:0,close:o(M),titleId:o(v),titleClass:o(u).e("title")})]),default:_(()=>[k(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:_(()=>[k(l.$slots,"footer")])}:void 0]),1032,["custom-class","center","close-icon","draggable","fullscreen","show-close","style","title","onClose"])):W("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],42,lo)]),_:3},8,["mask","overlay-class","z-index"]),[[Ne,o(d)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var io=le(so,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const fo=Ue(io);export{fo as E};
