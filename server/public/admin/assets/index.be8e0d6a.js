import{d as q,f as w,r as I,h as L,i as R,j as s,k as z,m as e,w as t,n as m,R as r,Q as u,l as V,T as G,Y as Q,q as i,x as Y,b8 as H,b9 as J}from"./index.e2e7edc0.js";import{v as K}from"./el-loading.50b86702.js";import{_ as M}from"./index.c57ed2f5.js";import{E as O,a as W}from"./el-table-column.852b9ccc.js";import"./el-checkbox.e0535dea.js";/* empty css               */import{E as X}from"./el-card.17101c27.js";import{E as Z,a as ee}from"./el-form-item.a063458d.js";import{s as te,a as oe,b as ae,c as ne,d as le}from"./code.c66d1d14.js";import{u as se}from"./paging.9dd8781e.js";import ie from"./data-table.61807850.js";import ue from"./code-preview.8e9210d4.js";import{f as B}from"./feedback.dc340fdd.js";import"./el-select.f9bfaab6.js";import"./index.1d098ad3.js";import"./isEqual.556fce3b.js";import"./index.c43fd295.js";import"./index.f20416ed.js";import"./index.80345726.js";import"./el-tab-pane.285bbe04.js";const re={class:"code-generation"},de=i("\u67E5\u8BE2"),me=i("\u91CD\u7F6E"),ce=i(" \u5BFC\u5165\u6570\u636E\u8868 "),_e=i(" \u5220\u9664 "),pe=i(" \u751F\u6210\u4EE3\u7801 "),fe={class:"mt-4"},be=i(" \u9884\u89C8 "),Ce=i(" \u4EE3\u7801\u751F\u6210 "),ge=i(" \u7F16\u8F91 "),ve=i(" \u540C\u6B65 "),Fe=i("\u5220\u9664"),he={class:"flex justify-end mt-4"},Ge=q({__name:"index",setup(ke){const c=w({table_name:"",table_comment:""}),_=w({show:!1,loading:!1,code:[]}),{pager:f,getLists:C,resetParams:D,resetPage:x}=se({fetchFun:le,params:c}),b=I([]),$=n=>{b.value=n.map(({id:o})=>o)},P=async n=>{await B.confirm("\u786E\u8BA4\u8981\u540C\u6B65\u8868\u7ED3\u6784\uFF1F"),await te({id:n})},F=async n=>{await B.confirm("\u786E\u8BA4\u8981\u5220\u9664\uFF1F"),await oe({id:n}),C()},S=async n=>{const o=await ae({id:n});_.code=o,_.show=!0},h=async n=>{const o=await ne({id:n});o.file&&window.open(o.file,"_blank")};return C(),(n,o)=>{const k=L,g=Z,l=R,T=ee,y=X,E=Y,p=O,N=H("router-link"),U=W,A=M,d=J("perms"),j=K;return s(),z("div",re,[e(y,{class:"!border-none",shadow:"never"},{default:t(()=>[e(T,{class:"ls-form mb-[-16px]",model:c,"label-width":"80px",inline:""},{default:t(()=>[e(g,{label:"\u8868\u540D\u79F0"},{default:t(()=>[e(k,{modelValue:c.table_name,"onUpdate:modelValue":o[0]||(o[0]=a=>c.table_name=a)},null,8,["modelValue"])]),_:1}),e(g,{label:"\u8868\u63CF\u8FF0"},{default:t(()=>[e(k,{modelValue:c.table_comment,"onUpdate:modelValue":o[1]||(o[1]=a=>c.table_comment=a)},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(l,{type:"primary",onClick:m(x)},{default:t(()=>[de]),_:1},8,["onClick"]),e(l,{onClick:m(D)},{default:t(()=>[me]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),r((s(),u(y,{class:"mt-4 !border-none",shadow:"never"},{default:t(()=>[r((s(),u(ie,{class:"inline-block mr-[10px]",onSuccess:m(C)},{default:t(()=>[e(l,{type:"primary"},{icon:t(()=>[e(E,{name:"el-icon-Plus"})]),default:t(()=>[ce]),_:1})]),_:1},8,["onSuccess"])),[[d,["tools.generator/selectTable"]]]),r((s(),u(l,{disabled:!b.value.length,onClick:o[2]||(o[2]=a=>F(b.value)),type:"danger"},{icon:t(()=>[e(E,{name:"el-icon-Delete"})]),default:t(()=>[_e]),_:1},8,["disabled"])),[[d,["tools.generator/delete"]]]),r((s(),u(l,{disabled:!b.value.length,onClick:o[3]||(o[3]=a=>h(b.value))},{default:t(()=>[pe]),_:1},8,["disabled"])),[[d,["tools.generator/generate"]]]),V("div",fe,[e(U,{data:m(f).lists,size:"large",onSelectionChange:$},{default:t(()=>[e(p,{type:"selection",width:"55"}),e(p,{label:"\u8868\u540D\u79F0",prop:"table_name"}),e(p,{label:"\u8868\u63CF\u8FF0",prop:"table_comment"}),e(p,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"create_time"}),e(p,{label:"\u66F4\u65B0\u65F6\u95F4",prop:"update_time"}),e(p,{label:"\u64CD\u4F5C",width:"280",fixed:"right"},{default:t(({row:a})=>[r((s(),u(l,{type:"primary",link:"",onClick:v=>S(a.id)},{default:t(()=>[be]),_:2},1032,["onClick"])),[[d,["tools.generator/preview"]]]),r((s(),u(l,{type:"primary",link:"",onClick:v=>h(a.id)},{default:t(()=>[Ce]),_:2},1032,["onClick"])),[[d,["tools.generator/generate"]]]),r((s(),u(l,{type:"primary",link:""},{default:t(()=>[e(N,{to:{path:"/dev_tools/code/edit",query:{id:a.id}}},{default:t(()=>[ge]),_:2},1032,["to"])]),_:2},1024)),[[d,["tools.generator/edit"]]]),r((s(),u(l,{type:"primary",link:"",onClick:v=>P(a.id)},{default:t(()=>[ve]),_:2},1032,["onClick"])),[[d,["tools.generator/syncColumn"]]]),e(l,{type:"danger",link:"",onClick:v=>F(a.id)},{default:t(()=>[Fe]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),V("div",he,[e(A,{modelValue:m(f),"onUpdate:modelValue":o[4]||(o[4]=a=>G(f)?f.value=a:null),onChange:m(C)},null,8,["modelValue","onChange"])])]),_:1})),[[j,m(f).loading]]),_.show?(s(),u(ue,{key:0,modelValue:_.show,"onUpdate:modelValue":o[5]||(o[5]=a=>_.show=a),code:_.code},null,8,["modelValue","code"])):Q("",!0)])}}});export{Ge as default};
