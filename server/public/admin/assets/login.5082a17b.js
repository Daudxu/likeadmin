import{_ as B,d as V,k as C,r as m,l as A,m as z,n as K,p as w,A as k,c as L,f as a,q as U,t as v,a as n,w as r,e as i,o as $,s as y,h as q}from"./index.140321e9.js";const D=V({setup(){const{store:e,router:l,route:F}=C(),f=m(null),_=m(null),c=m(!1),d=m(!1),u=A(()=>e.getters.config),s=z({account:"",password:""}),g={account:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:["blur"]}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:["blur"]}]},h=()=>{var o;if(!s.password)return(o=f.value)==null?void 0:o.focus();p()},p=()=>{var o;(o=_.value)==null||o.validate(b=>{!b||(d.value=!0,w.set(k,{remember:c.value,account:s.account}),e.dispatch("user/login",s).then(()=>{const{query:{redirect:t}}=F,x=typeof t=="string"?t:"/";l.replace(x)}).catch(t=>{console.log(t)}).finally(()=>{d.value=!1}))})};return K(()=>{const o=w.get(k);o.remember&&(c.value=o.remember,s.account=o.account)}),{config:u,passwordRefs:f,loginFormRefs:_,loginForm:s,loginLoading:d,rules:g,handleEnter:h,handleLogin:p,remAccount:c}}}),N={class:"login flex flex-col"},R={class:"flex-1 flex flex-center"},E={class:"login-card bg-white flex"},T={class:"login-form flex flex-col"},S={class:"f-s-24 f-w-500 text-center m-b-40"},I={class:"m-b-20"},M=q("\u767B\u5F55"),O={class:"login-footer"},j={class:"flex flex-center muted xs m-t-20"},G={class:"m-r-10"},H=["href"];function J(e,l,F,f,_,c){const d=i("avatar"),u=i("el-icon"),s=i("el-input"),g=i("el-form-item"),h=i("lock"),p=i("el-form"),o=i("el-checkbox"),b=i("el-button");return $(),L("div",N,[a("div",R,[a("div",E,[a("div",{class:"login-img",style:U({"background-image":`url(${e.config.login_image})`})},null,4),a("div",T,[a("div",S,v(e.config.web_name),1),n(p,{ref:"loginFormRefs",model:e.loginForm,"status-icon":"",rules:e.rules},{default:r(()=>[n(g,{prop:"account"},{default:r(()=>[n(s,{modelValue:e.loginForm.account,"onUpdate:modelValue":l[0]||(l[0]=t=>e.loginForm.account=t),placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",onKeyup:y(e.handleEnter,["enter"])},{prepend:r(()=>[n(u,null,{default:r(()=>[n(d)]),_:1})]),_:1},8,["modelValue","onKeyup"])]),_:1}),n(g,{prop:"password"},{default:r(()=>[n(s,{ref:"passwordRefs",modelValue:e.loginForm.password,"onUpdate:modelValue":l[1]||(l[1]=t=>e.loginForm.password=t),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",onKeyup:y(e.handleLogin,["enter"])},{prepend:r(()=>[n(u,null,{default:r(()=>[n(h)]),_:1})]),_:1},8,["modelValue","onKeyup"])]),_:1})]),_:1},8,["model","rules"]),a("div",I,[n(o,{modelValue:e.remAccount,"onUpdate:modelValue":l[2]||(l[2]=t=>e.remAccount=t),label:"\u8BB0\u4F4F\u8D26\u53F7"},null,8,["modelValue"])]),n(b,{type:"primary",loading:e.loginLoading,onClick:e.handleLogin},{default:r(()=>[M]),_:1},8,["loading","onClick"])])])]),a("div",O,[a("div",j,[a("span",G,v(e.config.copyright_info),1),a("a",{class:"link muted",href:e.config.icp_link,target:"_blank"},v(e.config.icp_number),9,H)])])])}var Q=B(D,[["render",J],["__scopeId","data-v-5d26246b"]]);export{Q as default};
