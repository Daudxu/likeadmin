var $=Object.defineProperty,J=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var B=(d,t,s)=>t in d?$(d,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[t]=s,V=(d,t)=>{for(var s in t||(t={}))P.call(t,s)&&B(d,s,t[s]);if(b)for(var s of b(t))S.call(t,s)&&B(d,s,t[s]);return d},g=(d,t)=>J(d,M(t));import{F as Z}from"./index.f76dfd80.js";import{a as j,e as G,f as H,g as I}from"./organization.92f852cf.js";import{d as K,r as v,u as O,c as Q,P as W,a as X,o as Y,e as m,aN as ee,f,g as A,i as a,w as r,b8 as ue,a8 as k,Z as h,l as u,bJ as le,aL as ae,h as te,k as oe}from"./index.2adab02f.js";const se=te("div",{class:"muted"}," \u9ED8\u8BA4\u4E3A0\uFF0C \u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D ",-1),ne=oe("\u4FDD\u5B58"),pe=K({setup(d){const t=v(null),{router:s,route:w}=O(),i=Q(()=>{var n;return(n=w.query)==null?void 0:n.id}),E=v(!1),_=v([]),{formData:l,rules:y}=W(X({formData:{pid:"",name:"",leader:"",mobile:"",sort:0,status:0},rules:{pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",trigger:["change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:["blur"]}]}})),C=()=>{j().then(n=>{i.value?_.value=n.filter(e=>e.id!=i.value):_.value=n})},L=()=>{!i.value||(E.value=!0,G({id:i.value}).then(n=>{l.value=n}).finally(()=>{E.value=!1}))},U=()=>{var n;(n=t.value)==null||n.validate(e=>{if(!e)return;(i.value?H(g(V({},l.value),{id:i.value})):I(l.value)).then(()=>{setTimeout(()=>s.go(-1),500)})})};return Y(()=>{L(),C()}),(n,e)=>{const F=m("el-page-header"),D=m("el-card"),x=m("el-option"),N=m("el-select"),p=m("el-form-item"),c=m("el-input"),q=m("el-switch"),R=m("el-button"),z=ee("loading");return f(),A(h,null,[a(D,{shadow:"never"},{default:r(()=>[a(F,{content:u(i)?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8",onBack:e[0]||(e[0]=o=>n.$router.back())},null,8,["content"])]),_:1}),ue((f(),k(D,{shadow:"never",class:"m-t-15"},{default:r(()=>[a(u(le),{ref_key:"formRefs",ref:t,rules:u(y),class:"ls-form",model:u(l),"label-width":"150px",size:"small"},{default:r(()=>[a(p,{label:"\u4E0A\u7EA7\u90E8\u95E8",prop:"pid"},{default:r(()=>[a(N,{modelValue:u(l).pid,"onUpdate:modelValue":e[1]||(e[1]=o=>u(l).pid=o),placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",disabled:u(l).pid===0&&u(i)},{default:r(()=>[(f(!0),A(h,null,ae(_.value,(o,T)=>(f(),k(x,{key:T,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),a(p,{label:"\u90E8\u95E8\u540D\u79F0",prop:"name"},{default:r(()=>[a(c,{modelValue:u(l).name,"onUpdate:modelValue":e[2]||(e[2]=o=>u(l).name=o),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),a(p,{label:"\u8D1F\u8D23\u4EBA",prop:"leader"},{default:r(()=>[a(c,{modelValue:u(l).leader,"onUpdate:modelValue":e[3]||(e[3]=o=>u(l).leader=o),placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\u59D3\u540D"},null,8,["modelValue"])]),_:1}),a(p,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"mobile"},{default:r(()=>[a(c,{modelValue:u(l).mobile,"onUpdate:modelValue":e[4]||(e[4]=o=>u(l).mobile=o),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",type:"tel"},null,8,["modelValue"])]),_:1}),a(p,{label:"\u6392\u5E8F",prop:"sort"},{default:r(()=>[a(c,{modelValue:u(l).sort,"onUpdate:modelValue":e[5]||(e[5]=o=>u(l).sort=o),placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",type:"number"},null,8,["modelValue"]),se]),_:1}),a(p,{label:"\u90E8\u95E8\u72B6\u6001"},{default:r(()=>[a(q,{modelValue:u(l).status,"onUpdate:modelValue":e[6]||(e[6]=o=>u(l).status=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1})),[[z,E.value]]),a(Z,null,{default:r(()=>[a(R,{type:"primary",size:"small",onClick:U},{default:r(()=>[ne]),_:1})]),_:1})],64)}}});export{pe as default};
