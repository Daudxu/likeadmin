import{ac as x,dQ as L,dR as $,b5 as y,G as ee,d as M,P as oe,r as R,e as A,n as i,am as te,j as c,Q as C,w as u,k,t as q,V as ue,Y as V,W as I,q as B,bX as le,b2 as se,$ as ae,dS as ne,a3 as re,s as O,f as Q,bA as ie,K as pe,N as W,o as de,m as l,h as X,l as a,X as G,az as me,aT as z,dT as ce,x as fe,i as Fe,b1 as j,dU as E}from"./index.c3aea19d.js";import{E as ve,a as _e}from"./el-form-item.74423cde.js";import{E as Ee}from"./el-input-number.8c09c70a.js";import{E as be,a as he}from"./el-radio.d330a3fa.js";/* empty css               */import"./el-select.1d971f97.js";import"./el-tree.47d5228f.js";import"./el-checkbox.61b5b1e3.js";import{E as Ce}from"./el-tree-select.ed576353.js";import{m as Ve,a as Be,b as ye}from"./menu.02e44fa2.js";import{P as we}from"./index.6c6a7aaf.js";import"./isEqual.662af1fc.js";import"./index.1f9198fb.js";import"./index.7cdad076.js";import"./index.6e7535e0.js";import"./index.bfca7591.js";const ge=x({trigger:L.trigger,placement:$.placement,disabled:L.disabled,visible:y.visible,transition:y.transition,popperOptions:$.popperOptions,tabindex:$.tabindex,content:y.content,popperStyle:y.popperStyle,popperClass:y.popperClass,enterable:{...y.enterable,default:!0},effect:{...y.effect,default:"light"},teleported:y.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0}}),De={"update:visible":d=>ee(d),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},Ae={name:"ElPopover"},ke=M({...Ae,props:ge,emits:De,setup(d,{expose:m,emit:f}){const p=d,s=oe("popover"),h=R(),U=A(()=>{var e;return(e=i(h))==null?void 0:e.popperRef}),t=A(()=>[{width:te(p.width)},p.popperStyle]),T=A(()=>[s.b(),p.popperClass,{[s.m("plain")]:!!p.content}]),g=A(()=>p.transition==="el-fade-in-linear"),N=()=>{var e;(e=h.value)==null||e.hide()},F=()=>{f("before-enter")},n=()=>{f("before-leave")},b=()=>{f("after-enter")},D=()=>{f("update:visible",!1),f("after-leave")};return m({popperRef:U,hide:N}),(e,o)=>(c(),C(i(se),le({ref_key:"tooltipRef",ref:h},e.$attrs,{trigger:e.trigger,placement:e.placement,disabled:e.disabled,visible:e.visible,transition:e.transition,"popper-options":e.popperOptions,tabindex:e.tabindex,content:e.content,offset:e.offset,"show-after":e.showAfter,"hide-after":e.hideAfter,"auto-close":e.autoClose,"show-arrow":e.showArrow,"aria-label":e.title,effect:e.effect,enterable:e.enterable,"popper-class":i(T),"popper-style":i(t),teleported:e.teleported,persistent:e.persistent,"gpu-acceleration":i(g),onBeforeShow:F,onBeforeHide:n,onShow:b,onHide:D}),{content:u(()=>[e.title?(c(),k("div",{key:0,class:ue(i(s).e("title")),role:"title"},q(e.title),3)):V("v-if",!0),I(e.$slots,"default",{},()=>[B(q(e.content),1)])]),default:u(()=>[e.$slots.reference?I(e.$slots,"reference",{key:0}):V("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration"]))}});var Ue=ae(ke,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const H=(d,m)=>{const f=m.arg||m.value,p=f==null?void 0:f.popperRef;p&&(p.triggerRef=d)};var Te={mounted(d,m){H(d,m)},updated(d,m){H(d,m)}};const Ne="popover",Se=ne(Te,Ne),Pe=re(Ue,{directive:Se});const $e={class:"icon-select"},Re=a("div",{class:"mb-3"},"\u8BF7\u9009\u62E9\u56FE\u6807",-1),Oe={class:"h-72"},Me={class:"flex flex-wrap"},Le={class:"flex w-4"},qe=B("\u65E0"),Ie=M({__name:"picker",props:{modelValue:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(d,{emit:m}){const f=ce(),p=O(),s=Q({inputValue:"",popoverVisible:!1,popoverWidth:0,mouseoverSelect:!1,inputFocus:!1}),h=()=>{s.inputFocus=s.popoverVisible=!0},U=()=>{s.inputFocus=!1,s.popoverVisible=s.mouseoverSelect},t=F=>{s.mouseoverSelect=s.popoverVisible=!1,m("update:modelValue",F),m("change",F)},T=()=>{m("update:modelValue",""),m("change","")},g=A(()=>{if(!s.inputValue)return f;const F=s.inputValue.toLowerCase();return f.filter(n=>{if(n.toLowerCase().indexOf(F)!==-1)return n})}),N=()=>{W(()=>{var n;const F=(n=p.value)==null?void 0:n.$el.offsetWidth;s.popoverWidth=F<300?300:F})};return ie(document.body,"click",()=>{s.popoverVisible=!!(s.inputFocus||s.mouseoverSelect)}),pe(()=>s.popoverVisible,async F=>{var n,b;await W(),F?(n=p.value)==null||n.focus():(b=p.value)==null||b.blur()}),de(()=>{N()}),(F,n)=>{const b=fe,D=Fe,e=j,o=Pe;return c(),k("div",$e,[l(o,{visible:s.popoverVisible,"onUpdate:visible":n[3]||(n[3]=_=>s.popoverVisible=_),width:s.popoverWidth},{reference:u(()=>[l(i(X),{ref_key:"inputRef",ref:p,modelValue:s.inputValue,"onUpdate:modelValue":n[2]||(n[2]=_=>s.inputValue=_),modelModifiers:{trim:!0},placeholder:"\u641C\u7D22\u56FE\u6807",disabled:d.disabled,onFocus:h,onBlur:U},{prepend:u(()=>[a("div",Le,[d.modelValue?(c(),C(b,{key:d.modelValue,name:d.modelValue},null,8,["name"])):(c(),k(G,{key:1},[qe],64))])]),append:u(()=>[l(D,null,{default:u(()=>[l(b,{name:"el-icon-Close",size:18,onClick:T})]),_:1})]),_:1},8,["modelValue","disabled"])]),default:u(()=>[a("div",{onMouseover:n[0]||(n[0]=z(_=>s.mouseoverSelect=!0,["stop"])),onMouseout:n[1]||(n[1]=z(_=>s.mouseoverSelect=!1,["stop"]))},[a("div",null,[Re,a("div",Oe,[l(e,null,{default:u(()=>[a("div",Me,[(c(!0),k(G,null,me(i(g),_=>(c(),k("div",{key:_,class:"m-1"},[l(D,{onClick:v=>t(_)},{default:u(()=>[l(b,{name:_,size:18},null,8,["name"])]),_:2},1032,["onClick"])]))),128))])]),_:1})])])],32)]),_:1},8,["visible","width"])])}}}),We={class:"edit-popup"},Ge={class:"h-[400px]"},ze=B("\u76EE\u5F55"),He=B("\u83DC\u5355"),Qe=B("\u6309\u94AE"),Xe={class:"w-80"},je={class:"w-80"},Ke={class:"w-80"},Ye=a("div",{class:"form-tips"}," \u8BBF\u95EE\u7684\u8DEF\u7531\u5730\u5740\uFF0C\u5982\uFF1A`user`\uFF0C\u5982\u5916\u7F51\u5730\u5740\u9700\u5185\u94FE\u8BBF\u95EE\u5219\u4EE5`http(s)://`\u5F00\u5934 ",-1),Je={class:"w-80"},Ze=a("div",{class:"form-tips"}," \u8BBF\u95EE\u7684\u7EC4\u4EF6\u8DEF\u5F84\uFF0C\u5982\uFF1A`user/setting`\uFF0C\u9ED8\u8BA4\u5728`views`\u76EE\u5F55\u4E0B ",-1),xe={class:"w-80"},eo=a("div",{class:"form-tips"}," \u5C06\u4F5C\u4E3Aserver\u7AEFAPI\u9A8C\u6743\u4F7F\u7528\uFF0C\u5982`auth.admin/user`\uFF0C\u8BF7\u8C28\u614E\u4FEE\u6539 ",-1),oo={class:"w-80"},to=a("div",{class:"form-tips"},' \u8BBF\u95EE\u8DEF\u7531\u7684\u9ED8\u8BA4\u4F20\u9012\u53C2\u6570\uFF0C\u5982\uFF1A`{"id": 1, "name": "admin"}`\u6216`id=1&name=admin` ',-1),uo=B("\u663E\u793A"),lo=B("\u9690\u85CF"),so=a("div",{class:"form-tips"}," \u9009\u62E9\u9690\u85CF\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4F46\u4ECD\u7136\u53EF\u4EE5\u8BBF\u95EE ",-1),ao=B("\u6B63\u5E38"),no=B("\u505C\u7528"),ro=a("div",{class:"form-tips"}," \u9009\u62E9\u505C\u7528\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4E5F\u4E0D\u80FD\u88AB\u8BBF\u95EE ",-1),go=M({__name:"edit",emits:["success","close"],setup(d,{expose:m,emit:f}){const p=O(),s=O(),h=R("add"),U=A(()=>h.value=="edit"?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355"),t=Q({id:"",pid:0,type:E.CATALOGUE,icon:"",name:"",sort:1,paths:"",perms:"",component:"",selected:"",params:"",is_cache:0,is_show:1,is_disable:0}),T={pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355",trigger:["blur","change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",trigger:"blur"}],paths:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740",trigger:"blur"}],component:[{required:!0,message:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u5730\u5740",trigger:"blur"}]},g=R([]),N=async()=>{const e=await Ve({page_type:0}),o={id:0,name:"\u9876\u7EA7",children:[]};o.children=e.lists,g.value.push(o)},F=async()=>{var e,o;await((e=p.value)==null?void 0:e.validate()),h.value=="edit"?await Be(t):await ye(t),(o=s.value)==null||o.close(),f("success")},n=(e="add")=>{var o;h.value=e,(o=s.value)==null||o.open()},b=e=>{for(const o in t)e[o]!=null&&e[o]!=null&&(t[o]=e[o])},D=()=>{f("close")};return N(),m({open:n,setFormData:b}),(e,o)=>{const _=Ce,v=ve,w=be,P=he,S=X,K=Ie,Y=Ee,J=_e,Z=j;return c(),k("div",We,[l(we,{ref_key:"popupRef",ref:s,title:i(U),async:!0,width:"700px",clickModalClose:!0,onConfirm:F,onClose:D},{default:u(()=>[a("div",Ge,[l(Z,null,{default:u(()=>[l(J,{ref_key:"formRef",ref:p,model:t,"label-width":"120px",rules:T},{default:u(()=>[l(v,{label:"\u7236\u7EA7\u83DC\u5355",prop:"pid"},{default:u(()=>[l(_,{class:"w-80",modelValue:t.pid,"onUpdate:modelValue":o[0]||(o[0]=r=>t.pid=r),data:g.value,clearable:"","node-key":"id",props:{label:"name"},"default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355","check-strictly":""},null,8,["modelValue","data"])]),_:1}),l(v,{label:"\u83DC\u5355\u7C7B\u578B",prop:"type",required:""},{default:u(()=>[l(P,{modelValue:t.type,"onUpdate:modelValue":o[1]||(o[1]=r=>t.type=r)},{default:u(()=>[l(w,{label:i(E).CATALOGUE},{default:u(()=>[ze]),_:1},8,["label"]),l(w,{label:i(E).MENU},{default:u(()=>[He]),_:1},8,["label"]),l(w,{label:i(E).BUTTON},{default:u(()=>[Qe]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),l(v,{label:"\u83DC\u5355\u540D\u79F0",prop:"name"},{default:u(()=>[a("div",Xe,[l(S,{modelValue:t.name,"onUpdate:modelValue":o[2]||(o[2]=r=>t.name=r),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])])]),_:1}),t.type!=i(E).BUTTON?(c(),C(v,{key:0,label:"\u83DC\u5355\u56FE\u6807",prop:"icon"},{default:u(()=>[a("div",je,[l(K,{modelValue:t.icon,"onUpdate:modelValue":o[3]||(o[3]=r=>t.icon=r)},null,8,["modelValue"])])]),_:1})):V("",!0),l(v,{label:"\u83DC\u5355\u6392\u5E8F",prop:"sort"},{default:u(()=>[l(Y,{modelValue:t.sort,"onUpdate:modelValue":o[4]||(o[4]=r=>t.sort=r)},null,8,["modelValue"])]),_:1}),t.type!=i(E).BUTTON?(c(),C(v,{key:1,label:"\u8DEF\u7531\u8DEF\u5F84",prop:"paths"},{default:u(()=>[a("div",null,[a("div",Ke,[l(S,{modelValue:t.paths,"onUpdate:modelValue":o[5]||(o[5]=r=>t.paths=r),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u8DEF\u5F84"},null,8,["modelValue"])]),Ye])]),_:1})):V("",!0),t.type==i(E).MENU?(c(),C(v,{key:2,label:"\u7EC4\u4EF6\u8DEF\u5F84",prop:"component"},{default:u(()=>[a("div",null,[a("div",Je,[l(S,{modelValue:t.component,"onUpdate:modelValue":o[6]||(o[6]=r=>t.component=r),placeholder:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u8DEF\u5F84"},null,8,["modelValue"])]),Ze])]),_:1})):V("",!0),t.type!=i(E).CATALOGUE?(c(),C(v,{key:3,label:"\u6743\u9650\u5B57\u7B26",prop:"perms"},{default:u(()=>[a("div",null,[a("div",xe,[l(S,{modelValue:t.perms,"onUpdate:modelValue":o[7]||(o[7]=r=>t.perms=r),placeholder:"\u8BF7\u8F93\u5165\u6743\u9650\u5B57\u7B26"},null,8,["modelValue"])]),eo])]),_:1})):V("",!0),t.type==i(E).MENU?(c(),C(v,{key:4,label:"\u8DEF\u7531\u53C2\u6570",prop:"params"},{default:u(()=>[a("div",null,[a("div",oo,[l(S,{modelValue:t.params,"onUpdate:modelValue":o[8]||(o[8]=r=>t.params=r),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u53C2\u6570"},null,8,["modelValue"])]),to])]),_:1})):V("",!0),t.type!=i(E).BUTTON?(c(),C(v,{key:5,label:"\u662F\u5426\u663E\u793A",prop:"is_show",required:""},{default:u(()=>[a("div",null,[l(P,{modelValue:t.is_show,"onUpdate:modelValue":o[9]||(o[9]=r=>t.is_show=r)},{default:u(()=>[l(w,{label:1},{default:u(()=>[uo]),_:1}),l(w,{label:0},{default:u(()=>[lo]),_:1})]),_:1},8,["modelValue"]),so])]),_:1})):V("",!0),t.type!=i(E).BUTTON?(c(),C(v,{key:6,label:"\u83DC\u5355\u72B6\u6001",prop:"is_disable",required:""},{default:u(()=>[a("div",null,[l(P,{modelValue:t.is_disable,"onUpdate:modelValue":o[10]||(o[10]=r=>t.is_disable=r)},{default:u(()=>[l(w,{label:0},{default:u(()=>[ao]),_:1}),l(w,{label:1},{default:u(()=>[no]),_:1})]),_:1},8,["modelValue"]),ro])]),_:1})):V("",!0)]),_:1},8,["model"])]),_:1})])]),_:1},8,["title"])])}}});export{go as default};
