import{Y as j,x as O,t as K,E as J,L as Y,y as Z,J as H,K as Q,W as X,A as ee}from"./element-plus.32724f3c.js";import{g as ue,h as le,b as oe,M as _}from"./index.e62a9b83.js";import{d as I,r as $,s as M,$ as q,e as W,w as te,n as S,j as se,o as r,c as B,U as l,L as o,u as m,a,K as E,V as N,a8 as L,P as ae,T as ne,Z as R,S as v,R as C}from"./@vue.67e62321.js";import{c as de}from"./@vueuse.4608b35b.js";import{m as ie,a as re,b as pe}from"./menu.c8003463.js";import{P as me}from"./index.f5b35b1c.js";const ce={class:"icon-select"},Fe={class:"flex justify-between"},_e=a("div",{class:"mb-3"},"\u8BF7\u9009\u62E9\u56FE\u6807",-1),fe=["onClick"],Ee={class:"h-[280px]"},ve={class:"flex flex-wrap"},Ce={class:"flex w-4"},Ve=v("\u65E0"),be=I({__name:"picker",props:{modelValue:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(h,{emit:V}){const b=$(0),D=[{name:"element\u56FE\u6807",icons:ue()},{name:"\u672C\u5730\u56FE\u6807",icons:le()}],f=M(),t=q({inputValue:"",popoverVisible:!1,popoverWidth:0,mouseoverSelect:!1,inputFocus:!1}),g=()=>{t.inputFocus=t.popoverVisible=!0},u=()=>{t.inputFocus=!1,t.popoverVisible=t.mouseoverSelect},U=p=>{t.mouseoverSelect=t.popoverVisible=!1,V("update:modelValue",p),V("change",p)},A=()=>{V("update:modelValue",""),V("change","")},w=W(()=>{var F,i;const p=(i=(F=D[b.value])==null?void 0:F.icons)!=null?i:[];if(!t.inputValue)return p;const d=t.inputValue.toLowerCase();return p.filter(e=>{if(e.toLowerCase().indexOf(d)!==-1)return e})}),x=()=>{S(()=>{var d;const p=(d=f.value)==null?void 0:d.$el.offsetWidth;t.popoverWidth=p<300?300:p})};return de(document.body,"click",()=>{t.popoverVisible=!!(t.inputFocus||t.mouseoverSelect)}),te(()=>t.popoverVisible,async p=>{var d,F;await S(),p?(d=f.value)==null||d.focus():(F=f.value)==null||F.blur()}),se(()=>{x()}),(p,d)=>{const F=oe,i=K,e=J,T=j;return r(),B("div",ce,[l(T,{visible:t.popoverVisible,"onUpdate:visible":d[3]||(d[3]=s=>t.popoverVisible=s),width:t.popoverWidth},{reference:o(()=>[l(m(O),{ref_key:"inputRef",ref:f,modelValue:t.inputValue,"onUpdate:modelValue":d[2]||(d[2]=s=>t.inputValue=s),modelModifiers:{trim:!0},placeholder:"\u641C\u7D22\u56FE\u6807",disabled:h.disabled,onFocus:g,onBlur:u},{prepend:o(()=>[a("div",Ce,[h.modelValue?(r(),E(F,{key:h.modelValue,name:h.modelValue},null,8,["name"])):(r(),B(N,{key:1},[Ve],64))])]),append:o(()=>[l(i,null,{default:o(()=>[l(F,{name:"el-icon-Close",size:18,onClick:A})]),_:1})]),_:1},8,["modelValue","disabled"])]),default:o(()=>[a("div",{onMouseover:d[0]||(d[0]=R(s=>t.mouseoverSelect=!0,["stop"])),onMouseout:d[1]||(d[1]=R(s=>t.mouseoverSelect=!1,["stop"]))},[a("div",null,[a("div",Fe,[_e,a("div",null,[(r(),B(N,null,L(D,(s,c)=>a("span",{key:c,class:ae(["cursor-pointer text-sm ml-2",{"text-primary":c==b.value}]),onClick:k=>b.value=c},ne(s.name),11,fe)),64))])]),a("div",Ee,[l(e,null,{default:o(()=>[a("div",ve,[(r(!0),B(N,null,L(m(w),s=>(r(),B("div",{key:s,class:"m-1"},[l(i,{onClick:c=>U(s)},{default:o(()=>[l(F,{name:s,size:18},null,8,["name"])]),_:2},1032,["onClick"])]))),128))])]),_:1})])])],32)]),_:1},8,["visible","width"])])}}}),Be={class:"edit-popup"},he=v("\u76EE\u5F55"),De=v("\u83DC\u5355"),ye=v("\u6309\u94AE"),Ae={class:"flex-1"},ke=a("div",{class:"form-tips"}," \u8BBF\u95EE\u7684\u8DEF\u7531\u5730\u5740\uFF0C\u5982\uFF1A`user`\uFF0C\u5982\u5916\u7F51\u5730\u5740\u9700\u5185\u94FE\u8BBF\u95EE\u5219\u4EE5`http(s)://`\u5F00\u5934 ",-1),ge={class:"flex-1"},Ue=a("div",{class:"form-tips"}," \u8BBF\u95EE\u7684\u7EC4\u4EF6\u8DEF\u5F84\uFF0C\u5982\uFF1A`user/setting`\uFF0C\u9ED8\u8BA4\u5728`views`\u76EE\u5F55\u4E0B ",-1),we={class:"flex-1"},xe=a("div",{class:"form-tips"}," \u5C06\u4F5C\u4E3Aserver\u7AEFAPI\u9A8C\u6743\u4F7F\u7528\uFF0C\u5982`auth.admin/user`\uFF0C\u8BF7\u8C28\u614E\u4FEE\u6539 ",-1),Te={class:"flex-1"},Ne=a("div",{class:"form-tips"},' \u8BBF\u95EE\u8DEF\u7531\u7684\u9ED8\u8BA4\u4F20\u9012\u53C2\u6570\uFF0C\u5982\uFF1A`{"id": 1, "name": "admin"}`\u6216`id=1&name=admin` ',-1),$e=v("\u663E\u793A"),Me=v("\u9690\u85CF"),Se=a("div",{class:"form-tips"}," \u9009\u62E9\u9690\u85CF\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4F46\u4ECD\u7136\u53EF\u4EE5\u8BBF\u95EE ",-1),Le=v("\u6B63\u5E38"),Re=v("\u505C\u7528"),Oe=a("div",{class:"form-tips"},"\u9009\u62E9\u505C\u7528\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4E5F\u4E0D\u80FD\u88AB\u8BBF\u95EE",-1),je=I({__name:"edit",emits:["success","close"],setup(h,{expose:V,emit:b}){const D=M(),f=M(),t=$("add"),g=W(()=>t.value=="edit"?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355"),u=q({id:"",pid:0,type:_.CATALOGUE,icon:"",name:"",sort:1,paths:"",perms:"",component:"",selected:"",params:"",is_cache:0,is_show:1,is_disable:0}),U={pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355",trigger:["blur","change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",trigger:"blur"}],paths:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740",trigger:"blur"}],component:[{required:!0,message:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u5730\u5740",trigger:"blur"}]},A=$([]),w=async()=>{const i=await ie({page_type:0}),e={id:0,name:"\u9876\u7EA7",children:[]};e.children=i.lists,A.value.push(e)},x=async()=>{var i,e;await((i=D.value)==null?void 0:i.validate()),t.value=="edit"?await re(u):await pe(u),(e=f.value)==null||e.close(),b("success")},p=(i="add")=>{var e;t.value=i,(e=f.value)==null||e.open()},d=i=>{for(const e in u)i[e]!=null&&i[e]!=null&&(u[e]=i[e])},F=()=>{b("close")};return w(),V({open:p,setFormData:d}),(i,e)=>{const T=Y,s=Z,c=H,k=Q,y=O,P=be,G=X,z=ee;return r(),B("div",Be,[l(me,{ref_key:"popupRef",ref:f,title:m(g),async:!0,width:"550px",clickModalClose:!0,onConfirm:x,onClose:F},{default:o(()=>[l(z,{ref_key:"formRef",ref:D,model:u,"label-width":"80px",rules:U},{default:o(()=>[l(s,{label:"\u7236\u7EA7\u83DC\u5355",prop:"pid"},{default:o(()=>[l(T,{class:"flex-1",modelValue:u.pid,"onUpdate:modelValue":e[0]||(e[0]=n=>u.pid=n),data:A.value,clearable:"","node-key":"id",props:{label:"name"},"default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355","check-strictly":""},null,8,["modelValue","data"])]),_:1}),l(s,{label:"\u83DC\u5355\u7C7B\u578B",prop:"type",required:""},{default:o(()=>[l(k,{modelValue:u.type,"onUpdate:modelValue":e[1]||(e[1]=n=>u.type=n)},{default:o(()=>[l(c,{label:m(_).CATALOGUE},{default:o(()=>[he]),_:1},8,["label"]),l(c,{label:m(_).MENU},{default:o(()=>[De]),_:1},8,["label"]),l(c,{label:m(_).BUTTON},{default:o(()=>[ye]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u83DC\u5355\u540D\u79F0",prop:"name"},{default:o(()=>[l(y,{modelValue:u.name,"onUpdate:modelValue":e[2]||(e[2]=n=>u.name=n),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u.type!=m(_).BUTTON?(r(),E(s,{key:0,label:"\u83DC\u5355\u56FE\u6807",prop:"icon"},{default:o(()=>[l(P,{class:"flex-1",modelValue:u.icon,"onUpdate:modelValue":e[3]||(e[3]=n=>u.icon=n)},null,8,["modelValue"])]),_:1})):C("",!0),u.type!=m(_).BUTTON?(r(),E(s,{key:1,label:"\u8DEF\u7531\u8DEF\u5F84",prop:"paths"},{default:o(()=>[a("div",Ae,[l(y,{modelValue:u.paths,"onUpdate:modelValue":e[4]||(e[4]=n=>u.paths=n),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u8DEF\u5F84"},null,8,["modelValue"]),ke])]),_:1})):C("",!0),u.type==m(_).MENU?(r(),E(s,{key:2,label:"\u7EC4\u4EF6\u8DEF\u5F84",prop:"component"},{default:o(()=>[a("div",ge,[l(y,{modelValue:u.component,"onUpdate:modelValue":e[5]||(e[5]=n=>u.component=n),placeholder:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u8DEF\u5F84"},null,8,["modelValue"]),Ue])]),_:1})):C("",!0),u.type!=m(_).CATALOGUE?(r(),E(s,{key:3,label:"\u6743\u9650\u5B57\u7B26",prop:"perms"},{default:o(()=>[a("div",we,[l(y,{modelValue:u.perms,"onUpdate:modelValue":e[6]||(e[6]=n=>u.perms=n),placeholder:"\u8BF7\u8F93\u5165\u6743\u9650\u5B57\u7B26"},null,8,["modelValue"]),xe])]),_:1})):C("",!0),u.type==m(_).MENU?(r(),E(s,{key:4,label:"\u8DEF\u7531\u53C2\u6570",prop:"params"},{default:o(()=>[a("div",null,[a("div",Te,[l(y,{modelValue:u.params,"onUpdate:modelValue":e[7]||(e[7]=n=>u.params=n),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u53C2\u6570"},null,8,["modelValue"])]),Ne])]),_:1})):C("",!0),u.type!=m(_).BUTTON?(r(),E(s,{key:5,label:"\u662F\u5426\u663E\u793A",prop:"is_show",required:""},{default:o(()=>[a("div",null,[l(k,{modelValue:u.is_show,"onUpdate:modelValue":e[8]||(e[8]=n=>u.is_show=n)},{default:o(()=>[l(c,{label:1},{default:o(()=>[$e]),_:1}),l(c,{label:0},{default:o(()=>[Me]),_:1})]),_:1},8,["modelValue"]),Se])]),_:1})):C("",!0),u.type!=m(_).BUTTON?(r(),E(s,{key:6,label:"\u83DC\u5355\u72B6\u6001",prop:"is_disable",required:""},{default:o(()=>[a("div",null,[l(k,{modelValue:u.is_disable,"onUpdate:modelValue":e[9]||(e[9]=n=>u.is_disable=n)},{default:o(()=>[l(c,{label:0},{default:o(()=>[Le]),_:1}),l(c,{label:1},{default:o(()=>[Re]),_:1})]),_:1},8,["modelValue"]),Oe])]),_:1})):C("",!0),l(s,{label:"\u83DC\u5355\u6392\u5E8F",prop:"sort"},{default:o(()=>[l(G,{modelValue:u.sort,"onUpdate:modelValue":e[10]||(e[10]=n=>u.sort=n)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{je as _};
