var O=Object.defineProperty,P=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var N=(i,d,n)=>d in i?O(i,d,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[d]=n,T=(i,d)=>{for(var n in d||(d={}))W.call(d,n)&&N(i,n,d[n]);if(z)for(var n of z(d))X.call(d,n)&&N(i,n,d[n]);return i},M=(i,d)=>P(i,Q(d));import{M as Y}from"./index.f242b01e.js";import{F as Z}from"./index.4d18e569.js";import{u as ee,l as ue,n as le,j as te,o as ae}from"./index.c7cd6466.js";import{a as oe,b as se}from"./organization.bc72428b.js";import{d as de,q as b,j as ne,a2 as re,r as ie,o as pe,a as _,a5 as me,b as v,c as g,f as e,w as t,a6 as _e,k as E,$ as l,aj as ce,F as S,g as $,h as fe,e as ve,m as c}from"./vendor.41e472b3.js";import"./index.3457f414.js";import"./pages.0e4e6ed9.js";const Fe={class:"admin"},be=ve("div",{class:"muted"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A100*100px\uFF0C\u652F\u6301jpg\uFF0Cjpeg\uFF0Cpng\u683C\u5F0F",-1),Be=c("\u65B0\u589E\u90E8\u95E8"),ge=c("|"),Ve=c("\u5237\u65B0"),De=c("\u65B0\u589E\u5C97\u4F4D"),we=c("|"),Ce=c("\u5237\u65B0"),ye=c("\u65B0\u589E\u89D2\u8272"),Ee=c("|"),he=c("\u5237\u65B0"),Ae={key:0,class:"muted"},ke=c("\u4FDD\u5B58"),Te=de({setup(i){const d=b(null),{router:n,route:J}=ee(),r=ne(()=>{var s;return(s=J.query)==null?void 0:s.id}),V=b(!1),D=b([]),h=b([]),A=b([]),{formData:u,rules:w}=re(ie({formData:{account:"",name:"",role_id:"",avatar:"",password:"",password_confirm:"",disable:0,multipoint_login:0,dept_id:"",jobs_id:""},rules:{account:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:["blur"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:["blur"]}],role_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272",trigger:["blur"]}],password:[],password_confirm:[]}})),k=()=>{ue({page_type:0}).then(s=>{D.value=s.lists,r.value&&u.value.root==1&&D.value.push({id:0,name:"\u7CFB\u7EDF\u7BA1\u7406\u5458"})})},x=()=>{oe().then(s=>{h.value=j(s)})},j=s=>s.map(f=>{const F=f.children;return F.length&&j(F),f.id==r.value||f.status==0?f.disabled=!0:f.disabled=!1,f}),L=()=>{se({page_type:0}).then(s=>{A.value=s.lists})},G=()=>{if(!r.value){w.value.password=[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:["blur"]}],w.value.password_confirm=[{required:!0,message:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801",trigger:["blur"]}];return}V.value=!0,le({id:r.value}).then(s=>{u.value=s,s.jobs_id==0&&(u.value.jobs_id="")}).finally(()=>{V.value=!1})},H=()=>{var s;(s=d.value)==null||s.validate(o=>{if(!o)return;Array.isArray(u.value.dept_id)&&(u.value.dept_id=u.value.dept_id[u.value.dept_id.length-1]),(r.value?te(M(T({},u.value),{id:r.value})):ae(u.value)).then(()=>{setTimeout(()=>n.go(-1),500)})})};return pe(()=>{G(),k(),x(),L()}),(s,o)=>{const f=_("el-page-header"),F=_("el-card"),B=_("el-input"),p=_("el-form-item"),I=_("el-cascader"),m=_("el-button"),C=_("router-link"),U=_("el-option"),q=_("el-select"),R=_("el-switch"),K=me("loading");return v(),g("div",Fe,[e(F,{shadow:"never"},{default:t(()=>[e(f,{content:l(r)?"\u7F16\u8F91\u7BA1\u7406\u5458":"\u65B0\u589E\u7BA1\u7406\u5458",onBack:o[0]||(o[0]=a=>s.$router.back())},null,8,["content"])]),_:1}),_e((v(),E(F,{shadow:"never",class:"m-t-15"},{default:t(()=>[e(l(ce),{ref_key:"formRefs",ref:d,rules:l(w),class:"ls-form",model:l(u),"label-width":"150px",size:"small"},{default:t(()=>[e(p,{label:"\u8D26\u53F7",prop:"account"},{default:t(()=>[e(B,{modelValue:l(u).account,"onUpdate:modelValue":o[1]||(o[1]=a=>l(u).account=a),placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",disabled:l(r)&&l(u).root},null,8,["modelValue","disabled"])]),_:1}),e(p,{label:"\u5934\u50CF"},{default:t(()=>[e(Y,{modelValue:l(u).avatar,"onUpdate:modelValue":o[2]||(o[2]=a=>l(u).avatar=a),limit:1},null,8,["modelValue"]),be]),_:1}),e(p,{label:"\u540D\u79F0",prop:"name"},{default:t(()=>[e(B,{modelValue:l(u).name,"onUpdate:modelValue":o[3]||(o[3]=a=>l(u).name=a),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(p,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"dept_id"},{default:t(()=>[e(I,{modelValue:l(u).dept_id,"onUpdate:modelValue":o[4]||(o[4]=a=>l(u).dept_id=a),options:h.value,props:{value:"id",label:"name",checkStrictly:!0},clearable:""},null,8,["modelValue","options"]),e(C,{to:"/organization/department",target:"_blank"},{default:t(()=>[e(m,{type:"text",style:{margin:"0 10px"}},{default:t(()=>[Be]),_:1})]),_:1}),e(m,{type:"text"},{default:t(()=>[ge]),_:1}),e(m,{type:"text",onClick:x},{default:t(()=>[Ve]),_:1})]),_:1}),e(p,{label:"\u5C97\u4F4D",prop:"jobs_id"},{default:t(()=>[e(q,{modelValue:l(u).jobs_id,"onUpdate:modelValue":o[5]||(o[5]=a=>l(u).jobs_id=a),placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D"},{default:t(()=>[(v(!0),g(S,null,$(A.value,(a,y)=>(v(),E(U,{key:y,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(C,{to:"/organization/post",target:"_blank"},{default:t(()=>[e(m,{type:"text",style:{margin:"0 10px"}},{default:t(()=>[De]),_:1})]),_:1}),e(m,{type:"text"},{default:t(()=>[we]),_:1}),e(m,{type:"text",onClick:L},{default:t(()=>[Ce]),_:1})]),_:1}),e(p,{label:"\u89D2\u8272",prop:"role_id"},{default:t(()=>[e(q,{modelValue:l(u).role_id,"onUpdate:modelValue":o[6]||(o[6]=a=>l(u).role_id=a),placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",disabled:l(r)&&l(u).root},{default:t(()=>[(v(!0),g(S,null,$(D.value,(a,y)=>(v(),E(U,{key:y,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"]),e(C,{to:"/permission/role",target:"_blank"},{default:t(()=>[e(m,{type:"text",style:{margin:"0 10px"}},{default:t(()=>[ye]),_:1})]),_:1}),e(m,{type:"text"},{default:t(()=>[Ee]),_:1}),e(m,{type:"text",onClick:k},{default:t(()=>[he]),_:1})]),_:1}),e(p,{label:"\u5BC6\u7801",prop:"password"},{default:t(()=>[e(B,{modelValue:l(u).password,"onUpdate:modelValue":o[7]||(o[7]=a=>l(u).password=a),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),e(p,{label:"\u786E\u8BA4\u5BC6\u7801",prop:"password_confirm"},{default:t(()=>[e(B,{modelValue:l(u).password_confirm,"onUpdate:modelValue":o[8]||(o[8]=a=>l(u).password_confirm=a),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),e(p,{label:"\u7BA1\u7406\u5458\u72B6\u6001"},{default:t(()=>[e(R,{modelValue:l(u).disable,"onUpdate:modelValue":o[9]||(o[9]=a=>l(u).disable=a),"active-value":0,"inactive-value":1,disabled:l(r)&&l(u).root},null,8,["modelValue","disabled"]),l(r)&&l(u).root?(v(),g("div",Ae,"\u7CFB\u7EDF\u7BA1\u7406\u5458\u72B6\u6001\u4E0D\u5141\u8BB8\u5173\u95ED")):fe("",!0)]),_:1}),e(p,{label:"\u652F\u6301\u591A\u5904\u767B\u5F55"},{default:t(()=>[e(R,{modelValue:l(u).multipoint_login,"onUpdate:modelValue":o[10]||(o[10]=a=>l(u).multipoint_login=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1})),[[K,V.value]]),e(Z,null,{default:t(()=>[e(m,{type:"primary",size:"small",onClick:H},{default:t(()=>[ke]),_:1})]),_:1})])}}});export{Te as default};
