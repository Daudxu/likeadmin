var q=Object.defineProperty,L=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var B=(d,t,s)=>t in d?q(d,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[t]=s,V=(d,t)=>{for(var s in t||(t={}))z.call(t,s)&&B(d,s,t[s]);if(b)for(var s of b(t))S.call(t,s)&&B(d,s,t[s]);return d},g=(d,t)=>L(d,R(t));import{F as $}from"./index.0f28710b.js";import{a as J,d as M,e as P,f as Z}from"./organization.83740555.js";import{d as j,r as E,u as G,c as H,P as I,a as K,o as O,e as m,aN as Q,f as A,g as W,i as a,w as n,b8 as X,a8 as Y,Z as ee,l,bJ as le,h as ue,k as ae}from"./index.be24683b.js";const te=ue("div",{class:"muted"}," \u9ED8\u8BA4\u4E3A0\uFF0C \u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D ",-1),oe=ae("\u4FDD\u5B58"),ie=j({setup(d){const t=E(null),{router:s,route:h}=G(),p=H(()=>{var o;return(o=h.query)==null?void 0:o.id}),_=E(!1),D=E([]),{formData:e,rules:w}=I(K({formData:{pid:"",name:"",leader:"",mobile:"",sort:0,status:0},rules:{pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",trigger:["change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:["blur"]}]}})),y=()=>{J().then(o=>{D.value=F(o)})},F=o=>o.map(i=>{const f=i.children;return f.length&&F(f),i.id==p.value||i.status==0?i.disabled=!0:i.disabled=!1,i}),k=()=>{!p.value||(_.value=!0,M({id:p.value}).then(o=>{e.value=o}).finally(()=>{_.value=!1}))},C=()=>{var o;(o=t.value)==null||o.validate(u=>{if(!u)return;Array.isArray(e.value.pid)&&(e.value.pid=e.value.pid[e.value.pid.length-1]),(p.value?P(g(V({},e.value),{id:p.value})):Z(e.value)).then(()=>{setTimeout(()=>s.go(-1),500)})})};return O(()=>{k(),y()}),(o,u)=>{const i=m("el-page-header"),f=m("el-card"),U=m("el-cascader"),c=m("el-form-item"),v=m("el-input"),x=m("el-switch"),N=m("el-button"),T=Q("loading");return A(),W(ee,null,[a(f,{shadow:"never"},{default:n(()=>[a(i,{content:l(p)?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8",onBack:u[0]||(u[0]=r=>o.$router.back())},null,8,["content"])]),_:1}),X((A(),Y(f,{shadow:"never",class:"m-t-15"},{default:n(()=>[a(l(le),{ref_key:"formRefs",ref:t,rules:l(w),class:"ls-form",model:l(e),"label-width":"150px",size:"small"},{default:n(()=>[a(c,{label:"\u4E0A\u7EA7\u90E8\u95E8",prop:"pid"},{default:n(()=>[a(U,{modelValue:l(e).pid,"onUpdate:modelValue":u[1]||(u[1]=r=>l(e).pid=r),options:D.value,props:{value:"id",label:"name",checkStrictly:!0},clearable:"",disabled:l(e).pid===0&&l(p)},null,8,["modelValue","options","disabled"])]),_:1}),a(c,{label:"\u90E8\u95E8\u540D\u79F0",prop:"name"},{default:n(()=>[a(v,{modelValue:l(e).name,"onUpdate:modelValue":u[2]||(u[2]=r=>l(e).name=r),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),a(c,{label:"\u8D1F\u8D23\u4EBA",prop:"leader"},{default:n(()=>[a(v,{modelValue:l(e).leader,"onUpdate:modelValue":u[3]||(u[3]=r=>l(e).leader=r),placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\u59D3\u540D"},null,8,["modelValue"])]),_:1}),a(c,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"mobile"},{default:n(()=>[a(v,{modelValue:l(e).mobile,"onUpdate:modelValue":u[4]||(u[4]=r=>l(e).mobile=r),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",type:"tel"},null,8,["modelValue"])]),_:1}),a(c,{label:"\u6392\u5E8F",prop:"sort"},{default:n(()=>[a(v,{modelValue:l(e).sort,"onUpdate:modelValue":u[5]||(u[5]=r=>l(e).sort=r),placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",type:"number"},null,8,["modelValue"]),te]),_:1}),a(c,{label:"\u90E8\u95E8\u72B6\u6001"},{default:n(()=>[a(x,{modelValue:l(e).status,"onUpdate:modelValue":u[6]||(u[6]=r=>l(e).status=r),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1})),[[T,_.value]]),a($,null,{default:n(()=>[a(N,{type:"primary",size:"small",onClick:C},{default:n(()=>[oe]),_:1})]),_:1})],64)}}});export{ie as default};
