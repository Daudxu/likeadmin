System.register(["./element-plus-legacy.9a978554.js","./index-legacy.bb301f21.js","./@vue-legacy.6b85f8d1.js","./@vueuse-legacy.157488cf.js","./menu-legacy.7d6c9a85.js","./index-legacy.e2911894.js"],(function(e){"use strict";var l,a,o,s,t,d,u,i,n,p,r,c,m,f,v,b,V,_,y,h,g,U,k,w,x,C,T,O,N,M,q,E,j,B,A,F,L,S,W,R,z,D,G,P,$,X,I;return{setters:[e=>{l=e.X,a=e.C,o=e.w,s=e.E,t=e.a,d=e.O,u=e.P,i=e.Z,n=e.$,p=e.D,r=e.v,c=e.F},e=>{m=e.n,f=e.o,v=e.b,b=e.p,V=e.M,_=e.q,y=e.t},e=>{h=e.d,g=e.r,U=e.s,k=e.a1,w=e.e,x=e.w,C=e.j,T=e.o,O=e.c,N=e.W,M=e.O,q=e.u,E=e.M,j=e.X,B=e.a,A=e.a9,F=e.R,L=e.V,S=e.$,W=e.U,R=e.n,z=e.T},e=>{D=e.c},e=>{G=e.a,P=e.b,$=e.c,X=e.d},e=>{I=e.P}],execute:function(){const Z={class:"icon-select"},H={class:"flex justify-between"},J=B("div",{class:"mb-3"},"请选择图标",-1),K=["onClick"],Q={class:"h-[280px]"},Y={class:"flex flex-wrap"},ee={key:0,class:"flex items-center"},le=W("无"),ae=h({__name:"picker",props:{modelValue:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:d}){const u=g(0),i=[{name:"element图标",icons:m()},{name:"本地图标",icons:f()}],n=U(),p=k({inputValue:"",popoverVisible:!1,popoverWidth:0,mouseoverSelect:!1,inputFocus:!1}),r=()=>{p.inputFocus=p.popoverVisible=!0},c=()=>{p.inputFocus=!1,p.popoverVisible=p.mouseoverSelect},b=()=>{d("update:modelValue",""),d("change","")},V=w((()=>{const e=i[u.value]?.icons??[];if(!p.inputValue)return e;const l=p.inputValue.toLowerCase();return e.filter((e=>{if(-1!==e.toLowerCase().indexOf(l))return e}))}));return D(document.body,"click",(()=>{p.popoverVisible=!(!p.inputFocus&&!p.mouseoverSelect)})),x((()=>p.popoverVisible),(async e=>{await R(),e?n.value?.focus():n.value?.blur()})),C((()=>{R((()=>{const e=n.value?.$el.offsetWidth;p.popoverWidth=e<300?300:e}))})),(m,f)=>{const _=v,y=o,h=s,g=t,U=l;return T(),O("div",Z,[N(U,{trigger:"contextmenu",visible:p.popoverVisible,"onUpdate:visible":f[3]||(f[3]=e=>p.popoverVisible=e),width:p.popoverWidth},{reference:M((()=>[N(q(a),{ref_key:"inputRef",ref:n,modelValue:p.inputValue,"onUpdate:modelValue":f[2]||(f[2]=e=>p.inputValue=e),modelModifiers:{trim:!0},placeholder:"搜索图标",autofocus:!1,disabled:e.disabled,onFocus:r,onBlur:c,clearable:""},{prepend:M((()=>[e.modelValue?(T(),O("div",ee,[N(g,{class:"flex-1 w-20",content:e.modelValue,placement:"top"},{default:M((()=>[(T(),E(_,{class:"mr-1",key:e.modelValue,name:e.modelValue,size:16},null,8,["name"]))])),_:1},8,["content"])])):(T(),O(j,{key:1},[le],64))])),append:M((()=>[N(y,null,{default:M((()=>[N(_,{name:"el-icon-Close",size:18,onClick:b})])),_:1})])),_:1},8,["modelValue","disabled"])])),default:M((()=>[B("div",{onMouseover:f[0]||(f[0]=S((e=>p.mouseoverSelect=!0),["stop"])),onMouseout:f[1]||(f[1]=S((e=>p.mouseoverSelect=!1),["stop"]))},[B("div",null,[B("div",H,[J,B("div",null,[(T(),O(j,null,A(i,((e,l)=>B("span",{key:l,class:F(["cursor-pointer text-sm ml-2",{"text-primary":l==u.value}]),onClick:e=>u.value=l},L(e.name),11,K))),64))])]),B("div",Q,[N(h,null,{default:M((()=>[B("div",Y,[(T(!0),O(j,null,A(q(V),(e=>(T(),O("div",{key:e,class:"m-1"},[N(y,{onClick:l=>{return a=e,p.mouseoverSelect=p.popoverVisible=!1,d("update:modelValue",a),void d("change",a);var a}},{default:M((()=>[N(_,{name:e,size:18},null,8,["name"])])),_:2},1032,["onClick"])])))),128))])])),_:1})])])],32)])),_:1},8,["visible","width"])])}}}),oe={class:"edit-popup"},se=W("目录"),te=W("菜单"),de=W("按钮"),ue={class:"flex-1"},ie=B("div",{class:"form-tips"}," 访问的路由地址，如：`user`，如外网地址需内链访问则以`http(s)://`开头 ",-1),ne={class:"flex-1"},pe=B("div",{class:"form-tips"}," 访问的组件路径，如：`user/setting`，默认在`views`目录下 ",-1),re={class:"flex-1"},ce=B("div",{class:"form-tips"}," 访问详情页面，编辑页面时，菜单高亮显示，如`/consumer/lists` ",-1),me={class:"flex-1"},fe=B("div",{class:"form-tips"}," 将作为server端API验权使用，如`auth.admin/user`，请谨慎修改 ",-1),ve={class:"flex-1"},be=B("div",{class:"form-tips"},' 访问路由的默认传递参数，如：`{"id": 1, "name": "admin"}`或`id=1&name=admin` ',-1),Ve=W("缓存"),_e=W("不缓存"),ye=B("div",{class:"form-tips"},"选择缓存则会被`keep-alive`缓存",-1),he=W("显示"),ge=W("隐藏"),Ue=B("div",{class:"form-tips"}," 选择隐藏则路由将不会出现在侧边栏，但仍然可以访问 ",-1),ke=W("正常"),we=W("停用"),xe=B("div",{class:"form-tips"},"选择停用则路由将不会出现在侧边栏，也不能被访问",-1),Ce=B("div",{class:"form-tips"},"数值越大越排前",-1);e("_",h({__name:"edit",emits:["success","close"],setup(e,{expose:l,emit:o}){const s=U(),t=U(),m=g("add"),f=w((()=>"edit"==m.value?"编辑菜单":"新增菜单")),v=g(b()),h=(e,l)=>{l((e?v.value.filter((l=>l.toLowerCase().includes(e.toLowerCase()))):v.value).map((e=>({value:e}))))},x=k({id:"",pid:0,type:V.CATALOGUE,icon:"",name:"",sort:0,paths:"",perms:"",component:"",selected:"",params:"",is_cache:0,is_show:1,is_disable:0}),C={pid:[{required:!0,message:"请选择父级菜单",trigger:["blur","change"]}],name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],paths:[{required:!0,message:"请输入路由地址",trigger:"blur"}],component:[{required:!0,message:"请输入组件地址",trigger:"blur"}]},j=g([]),A=async()=>{await(s.value?.validate()),"edit"==m.value?await P(x):await $(x),t.value?.close(),o("success")},F=e=>{for(const l in x)null!=e[l]&&null!=e[l]&&(x[l]=e[l])},L=()=>{o("close")};return(async()=>{const e=await G({page_type:0}),l={id:0,name:"顶级",children:[]};l.children=_(y(e.lists).filter((e=>e.type!=V.BUTTON))),j.value.push(l)})(),l({open:(e="add")=>{m.value=e,t.value?.open()},setFormData:F,getDetail:async e=>{const l=await X({id:e.id});F(l)}}),(e,l)=>{const o=d,m=u,v=p,b=i,_=a,y=ae,g=n,U=r,k=c;return T(),O("div",oe,[N(I,{ref_key:"popupRef",ref:t,title:q(f),async:!0,width:"550px",onConfirm:A,onClose:L},{default:M((()=>[N(k,{ref_key:"formRef",ref:s,model:x,"label-width":"80px",rules:C},{default:M((()=>[N(v,{label:"菜单类型",prop:"type",required:""},{default:M((()=>[N(m,{modelValue:x.type,"onUpdate:modelValue":l[0]||(l[0]=e=>x.type=e)},{default:M((()=>[N(o,{label:q(V).CATALOGUE},{default:M((()=>[se])),_:1},8,["label"]),N(o,{label:q(V).MENU},{default:M((()=>[te])),_:1},8,["label"]),N(o,{label:q(V).BUTTON},{default:M((()=>[de])),_:1},8,["label"])])),_:1},8,["modelValue"])])),_:1}),N(v,{label:"父级菜单",prop:"pid"},{default:M((()=>[N(b,{class:"flex-1",modelValue:x.pid,"onUpdate:modelValue":l[1]||(l[1]=e=>x.pid=e),data:j.value,clearable:"","node-key":"id",props:{label:"name"},"default-expand-all":!0,placeholder:"请选择父级菜单","check-strictly":""},null,8,["modelValue","data"])])),_:1}),N(v,{label:"菜单名称",prop:"name"},{default:M((()=>[N(_,{modelValue:x.name,"onUpdate:modelValue":l[2]||(l[2]=e=>x.name=e),placeholder:"请输入菜单名称",clearable:""},null,8,["modelValue"])])),_:1}),x.type!=q(V).BUTTON?(T(),E(v,{key:0,label:"菜单图标",prop:"icon"},{default:M((()=>[N(y,{class:"flex-1",modelValue:x.icon,"onUpdate:modelValue":l[3]||(l[3]=e=>x.icon=e)},null,8,["modelValue"])])),_:1})):z("",!0),x.type!=q(V).BUTTON?(T(),E(v,{key:1,label:"路由路径",prop:"paths"},{default:M((()=>[B("div",ue,[N(_,{modelValue:x.paths,"onUpdate:modelValue":l[4]||(l[4]=e=>x.paths=e),placeholder:"请输入路由路径",clearable:""},null,8,["modelValue"]),ie])])),_:1})):z("",!0),x.type==q(V).MENU?(T(),E(v,{key:2,label:"组件路径",prop:"component"},{default:M((()=>[B("div",ne,[N(g,{class:"w-full",modelValue:x.component,"onUpdate:modelValue":l[5]||(l[5]=e=>x.component=e),"fetch-suggestions":h,clearable:"",placeholder:"请输入组件路径"},null,8,["modelValue"]),pe])])),_:1})):z("",!0),x.type==q(V).MENU?(T(),E(v,{key:3,label:"选中菜单",prop:"selected"},{default:M((()=>[B("div",re,[N(_,{modelValue:x.selected,"onUpdate:modelValue":l[6]||(l[6]=e=>x.selected=e),placeholder:"请输入路由路径",clearable:""},null,8,["modelValue"]),ce])])),_:1})):z("",!0),x.type!=q(V).CATALOGUE?(T(),E(v,{key:4,label:"权限字符",prop:"perms"},{default:M((()=>[B("div",me,[N(_,{modelValue:x.perms,"onUpdate:modelValue":l[7]||(l[7]=e=>x.perms=e),placeholder:"请输入权限字符",clearable:""},null,8,["modelValue"]),fe])])),_:1})):z("",!0),x.type==q(V).MENU?(T(),E(v,{key:5,label:"路由参数",prop:"params"},{default:M((()=>[B("div",null,[B("div",ve,[N(_,{modelValue:x.params,"onUpdate:modelValue":l[8]||(l[8]=e=>x.params=e),placeholder:"请输入路由参数",clearable:""},null,8,["modelValue"])]),be])])),_:1})):z("",!0),x.type==q(V).MENU?(T(),E(v,{key:6,label:"是否缓存",prop:"is_cache",required:""},{default:M((()=>[B("div",null,[N(m,{modelValue:x.is_cache,"onUpdate:modelValue":l[9]||(l[9]=e=>x.is_cache=e)},{default:M((()=>[N(o,{label:1},{default:M((()=>[Ve])),_:1}),N(o,{label:0},{default:M((()=>[_e])),_:1})])),_:1},8,["modelValue"]),ye])])),_:1})):z("",!0),x.type!=q(V).BUTTON?(T(),E(v,{key:7,label:"是否显示",prop:"is_show",required:""},{default:M((()=>[B("div",null,[N(m,{modelValue:x.is_show,"onUpdate:modelValue":l[10]||(l[10]=e=>x.is_show=e)},{default:M((()=>[N(o,{label:1},{default:M((()=>[he])),_:1}),N(o,{label:0},{default:M((()=>[ge])),_:1})])),_:1},8,["modelValue"]),Ue])])),_:1})):z("",!0),x.type!=q(V).BUTTON?(T(),E(v,{key:8,label:"菜单状态",prop:"is_disable",required:""},{default:M((()=>[B("div",null,[N(m,{modelValue:x.is_disable,"onUpdate:modelValue":l[11]||(l[11]=e=>x.is_disable=e)},{default:M((()=>[N(o,{label:0},{default:M((()=>[ke])),_:1}),N(o,{label:1},{default:M((()=>[we])),_:1})])),_:1},8,["modelValue"]),xe])])),_:1})):z("",!0),N(v,{label:"菜单排序",prop:"sort"},{default:M((()=>[B("div",null,[N(U,{modelValue:x.sort,"onUpdate:modelValue":l[12]||(l[12]=e=>x.sort=e),min:0,max:9999},null,8,["modelValue"]),Ce])])),_:1})])),_:1},8,["model"])])),_:1},8,["title"])])}}}))}}}));
