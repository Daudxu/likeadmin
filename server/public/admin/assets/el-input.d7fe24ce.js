import{r as N,F as ye,a8 as Re,x as je,a9 as J,al as ke,am as He,D as Z,d as We,an as Ke,O as Ue,k as v,ao as qe,C as Xe,I as Ye,ap as Qe,P as ze,aq as ee,ar as Ge,as as Je,at as Ze,au as eo,af as oo,L as oe,K as $,M as Se,m as ro,ae as to,av as lo,Q as no,aw as ao,o as s,c as m,i as c,V as re,T as h,h as o,U as H,e as P,f as w,w as F,W,p as B,ax as te,a as io,ay as po,az as so,aA as uo,t as K,q as co,X as vo,aB as bo,aC as Ce,N as fo,$ as ho}from"./index.94cff847.js";import{U as le}from"./event.776e7e11.js";import{u as xo}from"./index.09fe042e.js";const go=t=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(t);function _o(t){const b=N();function a(){if(t.value==null)return;const{selectionStart:u,selectionEnd:f,value:i}=t.value;if(u==null||f==null)return;const _=i.slice(0,Math.max(0,u)),p=i.slice(Math.max(0,f));b.value={selectionStart:u,selectionEnd:f,value:i,beforeTxt:_,afterTxt:p}}function r(){if(t.value==null||b.value==null)return;const{value:u}=t.value,{beforeTxt:f,afterTxt:i,selectionStart:_}=b.value;if(f==null||i==null||_==null)return;let p=u.length;if(u.endsWith(i))p=u.length-i.length;else if(u.startsWith(f))p=f.length;else{const x=f[_-1],y=u.indexOf(x,_-1);y!==-1&&(p=y+1)}t.value.setSelectionRange(p,p)}return[a,r]}let g;const mo=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,wo=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function yo(t){const b=window.getComputedStyle(t),a=b.getPropertyValue("box-sizing"),r=Number.parseFloat(b.getPropertyValue("padding-bottom"))+Number.parseFloat(b.getPropertyValue("padding-top")),u=Number.parseFloat(b.getPropertyValue("border-bottom-width"))+Number.parseFloat(b.getPropertyValue("border-top-width"));return{contextStyle:wo.map(i=>`${i}:${b.getPropertyValue(i)}`).join(";"),paddingSize:r,borderSize:u,boxSizing:a}}function Ie(t,b=1,a){var r;g||(g=document.createElement("textarea"),document.body.appendChild(g));const{paddingSize:u,borderSize:f,boxSizing:i,contextStyle:_}=yo(t);g.setAttribute("style",`${_};${mo}`),g.value=t.value||t.placeholder||"";let p=g.scrollHeight;const x={};i==="border-box"?p=p+f:i==="content-box"&&(p=p-u),g.value="";const y=g.scrollHeight-u;if(ye(b)){let d=y*b;i==="border-box"&&(d=d+u+f),p=Math.max(d,p),x.minHeight=`${d}px`}if(ye(a)){let d=y*a;i==="border-box"&&(d=d+u+f),p=Math.min(d,p)}return x.height=`${p}px`,(r=g.parentNode)==null||r.removeChild(g),g=void 0,x}const ko=Re({id:{type:String,default:void 0},size:je,disabled:Boolean,modelValue:{type:J([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:J([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:ke,default:""},prefixIcon:{type:ke,default:""},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:J([Object,Array,String]),default:()=>He({})}}),zo={[le]:t=>Z(t),input:t=>Z(t),change:t=>Z(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},So=["role"],Co=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],Io=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"],Eo={name:"ElInput",inheritAttrs:!1},$o=We({...Eo,props:ko,emits:zo,setup(t,{expose:b,emit:a}){const r=t,u={suffix:"append",prefix:"prepend"},f=fo(),i=Ke(),_=Ue(),p=v(()=>{const e={};return r.containerRole==="combobox"&&(e["aria-haspopup"]=i["aria-haspopup"],e["aria-owns"]=i["aria-owns"],e["aria-expanded"]=i["aria-expanded"]),e}),x=xo({excludeKeys:v(()=>Object.keys(p.value))}),{form:y,formItem:d}=qe(),{inputId:ne}=Xe(r,{formItemContext:d}),Ee=Ye(),C=Qe(),l=ze("input"),ae=ze("textarea"),O=ee(),I=ee(),V=N(!1),U=N(!1),T=N(!1),D=N(!1),ie=N(),q=ee(r.inputStyle),A=v(()=>O.value||I.value),pe=v(()=>{var e;return(e=y==null?void 0:y.statusIcon)!=null?e:!1}),M=v(()=>(d==null?void 0:d.validateState)||""),se=v(()=>M.value&&Ge[M.value]),$e=v(()=>D.value?Je:Ze),Pe=v(()=>[i.style,r.inputStyle]),ue=v(()=>[r.inputStyle,q.value,{resize:r.resize}]),k=v(()=>eo(r.modelValue)?"":String(r.modelValue)),L=v(()=>r.clearable&&!C.value&&!r.readonly&&!!k.value&&(V.value||U.value)),X=v(()=>r.showPassword&&!C.value&&!r.readonly&&!!k.value&&(!!k.value||V.value)),E=v(()=>r.showWordLimit&&!!x.value.maxlength&&(r.type==="text"||r.type==="textarea")&&!C.value&&!r.readonly&&!r.showPassword),Y=v(()=>Array.from(k.value).length),Ne=v(()=>!!E.value&&Y.value>Number(x.value.maxlength)),Ve=v(()=>!!_.suffix||!!r.suffixIcon||L.value||r.showPassword||E.value||!!M.value&&pe.value),[Te,Ae]=_o(O);oo(I,e=>{if(!E.value||r.resize!=="both")return;const n=e[0],{width:z}=n.contentRect;ie.value={right:`calc(100% - ${z+15+6}px)`}});const R=()=>{const{type:e,autosize:n}=r;if(!(!bo||e!=="textarea"))if(n){const z=Ce(n)?n.minRows:void 0,S=Ce(n)?n.maxRows:void 0;q.value={...Ie(I.value,z,S)}}else q.value={minHeight:Ie(I.value).minHeight}},j=()=>{const e=A.value;!e||e.value===k.value||(e.value=k.value)},de=e=>{const{el:n}=f.vnode;if(!n)return;const S=Array.from(n.querySelectorAll(`.${l.e(e)}`)).find(Le=>Le.parentNode===n);if(!S)return;const we=u[e];_[we]?S.style.transform=`translateX(${e==="suffix"?"-":""}${n.querySelector(`.${l.be("group",we)}`).offsetWidth}px)`:S.removeAttribute("style")},Q=()=>{de("prefix"),de("suffix")},G=async e=>{Te();let{value:n}=e.target;r.formatter&&(n=r.parser?r.parser(n):n,n=r.formatter(n)),!T.value&&n!==k.value&&(a(le,n),a("input",n),await $(),j(),Ae())},ce=e=>{a("change",e.target.value)},ve=e=>{a("compositionstart",e),T.value=!0},be=e=>{var n;a("compositionupdate",e);const z=(n=e.target)==null?void 0:n.value,S=z[z.length-1]||"";T.value=!go(S)},fe=e=>{a("compositionend",e),T.value&&(T.value=!1,G(e))},Me=()=>{D.value=!D.value,he()},he=async()=>{var e;await $(),(e=A.value)==null||e.focus()},Fe=()=>{var e;return(e=A.value)==null?void 0:e.blur()},xe=e=>{V.value=!0,a("focus",e)},ge=e=>{var n;V.value=!1,a("blur",e),r.validateEvent&&((n=d==null?void 0:d.validate)==null||n.call(d,"blur").catch(z=>Se()))},Be=e=>{U.value=!1,a("mouseleave",e)},Oe=e=>{U.value=!0,a("mouseenter",e)},_e=e=>{a("keydown",e)},De=()=>{var e;(e=A.value)==null||e.select()},me=()=>{a(le,""),a("change",""),a("clear"),a("input","")};return oe(()=>r.modelValue,()=>{var e;$(()=>R()),r.validateEvent&&((e=d==null?void 0:d.validate)==null||e.call(d,"change").catch(n=>Se()))}),oe(k,()=>j()),oe(()=>r.type,async()=>{await $(),j(),R(),Q()}),ro(async()=>{!r.formatter&&r.parser,j(),Q(),await $(),R()}),to(async()=>{await $(),Q()}),b({input:O,textarea:I,ref:A,textareaStyle:ue,autosize:lo(r,"autosize"),focus:he,blur:Fe,select:De,clear:me,resizeTextarea:R}),(e,n)=>no((s(),m("div",te(o(p),{class:[e.type==="textarea"?o(ae).b():o(l).b(),o(l).m(o(Ee)),o(l).is("disabled",o(C)),o(l).is("exceed",o(Ne)),{[o(l).b("group")]:e.$slots.prepend||e.$slots.append,[o(l).bm("group","append")]:e.$slots.append,[o(l).bm("group","prepend")]:e.$slots.prepend,[o(l).m("prefix")]:e.$slots.prefix||e.prefixIcon,[o(l).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[o(l).bm("suffix","password-clear")]:o(L)&&o(X)},e.$attrs.class],style:o(Pe),role:e.containerRole,onMouseenter:Oe,onMouseleave:Be}),[c(" input "),e.type!=="textarea"?(s(),m(re,{key:0},[c(" prepend slot "),e.$slots.prepend?(s(),m("div",{key:0,class:h(o(l).be("group","prepend"))},[H(e.$slots,"prepend")],2)):c("v-if",!0),P("div",{class:h([o(l).e("wrapper"),o(l).is("focus",V.value)])},[c(" prefix slot "),e.$slots.prefix||e.prefixIcon?(s(),m("span",{key:0,class:h(o(l).e("prefix"))},[P("span",{class:h(o(l).e("prefix-inner"))},[H(e.$slots,"prefix"),e.prefixIcon?(s(),w(o(B),{key:0,class:h(o(l).e("icon"))},{default:F(()=>[(s(),w(W(e.prefixIcon)))]),_:1},8,["class"])):c("v-if",!0)],2)],2)):c("v-if",!0),P("input",te({id:o(ne),ref_key:"input",ref:O,class:o(l).e("inner")},o(x),{type:e.showPassword?D.value?"text":"password":e.type,disabled:o(C),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:ve,onCompositionupdate:be,onCompositionend:fe,onInput:G,onFocus:xe,onBlur:ge,onChange:ce,onKeydown:_e}),null,16,Co),c(" suffix slot "),o(Ve)?(s(),m("span",{key:1,class:h(o(l).e("suffix"))},[P("span",{class:h(o(l).e("suffix-inner"))},[!o(L)||!o(X)||!o(E)?(s(),m(re,{key:0},[H(e.$slots,"suffix"),e.suffixIcon?(s(),w(o(B),{key:0,class:h(o(l).e("icon"))},{default:F(()=>[(s(),w(W(e.suffixIcon)))]),_:1},8,["class"])):c("v-if",!0)],64)):c("v-if",!0),o(L)?(s(),w(o(B),{key:1,class:h([o(l).e("icon"),o(l).e("clear")]),onMousedown:so(o(uo),["prevent"]),onClick:me},{default:F(()=>[io(o(po))]),_:1},8,["class","onMousedown"])):c("v-if",!0),o(X)?(s(),w(o(B),{key:2,class:h([o(l).e("icon"),o(l).e("password")]),onClick:Me},{default:F(()=>[(s(),w(W(o($e))))]),_:1},8,["class"])):c("v-if",!0),o(E)?(s(),m("span",{key:3,class:h(o(l).e("count"))},[P("span",{class:h(o(l).e("count-inner"))},K(o(Y))+" / "+K(o(x).maxlength),3)],2)):c("v-if",!0),o(M)&&o(se)&&o(pe)?(s(),w(o(B),{key:4,class:h([o(l).e("icon"),o(l).e("validateIcon"),o(l).is("loading",o(M)==="validating")])},{default:F(()=>[(s(),w(W(o(se))))]),_:1},8,["class"])):c("v-if",!0)],2)],2)):c("v-if",!0)],2),c(" append slot "),e.$slots.append?(s(),m("div",{key:1,class:h(o(l).be("group","append"))},[H(e.$slots,"append")],2)):c("v-if",!0)],64)):(s(),m(re,{key:1},[c(" textarea "),P("textarea",te({id:o(ne),ref_key:"textarea",ref:I,class:o(ae).e("inner")},o(x),{tabindex:e.tabindex,disabled:o(C),readonly:e.readonly,autocomplete:e.autocomplete,style:o(ue),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:ve,onCompositionupdate:be,onCompositionend:fe,onInput:G,onFocus:xe,onBlur:ge,onChange:ce,onKeydown:_e}),null,16,Io),o(E)?(s(),m("span",{key:0,style:co(ie.value),class:h(o(l).e("count"))},K(o(Y))+" / "+K(o(x).maxlength),7)):c("v-if",!0)],64))],16,So)),[[ao,e.type!=="hidden"]])}});var Po=vo($o,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Ao=ho(Po);export{Ao as E,go as i};
