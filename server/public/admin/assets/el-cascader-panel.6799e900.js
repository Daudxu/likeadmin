import{d as ce,P as oe,bx as an,p as we,cv as Fe,du as Oe,d9 as ln,y as ge,k as N,X as Ce,s as P,o as f,c as B,i as j,f as A,az as re,w as H,a as G,T as L,V as te,e as ae,cT as Ue,cx as qe,r as T,dS as tn,bQ as de,g as on,t as ne,N as rn,dT as Ne,ab as Ie,dH as dn,b7 as Me,aA as un,dU as cn,Y as pn,l as hn,L as se,bG as fn,m as Re,K as le,aB as We,de as O,dV as fe,dW as Ze,cP as vn,ay as mn,ds as gn,dy as bn,z as kn,B as Cn,I as yn,M as Nn,dR as En,af as wn,bR as $n,Q as he,v as Sn,co as Vn,q as Tn,aw as ze,U as Pn}from"./index.5eb39820.js";import{E as Dn}from"./el-checkbox.d607641a.js";import{E as Ln}from"./el-radio.2bfa42bf.js";import{l as ue}from"./isEqual.1da74c60.js";import{U as be,C as ke}from"./event.776e7e11.js";import{u as He,c as Be}from"./arrays.6dddb988.js";import{s as In}from"./scroll.b961b26d.js";import{b as Mn}from"./_baseFlatten.65a81a47.js";import{E as zn,i as Hn}from"./el-input.fd0d41f7.js";import{E as Bn,t as An}from"./index.e5ffdd9e.js";import{C as Kn,d as Fn}from"./el-tag.b0f88637.js";import{i as On}from"./validator.81b74b4a.js";var Un=1/0;function qn(e){var n=e==null?0:e.length;return n?Mn(e,Un):[]}var Rn=ce({name:"NodeContent",setup(){return{ns:oe("cascader-node")}},render(){const{ns:e}=this,{node:n,panel:s}=this.$parent,{data:l,label:t}=n,{renderLabelFn:u}=s;return an("span",{class:e.e("label")},u?u({node:n,data:l}):t)}});const $e=Symbol(),Wn=ce({name:"ElCascaderNode",components:{ElCheckbox:Dn,ElRadio:Ln,NodeContent:Rn,ElIcon:we,Check:Fe,Loading:Oe,ArrowRight:ln},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:n}){const s=ge($e),l=oe("cascader-node"),t=N(()=>s.isHoverMenu),u=N(()=>s.config.multiple),d=N(()=>s.config.checkStrictly),c=N(()=>{var k;return(k=s.checkedNodes[0])==null?void 0:k.uid}),v=N(()=>e.node.isDisabled),m=N(()=>e.node.isLeaf),b=N(()=>d.value&&!m.value||!v.value),S=N(()=>D(s.expandingNode)),C=N(()=>d.value&&s.checkedNodes.some(D)),D=k=>{var M;const{level:Y,uid:ee}=e.node;return((M=k==null?void 0:k.pathNodes[Y-1])==null?void 0:M.uid)===ee},I=()=>{S.value||s.expandNode(e.node)},q=k=>{const{node:M}=e;k!==M.checked&&s.handleCheckChange(M,k)},o=()=>{s.lazyLoad(e.node,()=>{m.value||I()})},V=k=>{!t.value||(K(),!m.value&&n("expand",k))},K=()=>{const{node:k}=e;!b.value||k.loading||(k.loaded?I():o())},F=()=>{t.value&&!m.value||(m.value&&!v.value&&!d.value&&!u.value?R(!0):K())},X=k=>{d.value?(q(k),e.node.loaded&&I()):R(k)},R=k=>{e.node.loaded?(q(k),!d.value&&I()):o()};return{panel:s,isHoverMenu:t,multiple:u,checkStrictly:d,checkedNodeId:c,isDisabled:v,isLeaf:m,expandable:b,inExpandingPath:S,inCheckedPath:C,ns:l,handleHoverExpand:V,handleExpand:K,handleClick:F,handleCheck:R,handleSelectCheck:X}}}),Zn=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],jn=ae("span",null,null,-1);function Gn(e,n,s,l,t,u){const d=P("el-checkbox"),c=P("el-radio"),v=P("check"),m=P("el-icon"),b=P("node-content"),S=P("loading"),C=P("arrow-right");return f(),B("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:L([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:n[2]||(n[2]=(...D)=>e.handleHoverExpand&&e.handleHoverExpand(...D)),onFocus:n[3]||(n[3]=(...D)=>e.handleHoverExpand&&e.handleHoverExpand(...D)),onClick:n[4]||(n[4]=(...D)=>e.handleClick&&e.handleClick(...D))},[j(" prefix "),e.multiple?(f(),A(d,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:n[0]||(n[0]=re(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(f(),A(c,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:n[1]||(n[1]=re(()=>{},["stop"]))},{default:H(()=>[j(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),jn]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(f(),A(m,{key:2,class:L(e.ns.e("prefix"))},{default:H(()=>[G(v)]),_:1},8,["class"])):j("v-if",!0),j(" content "),G(b),j(" postfix "),e.isLeaf?j("v-if",!0):(f(),B(te,{key:3},[e.node.loading?(f(),A(m,{key:0,class:L([e.ns.is("loading"),e.ns.e("postfix")])},{default:H(()=>[G(S)]),_:1},8,["class"])):(f(),A(m,{key:1,class:L(["arrow-right",e.ns.e("postfix")])},{default:H(()=>[G(C)]),_:1},8,["class"]))],64))],42,Zn)}var Xn=Ce(Wn,[["render",Gn],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const Yn=ce({name:"ElCascaderMenu",components:{Loading:Oe,ElIcon:we,ElScrollbar:Ue,ElCascaderNode:Xn},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const n=rn(),s=oe("cascader-menu"),{t:l}=qe(),t=tn();let u=null,d=null;const c=ge($e),v=T(null),m=N(()=>!e.nodes.length),b=N(()=>!c.initialLoaded),S=N(()=>`cascader-menu-${t}-${e.index}`),C=o=>{u=o.target},D=o=>{if(!(!c.isHoverMenu||!u||!v.value))if(u.contains(o.target)){I();const V=n.vnode.el,{left:K}=V.getBoundingClientRect(),{offsetWidth:F,offsetHeight:X}=V,R=o.clientX-K,k=u.offsetTop,M=k+u.offsetHeight;v.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${R} ${k} L${F} 0 V${k} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${R} ${M} L${F} ${X} V${M} Z" />
        `}else d||(d=window.setTimeout(q,c.config.hoverThreshold))},I=()=>{!d||(clearTimeout(d),d=null)},q=()=>{!v.value||(v.value.innerHTML="",I())};return{ns:s,panel:c,hoverZone:v,isEmpty:m,isLoading:b,menuId:S,t:l,handleExpand:C,handleMouseMove:D,clearHoverZone:q}}});function Qn(e,n,s,l,t,u){const d=P("el-cascader-node"),c=P("loading"),v=P("el-icon"),m=P("el-scrollbar");return f(),A(m,{key:e.menuId,tag:"ul",role:"menu",class:L(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:H(()=>{var b;return[(f(!0),B(te,null,de(e.nodes,S=>(f(),A(d,{key:S.uid,node:S,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(f(),B("div",{key:0,class:L(e.ns.e("empty-text"))},[G(v,{size:"14",class:L(e.ns.is("loading"))},{default:H(()=>[G(c)]),_:1},8,["class"]),on(" "+ne(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(f(),B("div",{key:1,class:L(e.ns.e("empty-text"))},ne(e.t("el.cascader.noData")),3)):(b=e.panel)!=null&&b.isHoverMenu?(f(),B("svg",{key:2,ref:"hoverZone",class:L(e.ns.e("hover-zone"))},null,2)):j("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Jn=Ce(Yn,[["render",Qn],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]),Se=(e=>(e.CLICK="click",e.HOVER="hover",e))(Se||{});let _n=0;const xn=e=>{const n=[e];let{parent:s}=e;for(;s;)n.unshift(s),s=s.parent;return n};class ie{constructor(n,s,l,t=!1){this.data=n,this.config=s,this.parent=l,this.root=t,this.uid=_n++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:u,label:d,children:c}=s,v=n[c],m=xn(this);this.level=t?0:l?l.level+1:1,this.value=n[u],this.label=n[d],this.pathNodes=m,this.pathValues=m.map(b=>b.value),this.pathLabels=m.map(b=>b.label),this.childrenData=v,this.children=(v||[]).map(b=>new ie(b,s,this)),this.loaded=!s.lazy||this.isLeaf||!Ne(v)}get isDisabled(){const{data:n,parent:s,config:l}=this,{disabled:t,checkStrictly:u}=l;return(Ie(t)?t(n,this):!!n[t])||!u&&(s==null?void 0:s.isDisabled)}get isLeaf(){const{data:n,config:s,childrenData:l,loaded:t}=this,{lazy:u,leaf:d}=s,c=Ie(d)?d(n,this):n[d];return dn(c)?u&&!t?!1:!(Array.isArray(l)&&l.length):!!c}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(n){const{childrenData:s,children:l}=this,t=new ie(n,this.config,this);return Array.isArray(s)?s.push(n):this.childrenData=[n],l.push(t),t}calcText(n,s){const l=n?this.pathLabels.join(s):this.label;return this.text=l,l}broadcast(n,...s){const l=`onParent${Me(n)}`;this.children.forEach(t=>{t&&(t.broadcast(n,...s),t[l]&&t[l](...s))})}emit(n,...s){const{parent:l}=this,t=`onChild${Me(n)}`;l&&(l[t]&&l[t](...s),l.emit(n,...s))}onParentCheck(n){this.isDisabled||this.setCheckState(n)}onChildCheck(){const{children:n}=this,s=n.filter(t=>!t.isDisabled),l=s.length?s.every(t=>t.checked):!1;this.setCheckState(l)}setCheckState(n){const s=this.children.length,l=this.children.reduce((t,u)=>{const d=u.checked?1:u.indeterminate?.5:0;return t+d},0);this.checked=this.loaded&&this.children.filter(t=>!t.isDisabled).every(t=>t.loaded&&t.checked)&&n,this.indeterminate=this.loaded&&l!==s&&l>0}doCheck(n){if(this.checked===n)return;const{checkStrictly:s,multiple:l}=this.config;s||!l?this.checked=n:(this.broadcast("check",n),this.setCheckState(n),this.emit("check"))}}const Ee=(e,n)=>e.reduce((s,l)=>(l.isLeaf?s.push(l):(!n&&s.push(l),s=s.concat(Ee(l.children,n))),s),[]);class Ae{constructor(n,s){this.config=s;const l=(n||[]).map(t=>new ie(t,this.config));this.nodes=l,this.allNodes=Ee(l,!1),this.leafNodes=Ee(l,!0)}getNodes(){return this.nodes}getFlattedNodes(n){return n?this.leafNodes:this.allNodes}appendNode(n,s){const l=s?s.appendChild(n):new ie(n,this.config);s||this.nodes.push(l),this.allNodes.push(l),l.isLeaf&&this.leafNodes.push(l)}appendNodes(n,s){n.forEach(l=>this.appendNode(l,s))}getNodeByValue(n,s=!1){return!n&&n!==0?null:this.getFlattedNodes(s).find(t=>ue(t.value,n)||ue(t.pathValues,n))||null}getSameNode(n){return n&&this.getFlattedNodes(!1).find(({value:l,level:t})=>ue(n.value,l)&&n.level===t)||null}}const je={modelValue:[Number,String,Array],options:{type:Array,default:()=>[]},props:{type:Object,default:()=>({})}},es={expandTrigger:Se.CLICK,multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:un,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},ns=e=>N(()=>({...es,...e.props})),Ke=e=>{if(!e)return 0;const n=e.id.split("-");return Number(n[n.length-2])},ss=e=>{if(!e)return;const n=e.querySelector("input");n?n.click():cn(e)&&e.click()},as=(e,n)=>{const s=n.slice(0),l=s.map(u=>u.uid),t=e.reduce((u,d)=>{const c=l.indexOf(d.uid);return c>-1&&(u.push(d),s.splice(c,1),l.splice(c,1)),u},[]);return t.push(...s),t},ls=ce({name:"ElCascaderPanel",components:{ElCascaderMenu:Jn},props:{...je,border:{type:Boolean,default:!0},renderLabel:Function},emits:[be,ke,"close","expand-change"],setup(e,{emit:n,slots:s}){let l=!1;const t=oe("cascader"),u=ns(e);let d=null;const c=T(!0),v=T([]),m=T(null),b=T([]),S=T(null),C=T([]),D=N(()=>u.value.expandTrigger===Se.HOVER),I=N(()=>e.renderLabel||s.default),q=()=>{const{options:r}=e,p=u.value;l=!1,d=new Ae(r,p),b.value=[d.getNodes()],p.lazy&&Ne(e.options)?(c.value=!1,o(void 0,h=>{h&&(d=new Ae(h,p),b.value=[d.getNodes()]),c.value=!0,Y(!1,!0)})):Y(!1,!0)},o=(r,p)=>{const h=u.value;r=r||new ie({},h,void 0,!0),r.loading=!0;const E=y=>{const w=r,W=w.root?null:w;y&&(d==null||d.appendNodes(y,W)),w.loading=!1,w.loaded=!0,w.childrenData=w.childrenData||[],p&&p(y)};h.lazyLoad(r,E)},V=(r,p)=>{var h;const{level:E}=r,y=b.value.slice(0,E);let w;r.isLeaf?w=r.pathNodes[E-2]:(w=r,y.push(r.children)),((h=S.value)==null?void 0:h.uid)!==(w==null?void 0:w.uid)&&(S.value=r,b.value=y,!p&&n("expand-change",(r==null?void 0:r.pathValues)||[]))},K=(r,p,h=!0)=>{const{checkStrictly:E,multiple:y}=u.value,w=C.value[0];l=!0,!y&&(w==null||w.doCheck(!1)),r.doCheck(p),M(),h&&!y&&!E&&n("close"),!h&&!y&&!E&&F(r)},F=r=>{!r||(r=r.parent,F(r),r&&V(r))},X=r=>d==null?void 0:d.getFlattedNodes(r),R=r=>{var p;return(p=X(r))==null?void 0:p.filter(h=>h.checked!==!1)},k=()=>{C.value.forEach(r=>r.doCheck(!1)),M()},M=()=>{var r;const{checkStrictly:p,multiple:h}=u.value,E=C.value,y=R(!p),w=as(E,y),W=w.map($=>$.valueByOption);C.value=w,m.value=h?W:(r=W[0])!=null?r:null},Y=(r=!1,p=!1)=>{const{modelValue:h}=e,{lazy:E,multiple:y,checkStrictly:w}=u.value,W=!w;if(!(!c.value||l||!p&&ue(h,m.value)))if(E&&!r){const Q=He(qn(Be(h))).map(U=>d==null?void 0:d.getNodeByValue(U)).filter(U=>!!U&&!U.loaded&&!U.loading);Q.length?Q.forEach(U=>{o(U,()=>Y(!1,p))}):Y(!0,p)}else{const $=y?Be(h):[h],Q=He($.map(U=>d==null?void 0:d.getNodeByValue(U,W)));ee(Q,!1),m.value=h}},ee=(r,p=!0)=>{const{checkStrictly:h}=u.value,E=C.value,y=r.filter($=>!!$&&(h||$.isLeaf)),w=d==null?void 0:d.getSameNode(S.value),W=p&&w||y[0];W?W.pathNodes.forEach($=>V($,!0)):S.value=null,E.forEach($=>$.doCheck(!1)),y.forEach($=>$.doCheck(!0)),C.value=y,le(pe)},pe=()=>{!We||v.value.forEach(r=>{const p=r==null?void 0:r.$el;if(p){const h=p.querySelector(`.${t.namespace.value}-scrollbar__wrap`),E=p.querySelector(`.${t.b("node")}.${t.is("active")}`)||p.querySelector(`.${t.b("node")}.in-active-path`);In(h,E)}})},_=r=>{const p=r.target,{code:h}=r;switch(h){case O.up:case O.down:{r.preventDefault();const E=h===O.up?-1:1;fe(Ze(p,E,`.${t.b("node")}[tabindex="-1"]`));break}case O.left:{r.preventDefault();const E=v.value[Ke(p)-1],y=E==null?void 0:E.$el.querySelector(`.${t.b("node")}[aria-expanded="true"]`);fe(y);break}case O.right:{r.preventDefault();const E=v.value[Ke(p)+1],y=E==null?void 0:E.$el.querySelector(`.${t.b("node")}[tabindex="-1"]`);fe(y);break}case O.enter:ss(p);break}};return pn($e,hn({config:u,expandingNode:S,checkedNodes:C,isHoverMenu:D,initialLoaded:c,renderLabelFn:I,lazyLoad:o,expandNode:V,handleCheckChange:K})),se([u,()=>e.options],q,{deep:!0,immediate:!0}),se(()=>e.modelValue,()=>{l=!1,Y()}),se(m,r=>{ue(r,e.modelValue)||(n(be,r),n(ke,r))}),fn(()=>v.value=[]),Re(()=>!Ne(e.modelValue)&&Y()),{ns:t,menuList:v,menus:b,checkedNodes:C,handleKeyDown:_,handleCheckChange:K,getFlattedNodes:X,getCheckedNodes:R,clearCheckedNodes:k,calculateCheckedValue:M,scrollToExpandingNode:pe}}});function ts(e,n,s,l,t,u){const d=P("el-cascader-menu");return f(),B("div",{class:L([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:n[0]||(n[0]=(...c)=>e.handleKeyDown&&e.handleKeyDown(...c))},[(f(!0),B(te,null,de(e.menus,(c,v)=>(f(),A(d,{key:v,ref_for:!0,ref:m=>e.menuList[v]=m,index:v,nodes:[...c]},null,8,["index","nodes"]))),128))],34)}var ve=Ce(ls,[["render",ts],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);ve.install=e=>{e.component(ve.name,ve)};const os=ve,is=40,rs={large:36,default:32,small:28},ds={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:n,placement:s}=e;["right","left","bottom","top"].includes(s)||(n.arrow.x=35)},requires:["arrow"]}]},us="ElCascader",cs=ce({name:us,components:{ElCascaderPanel:os,ElInput:zn,ElTooltip:vn,ElScrollbar:Ue,ElTag:Bn,ElIcon:we,CircleClose:mn,Check:Fe,ArrowDown:gn},directives:{Clickoutside:Kn},props:{...je,size:{type:String,validator:On},placeholder:{type:String},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Function,default:(e,n)=>e.text.includes(n)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Function,default:()=>!0},popperClass:{type:String,default:""},teleported:bn.teleported,tagType:{...An.type,default:"info"},validateEvent:{type:Boolean,default:!0}},emits:[be,ke,"focus","blur","visible-change","expand-change","remove-tag"],setup(e,{emit:n}){let s=0,l=0;const t=oe("cascader"),u=oe("input"),{t:d}=qe(),c=ge(kn,{}),v=ge(Cn,{}),m=T(null),b=T(null),S=T(null),C=T(null),D=T(null),I=T(!1),q=T(!1),o=T(!1),V=T(""),K=T(""),F=T([]),X=T([]),R=T([]),k=T(!1),M=N(()=>e.disabled||c.disabled),Y=N(()=>e.placeholder||d("el.cascader.placeholder")),ee=yn(),pe=N(()=>["small"].includes(ee.value)?"small":"default"),_=N(()=>!!e.props.multiple),r=N(()=>!e.filterable||_.value),p=N(()=>_.value?K.value:V.value),h=N(()=>{var a;return((a=C.value)==null?void 0:a.checkedNodes)||[]}),E=N(()=>!e.clearable||M.value||o.value||!q.value?!1:!!h.value.length),y=N(()=>{const{showAllLevels:a,separator:i}=e,g=h.value;return g.length?_.value?" ":g[0].calcText(a,i):""}),w=N({get(){return e.modelValue},set(a){var i;n(be,a),n(ke,a),e.validateEvent&&((i=v.validate)==null||i.call(v,"change").catch(g=>Nn()))}}),W=N(()=>{var a,i;return(i=(a=m.value)==null?void 0:a.popperRef)==null?void 0:i.contentRef}),$=a=>{var i,g,z;if(!M.value&&(a=a!=null?a:!I.value,a!==I.value)){if(I.value=a,(g=(i=b.value)==null?void 0:i.input)==null||g.setAttribute("aria-expanded",`${a}`),a)Q(),le((z=C.value)==null?void 0:z.scrollToExpandingNode);else if(e.filterable){const{value:J}=y;V.value=J,K.value=J}n("visible-change",a)}},Q=()=>{le(()=>{var a;(a=m.value)==null||a.updatePopper()})},U=()=>{o.value=!1},ye=a=>{const{showAllLevels:i,separator:g}=e;return{node:a,key:a.uid,text:a.calcText(i,g),hitState:!1,closable:!M.value&&!a.isDisabled,isCollapseTag:!1}},Ve=a=>{var i;const g=a.node;g.doCheck(!1),(i=C.value)==null||i.calculateCheckedValue(),n("remove-tag",g.valueByOption)},Ge=()=>{if(!_.value)return;const a=h.value,i=[],g=[];if(a.forEach(z=>g.push(ye(z))),X.value=g,a.length){const[z,...J]=a,x=J.length;i.push(ye(z)),x&&(e.collapseTags?i.push({key:-1,text:`+ ${x}`,closable:!1,isCollapseTag:!0}):J.forEach(Z=>i.push(ye(Z))))}F.value=i},Te=()=>{var a,i;const{filterMethod:g,showAllLevels:z,separator:J}=e,x=(i=(a=C.value)==null?void 0:a.getFlattedNodes(!e.props.checkStrictly))==null?void 0:i.filter(Z=>Z.isDisabled?!1:(Z.calcText(z,J),g(Z,p.value)));_.value&&(F.value.forEach(Z=>{Z.hitState=!1}),X.value.forEach(Z=>{Z.hitState=!1})),o.value=!0,R.value=x,Q()},Pe=()=>{var a;let i;o.value&&D.value?i=D.value.$el.querySelector(`.${t.e("suggestion-item")}`):i=(a=C.value)==null?void 0:a.$el.querySelector(`.${t.b("node")}[tabindex="-1"]`),i&&(i.focus(),!o.value&&i.click())},De=()=>{var a,i;const g=(a=b.value)==null?void 0:a.input,z=S.value,J=(i=D.value)==null?void 0:i.$el;if(!(!We||!g)){if(J){const x=J.querySelector(`.${t.e("suggestion-list")}`);x.style.minWidth=`${g.offsetWidth}px`}if(z){const{offsetHeight:x}=z,Z=F.value.length>0?`${Math.max(x+6,s)}px`:`${s}px`;g.style.height=Z,Q()}}},Xe=a=>{var i;return(i=C.value)==null?void 0:i.getCheckedNodes(a)},Ye=a=>{Q(),n("expand-change",a)},Qe=a=>{var i;const g=(i=a.target)==null?void 0:i.value;if(a.type==="compositionend")k.value=!1,le(()=>Le(g));else{const z=g[g.length-1]||"";k.value=!Hn(z)}},Je=a=>{if(!k.value)switch(a.code){case O.enter:$();break;case O.down:$(!0),le(Pe),a.preventDefault();break;case O.esc:I.value===!0&&(a.preventDefault(),a.stopPropagation(),$(!1));break;case O.tab:$(!1);break}},_e=()=>{var a;(a=C.value)==null||a.clearCheckedNodes(),$(!1)},xe=a=>{var i,g;const{checked:z}=a;_.value?(i=C.value)==null||i.handleCheckChange(a,!z,!1):(!z&&((g=C.value)==null||g.handleCheckChange(a,!0,!1)),$(!1))},en=a=>{const i=a.target,{code:g}=a;switch(g){case O.up:case O.down:{const z=g===O.up?-1:1;fe(Ze(i,z,`.${t.e("suggestion-item")}[tabindex="-1"]`));break}case O.enter:i.click();break}},nn=()=>{const a=F.value,i=a[a.length-1];l=K.value?0:l+1,!(!i||!l)&&(i.hitState?Ve(i):i.hitState=!0)},sn=Fn(()=>{const{value:a}=p;if(!a)return;const i=e.beforeFilter(a);En(i)?i.then(Te).catch(()=>{}):i!==!1?Te():U()},e.debounce),Le=(a,i)=>{!I.value&&$(!0),!(i!=null&&i.isComposing)&&(a?sn():U())};return se(o,Q),se([h,M],Ge),se(F,()=>{le(()=>De())}),se(y,a=>V.value=a,{immediate:!0}),Re(()=>{var a;const i=(a=b.value)==null?void 0:a.$el;s=(i==null?void 0:i.offsetHeight)||rs[ee.value]||is,wn(i,De)}),{popperOptions:ds,tooltipRef:m,popperPaneRef:W,input:b,tagWrapper:S,panel:C,suggestionPanel:D,popperVisible:I,inputHover:q,inputPlaceholder:Y,filtering:o,presentText:y,checkedValue:w,inputValue:V,searchInputValue:K,presentTags:F,allPresentTags:X,suggestions:R,isDisabled:M,isOnComposition:k,realSize:ee,tagSize:pe,multiple:_,readonly:r,clearBtnVisible:E,nsCascader:t,nsInput:u,t:d,togglePopperVisible:$,hideSuggestionPanel:U,deleteTag:Ve,focusFirstNode:Pe,getCheckedNodes:Xe,handleExpandChange:Ye,handleKeyDown:Je,handleComposition:Qe,handleClear:_e,handleSuggestionClick:xe,handleSuggestionKeyDown:en,handleDelete:nn,handleInput:Le}}}),ps={key:0},hs={class:"el-cascader__collapse-tags"},fs=["placeholder"],vs=["onClick"];function ms(e,n,s,l,t,u){const d=P("circle-close"),c=P("el-icon"),v=P("arrow-down"),m=P("el-input"),b=P("el-tag"),S=P("el-tooltip"),C=P("el-cascader-panel"),D=P("check"),I=P("el-scrollbar"),q=$n("clickoutside");return f(),A(S,{ref:"tooltipRef",visible:e.popperVisible,"onUpdate:visible":n[17]||(n[17]=o=>e.popperVisible=o),teleported:e.teleported,"popper-class":[e.nsCascader.e("dropdown"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${e.nsCascader.namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:e.hideSuggestionPanel},{default:H(()=>[he((f(),B("div",{class:L([e.nsCascader.b(),e.nsCascader.m(e.realSize),e.nsCascader.is("disabled",e.isDisabled),e.$attrs.class]),style:Tn(e.$attrs.style),onClick:n[11]||(n[11]=()=>e.togglePopperVisible(e.readonly?void 0:!0)),onKeydown:n[12]||(n[12]=(...o)=>e.handleKeyDown&&e.handleKeyDown(...o)),onMouseenter:n[13]||(n[13]=o=>e.inputHover=!0),onMouseleave:n[14]||(n[14]=o=>e.inputHover=!1)},[G(m,{ref:"input",modelValue:e.inputValue,"onUpdate:modelValue":n[1]||(n[1]=o=>e.inputValue=o),placeholder:e.searchInputValue?"":e.inputPlaceholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1,size:e.realSize,class:L(e.nsCascader.is("focus",e.popperVisible)),onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onFocus:n[2]||(n[2]=o=>e.$emit("focus",o)),onBlur:n[3]||(n[3]=o=>e.$emit("blur",o)),onInput:e.handleInput},{suffix:H(()=>[e.clearBtnVisible?(f(),A(c,{key:"clear",class:L([e.nsInput.e("icon"),"icon-circle-close"]),onClick:re(e.handleClear,["stop"])},{default:H(()=>[G(d)]),_:1},8,["class","onClick"])):(f(),A(c,{key:"arrow-down",class:L([e.nsInput.e("icon"),"icon-arrow-down",e.nsCascader.is("reverse",e.popperVisible)]),onClick:n[0]||(n[0]=re(o=>e.togglePopperVisible(),["stop"]))},{default:H(()=>[G(v)]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","onCompositionstart","onCompositionupdate","onCompositionend","onInput"]),e.multiple?(f(),B("div",{key:0,ref:"tagWrapper",class:L(e.nsCascader.e("tags"))},[(f(!0),B(te,null,de(e.presentTags,o=>(f(),A(b,{key:o.key,type:e.tagType,size:e.tagSize,hit:o.hitState,closable:o.closable,"disable-transitions":"",onClose:V=>e.deleteTag(o)},{default:H(()=>[o.isCollapseTag===!1?(f(),B("span",ps,ne(o.text),1)):(f(),A(S,{key:1,teleported:!1,disabled:e.popperVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:H(()=>[ae("span",null,ne(o.text),1)]),content:H(()=>[ae("div",hs,[(f(!0),B(te,null,de(e.allPresentTags,(V,K)=>(f(),B("div",{key:K,class:"el-cascader__collapse-tag"},[(f(),A(b,{key:V.key,class:"in-tooltip",type:e.tagType,size:e.tagSize,hit:V.hitState,closable:V.closable,"disable-transitions":"",onClose:F=>e.deleteTag(V)},{default:H(()=>[ae("span",null,ne(V.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))]))),128))])]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),e.filterable&&!e.isDisabled?he((f(),B("input",{key:0,"onUpdate:modelValue":n[4]||(n[4]=o=>e.searchInputValue=o),type:"text",class:L(e.nsCascader.e("search-input")),placeholder:e.presentText?"":e.inputPlaceholder,onInput:n[5]||(n[5]=o=>e.handleInput(e.searchInputValue,o)),onClick:n[6]||(n[6]=re(o=>e.togglePopperVisible(!0),["stop"])),onKeydown:n[7]||(n[7]=Sn((...o)=>e.handleDelete&&e.handleDelete(...o),["delete"])),onCompositionstart:n[8]||(n[8]=(...o)=>e.handleComposition&&e.handleComposition(...o)),onCompositionupdate:n[9]||(n[9]=(...o)=>e.handleComposition&&e.handleComposition(...o)),onCompositionend:n[10]||(n[10]=(...o)=>e.handleComposition&&e.handleComposition(...o))},null,42,fs)),[[Vn,e.searchInputValue]]):j("v-if",!0)],2)):j("v-if",!0)],38)),[[q,()=>e.togglePopperVisible(!1),e.popperPaneRef]])]),content:H(()=>[he(G(C,{ref:"panel",modelValue:e.checkedValue,"onUpdate:modelValue":n[15]||(n[15]=o=>e.checkedValue=o),options:e.options,props:e.props,border:!1,"render-label":e.$slots.default,onExpandChange:e.handleExpandChange,onClose:n[16]||(n[16]=o=>e.$nextTick(()=>e.togglePopperVisible(!1)))},null,8,["modelValue","options","props","render-label","onExpandChange"]),[[ze,!e.filtering]]),e.filterable?he((f(),A(I,{key:0,ref:"suggestionPanel",tag:"ul",class:L(e.nsCascader.e("suggestion-panel")),"view-class":e.nsCascader.e("suggestion-list"),onKeydown:e.handleSuggestionKeyDown},{default:H(()=>[e.suggestions.length?(f(!0),B(te,{key:0},de(e.suggestions,o=>(f(),B("li",{key:o.uid,class:L([e.nsCascader.e("suggestion-item"),e.nsCascader.is("checked",o.checked)]),tabindex:-1,onClick:V=>e.handleSuggestionClick(o)},[ae("span",null,ne(o.text),1),o.checked?(f(),A(c,{key:0},{default:H(()=>[G(D)]),_:1})):j("v-if",!0)],10,vs))),128)):Pn(e.$slots,"empty",{key:1},()=>[ae("li",{class:L(e.nsCascader.e("empty-text"))},ne(e.t("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class","onKeydown"])),[[ze,e.filtering]]):j("v-if",!0)]),_:3},8,["visible","teleported","popper-class","popper-options","transition","onHide"])}var me=Ce(cs,[["render",ms],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/index.vue"]]);me.install=e=>{e.component(me.name,me)};const gs=me,Ds=gs;export{Ds as E};
