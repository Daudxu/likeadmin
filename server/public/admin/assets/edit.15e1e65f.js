import{dz as q,dA as X,dB as se,aI as re,a4 as ie,dC as de,dD as ce,P as pe,Z,k as D,K as S,d as O,L as J,ab as me,r as U,l as N,m as Y,bx as H,X as fe,aq as j,dt as _e,o as C,c as A,a,w as s,h as b,e as F,f as g,V as G,bQ as ve,az as W,g as V,dE as Fe,dF as Ee,E as ee,cM as he,dG as Ce,u as be,dH as y,Q as ye,i as B}from"./index.94cff847.js";import{v as Ve}from"./el-loading.b1eea6e0.js";import{F as ge}from"./index.24e328b7.js";import{E as ke,a as Be}from"./el-form-item.77263b04.js";import{E as De}from"./el-input-number.c51e37bd.js";import{E as ue}from"./el-input.d7fe24ce.js";/* empty css                       */import{E as we,a as xe}from"./el-radio.e882643b.js";import"./el-tag.5a331d0e.js";import{E as L,a as z}from"./el-select.163bb74b.js";import{_ as R}from"./el-tree.d7edba4e.js";import"./el-checkbox.d3118ae4.js";import{E as Ae}from"./el-card.2871e238.js";import{E as Ne}from"./el-page-header.c233acd6.js";import{E as Te}from"./el-popover.989c4ca3.js";import{a as Se,b as Ue,c as Me,d as Oe}from"./auth.ba2e39b0.js";import{m as Ke,p as $e,l as Pe}from"./isEqual.e3a0e917.js";import{b as Le}from"./_baseFlatten.15d004ca.js";import{U as Re}from"./event.776e7e11.js";import"./index.7447f467.js";import"./index.09fe042e.js";import"./index.7740400d.js";import"./scroll.c9d77191.js";import"./validator.6d564f22.js";function Ie(e){return e}function qe(e,u,r){switch(r.length){case 0:return e.call(u);case 1:return e.call(u,r[0]);case 2:return e.call(u,r[0],r[1]);case 3:return e.call(u,r[0],r[1],r[2])}return e.apply(u,r)}var He=800,Ge=16,We=Date.now;function ze(e){var u=0,r=0;return function(){var d=We(),l=Ge-(d-r);if(r=d,l>0){if(++u>=He)return arguments[0]}else u=0;return e.apply(void 0,arguments)}}function Qe(e){return function(){return e}}var Xe=q?function(e,u){return q(e,"toString",{configurable:!0,enumerable:!1,value:Qe(u),writable:!0})}:Ie,Ze=Xe,Je=ze(Ze),Ye=Je,Q=Math.max;function je(e,u,r){return u=Q(u===void 0?e.length-1:u,0),function(){for(var d=arguments,l=-1,p=Q(d.length-u,0),t=Array(p);++l<p;)t[l]=d[u+l];l=-1;for(var v=Array(u+1);++l<u;)v[l]=d[l];return v[u]=r(t),qe(e,this,v)}}function eu(e){var u=e==null?0:e.length;return u?Le(e,1):[]}function uu(e){return Ye(je(e,void 0,eu),e+"")}function tu(e,u){return e!=null&&u in Object(e)}function lu(e,u,r){u=X(u,e);for(var d=-1,l=u.length,p=!1;++d<l;){var t=se(u[d]);if(!(p=e!=null&&r(e,t)))break;e=e[t]}return p||++d!=l?p:(l=e==null?0:e.length,!!l&&Ke(l)&&re(t,l)&&(ie(e)||$e(e)))}function ou(e,u){return e!=null&&lu(e,u,tu)}function nu(e,u,r){for(var d=-1,l=u.length,p={};++d<l;){var t=u[d],v=de(e,t);r(v,t)&&ce(p,X(t,e),v)}return p}function au(e,u){return nu(e,u,function(r,d){return ou(e,d)})}var su=uu(function(e,u){return e==null?{}:au(e,u)}),M=su;const ru=(e,{attrs:u},{tree:r,key:d})=>{const l=pe("tree-select"),p={...M(Z(e),Object.keys(L.props)),...u,valueKey:d,popperClass:D(()=>{const t=[l.e("popper")];return e.popperClass&&t.push(e.popperClass),t.join(" ")}),filterMethod:(t="")=>{e.filterMethod&&e.filterMethod(t),S(()=>{var v;(v=r.value)==null||v.filter(t)})},onVisibleChange:t=>{var v;(v=u.onVisibleChange)==null||v.call(u,t),e.filterable&&t&&p.filterMethod()}};return p},iu=O({extends:z,setup(e,u){const r=z.setup(e,u);return delete r.selectOptionClick,r},methods:{selectOptionClick(){this.$el.parentElement.click()}}}),du=(e,{attrs:u,slots:r,emit:d},{select:l,tree:p,key:t})=>{J(()=>e.modelValue,()=>{e.showCheckbox&&S(()=>{const c=p.value;c&&!Pe(c.getCheckedKeys(),P(e.modelValue))&&c.setCheckedKeys(P(e.modelValue))})},{immediate:!0,deep:!0});const v=D(()=>({value:t.value,...e.props})),h=(c,m)=>{var i;const n=v.value[c];return me(n)?n(m,(i=p.value)==null?void 0:i.getNode(h("value",m))):m[n]};return{...M(Z(e),Object.keys(R.props)),...u,nodeKey:t,expandOnClickNode:D(()=>!e.checkStrictly),defaultExpandedKeys:D(()=>{const c=P(e.modelValue),m=p.value?c.map(i=>{var n,o,E;return(E=(o=(n=p.value)==null?void 0:n.getNode(i))==null?void 0:o.parent)==null?void 0:E.key}).filter(i=>te(i)):c;return e.defaultExpandedKeys?e.defaultExpandedKeys.concat(m):m}),renderContent:(c,{node:m,data:i,store:n})=>c(iu,{value:h("value",i),label:h("label",i),disabled:h("disabled",i)},e.renderContent?()=>e.renderContent(c,{node:m,data:i,store:n}):r.default?()=>r.default({node:m,data:i,store:n}):void 0),filterNodeMethod:(c,m,i)=>{var n;return e.filterNodeMethod?e.filterNodeMethod(c,m,i):c?(n=h("label",m))==null?void 0:n.includes(c):!0},onNodeClick:(c,m,i)=>{var n,o,E;if((n=u.onNodeClick)==null||n.call(u,c,m,i),(e.checkStrictly&&e.showCheckbox?e.checkOnClickNode:e.checkStrictly)||m.isLeaf){if(!h("disabled",c)){const w=(o=l.value)==null?void 0:o.options.get(h("value",c));(E=l.value)==null||E.handleOptionSelect(w,!0)}}else i.proxy.handleExpandIconClick()},onCheck:(c,m)=>{var i,n;(i=u.onCheck)==null||i.call(u,c,m);const o=e.checkStrictly?m.checkedKeys:(n=p.value)==null?void 0:n.getCheckedKeys(!0),E=h("value",c);d(Re,e.multiple?o:o.includes(E)?E:void 0)}}};function te(e){return e||e===0}function P(e){return Array.isArray(e)?e:te(e)?[e]:[]}const cu=O({name:"ElTreeSelect",inheritAttrs:!1,props:{...L.props,...R.props},setup(e,u){const{slots:r,expose:d}=u,l=U(),p=U(),t=D(()=>e.nodeKey||e.valueKey||"value"),v=ru(e,u,{select:l,tree:p,key:t}),h=du(e,u,{select:l,tree:p,key:t}),c=N({});return d(c),Y(()=>{Object.assign(c,{...M(p.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...M(l.value,["focus","blur"])})}),()=>H(L,N({...v,ref:m=>l.value=m}),{...r,default:()=>H(R,N({...h,ref:m=>p.value=m}))})}});var T=fe(cu,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);T.install=e=>{e.component(T.name,T)};const pu=T,mu=pu;const fu={class:"icon-select"},_u=F("div",{class:"m-b-12"},"\u8BF7\u9009\u62E9\u56FE\u6807",-1),vu={style:{height:"300px"}},Fu={class:"flex flex-wrap"},Eu={class:"flex w-4"},hu=V("\u65E0"),Cu=O({__name:"select",props:{modelValue:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:u}){const r=Fe(),d=j(),l=N({inputValue:"",popoverVisible:!1,popoverWidth:0,mouseoverSelect:!1,inputFocus:!1}),p=()=>{l.inputFocus=l.popoverVisible=!0},t=()=>{l.inputFocus=!1,l.popoverVisible=l.mouseoverSelect},v=i=>{l.mouseoverSelect=l.popoverVisible=!1,u("update:modelValue",i),u("change",i)},h=()=>{u("update:modelValue",""),u("change","")},c=D(()=>{if(!l.inputValue)return r;const i=l.inputValue.toLowerCase();return r.filter(n=>{if(n.toLowerCase().indexOf(i)!==-1)return n})}),m=()=>{S(()=>{var n;const i=(n=d.value)==null?void 0:n.$el.offsetWidth;l.popoverWidth=i<300?300:i})};return _e(document.body,"click",()=>{l.popoverVisible=!!(l.inputFocus||l.mouseoverSelect)}),J(()=>l.popoverVisible,async i=>{var n,o;await S(),i?(n=d.value)==null||n.focus():(o=d.value)==null||o.blur()}),Y(()=>{m()}),(i,n)=>{const o=Ee,E=ee,w=he,K=Te;return C(),A("div",fu,[a(K,{visible:l.popoverVisible,"onUpdate:visible":n[3]||(n[3]=_=>l.popoverVisible=_),width:l.popoverWidth},{reference:s(()=>[a(b(ue),{ref_key:"inputRef",ref:d,modelValue:l.inputValue,"onUpdate:modelValue":n[2]||(n[2]=_=>l.inputValue=_),modelModifiers:{trim:!0},placeholder:"\u641C\u7D22\u56FE\u6807",disabled:e.disabled,onFocus:p,onBlur:t},{prepend:s(()=>[F("div",Eu,[e.modelValue?(C(),g(o,{key:e.modelValue,name:e.modelValue},null,8,["name"])):(C(),A(G,{key:1},[hu],64))])]),append:s(()=>[a(E,{link:""},{default:s(()=>[a(o,{name:"el-icon-Close",size:18,onClick:h})]),_:1})]),_:1},8,["modelValue","disabled"])]),default:s(()=>[F("div",{onMouseover:n[0]||(n[0]=W(_=>l.mouseoverSelect=!0,["stop"])),onMouseout:n[1]||(n[1]=W(_=>l.mouseoverSelect=!1,["stop"]))},[F("div",null,[_u,F("div",vu,[a(w,null,{default:s(()=>[F("div",Fu,[(C(!0),A(G,null,ve(b(c),_=>(C(),A("div",{key:_,class:"m-4"},[a(E,{onClick:k=>v(_)},{default:s(()=>[a(o,{name:_,size:18},null,8,["name"])]),_:2},1032,["onClick"])]))),128))])]),_:1})])])],32)]),_:1},8,["visible","width"])])}}}),bu={class:"menu-edit"},yu=V("\u76EE\u5F55"),Vu=V("\u83DC\u5355"),gu=V("\u6309\u94AE"),ku=F("div",{class:"form-tips"},"\u8BBF\u95EE\u7684\u8DEF\u7531\u5730\u5740\uFF0C\u5982\uFF1A`user`\uFF0C\u5982\u5916\u7F51\u5730\u5740\u9700\u5185\u94FE\u8BBF\u95EE\u5219\u4EE5`http(s)://`\u5F00\u5934",-1),Bu=F("div",{class:"form-tips"},"\u8BBF\u95EE\u7684\u7EC4\u4EF6\u8DEF\u5F84\uFF0C\u5982\uFF1A`user/setting`\uFF0C\u9ED8\u8BA4\u5728`views`\u76EE\u5F55\u4E0B",-1),Du=F("div",{class:"form-tips"},"\u5C06\u4F5C\u4E3Aserver\u7AEFAPI\u9A8C\u6743\u4F7F\u7528\uFF0C\u5982`auth.admin/user`\uFF0C\u8BF7\u8C28\u614E\u4FEE\u6539",-1),wu=F("div",{class:"form-tips"},'\u8BBF\u95EE\u8DEF\u7531\u7684\u9ED8\u8BA4\u4F20\u9012\u53C2\u6570\uFF0C\u5982\uFF1A`{"id": 1, "name": "admin"}`\u6216`id=1&name=admin`',-1),xu=V("\u663E\u793A"),Au=V("\u9690\u85CF"),Nu=F("div",{class:"form-tips"},"\u9009\u62E9\u9690\u85CF\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4F46\u4ECD\u7136\u53EF\u4EE5\u8BBF\u95EE",-1),Tu=V("\u6B63\u5E38"),Su=V("\u505C\u7528"),Uu=F("div",{class:"form-tips"},"\u9009\u62E9\u505C\u7528\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4E5F\u4E0D\u80FD\u88AB\u8BBF\u95EE",-1),Mu=V("\u53D6\u6D88"),Ou=V("\u4FDD\u5B58"),st=O({__name:"edit",setup(e){const{query:u}=Ce(),r=be(),d=U(!1),l=j(),p=D(()=>u.id?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355"),t=N({pid:0,type:y.CATALOGUE,icon:"",name:"",sort:1,paths:"",perms:"",component:"",selected:"",params:"",is_cache:0,is_show:1,is_disable:0}),v={pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355",trigger:["blur","change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",trigger:"blur"}],paths:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740",trigger:"blur"}],component:[{required:!0,message:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u5730\u5740",trigger:"blur"}]},h=U([]),c=async()=>{const n=await Se({page_type:0}),o={id:0,name:"\u9876\u7EA7",children:[]};o.children=n.lists,h.value.push(o)},m=async()=>{const n=u.id;if(!!n){d.value=!0;try{const o=await Ue({id:n});Object.keys(t).forEach(E=>{t[E]=o[E]}),d.value=!1}catch{d.value=!1}}},i=async()=>{var o;const n=u.id;await((o=l.value)==null?void 0:o.validate()),n?await Me({id:n,...t}):await Oe(t),r.back()};return c(),m(),(n,o)=>{const E=Ne,w=Ae,K=mu,_=ke,k=we,$=xe,x=ue,le=De,oe=Be,I=ee,ne=ge,ae=Ve;return C(),A("div",bu,[a(w,{shadow:"never"},{default:s(()=>[a(E,{content:b(p),onBack:o[0]||(o[0]=f=>n.$router.back())},null,8,["content"])]),_:1}),ye((C(),g(w,{class:"m-t-16",shadow:"never"},{default:s(()=>[a(oe,{class:"ls-form",ref_key:"formRef",ref:l,model:t,"label-width":"120px",rules:v},{default:s(()=>[a(_,{label:"\u7236\u7EA7\u83DC\u5355",prop:"pid"},{default:s(()=>[a(K,{modelValue:t.pid,"onUpdate:modelValue":o[1]||(o[1]=f=>t.pid=f),data:h.value,clearable:"","node-key":"id",props:{label:"name"},placeholder:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355","check-strictly":""},null,8,["modelValue","data"])]),_:1}),a(_,{label:"\u83DC\u5355\u7C7B\u578B",prop:"type",required:""},{default:s(()=>[a($,{modelValue:t.type,"onUpdate:modelValue":o[2]||(o[2]=f=>t.type=f)},{default:s(()=>[a(k,{label:b(y).CATALOGUE},{default:s(()=>[yu]),_:1},8,["label"]),a(k,{label:b(y).MENU},{default:s(()=>[Vu]),_:1},8,["label"]),a(k,{label:b(y).BUTTON},{default:s(()=>[gu]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),a(_,{label:"\u83DC\u5355\u540D\u79F0",prop:"name"},{default:s(()=>[a(x,{modelValue:t.name,"onUpdate:modelValue":o[3]||(o[3]=f=>t.name=f),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t.type!=b(y).BUTTON?(C(),g(_,{key:0,label:"\u83DC\u5355\u56FE\u6807",prop:"icon"},{default:s(()=>[a(Cu,{modelValue:t.icon,"onUpdate:modelValue":o[4]||(o[4]=f=>t.icon=f),style:{width:"280px"}},null,8,["modelValue"])]),_:1})):B("",!0),a(_,{label:"\u83DC\u5355\u6392\u5E8F",prop:"sort"},{default:s(()=>[a(le,{modelValue:t.sort,"onUpdate:modelValue":o[5]||(o[5]=f=>t.sort=f)},null,8,["modelValue"])]),_:1}),t.type!=b(y).BUTTON?(C(),g(_,{key:1,label:"\u8DEF\u7531\u8DEF\u5F84",prop:"paths"},{default:s(()=>[F("div",null,[a(x,{modelValue:t.paths,"onUpdate:modelValue":o[6]||(o[6]=f=>t.paths=f),style:{width:"280px"},placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u8DEF\u5F84"},null,8,["modelValue"]),ku])]),_:1})):B("",!0),t.type==b(y).MENU?(C(),g(_,{key:2,label:"\u7EC4\u4EF6\u8DEF\u5F84",prop:"component"},{default:s(()=>[F("div",null,[a(x,{modelValue:t.component,"onUpdate:modelValue":o[7]||(o[7]=f=>t.component=f),style:{width:"280px"},placeholder:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u8DEF\u5F84"},null,8,["modelValue"]),Bu])]),_:1})):B("",!0),t.type!=b(y).CATALOGUE?(C(),g(_,{key:3,label:"\u6743\u9650\u5B57\u7B26",prop:"perms"},{default:s(()=>[F("div",null,[a(x,{modelValue:t.perms,"onUpdate:modelValue":o[8]||(o[8]=f=>t.perms=f),style:{width:"280px"},placeholder:"\u8BF7\u8F93\u5165\u6743\u9650\u5B57\u7B26"},null,8,["modelValue"]),Du])]),_:1})):B("",!0),t.type==b(y).MENU?(C(),g(_,{key:4,label:"\u8DEF\u7531\u53C2\u6570",prop:"params"},{default:s(()=>[F("div",null,[a(x,{modelValue:t.params,"onUpdate:modelValue":o[9]||(o[9]=f=>t.params=f),style:{width:"280px"},placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u53C2\u6570"},null,8,["modelValue"]),wu])]),_:1})):B("",!0),t.type!=b(y).BUTTON?(C(),g(_,{key:5,label:"\u662F\u5426\u663E\u793A",prop:"is_show",required:""},{default:s(()=>[F("div",null,[a($,{modelValue:t.is_show,"onUpdate:modelValue":o[10]||(o[10]=f=>t.is_show=f)},{default:s(()=>[a(k,{label:1},{default:s(()=>[xu]),_:1}),a(k,{label:0},{default:s(()=>[Au]),_:1})]),_:1},8,["modelValue"]),Nu])]),_:1})):B("",!0),t.type!=b(y).BUTTON?(C(),g(_,{key:6,label:"\u83DC\u5355\u72B6\u6001",prop:"is_disable",required:""},{default:s(()=>[F("div",null,[a($,{modelValue:t.is_disable,"onUpdate:modelValue":o[11]||(o[11]=f=>t.is_disable=f)},{default:s(()=>[a(k,{label:0},{default:s(()=>[Tu]),_:1}),a(k,{label:1},{default:s(()=>[Su]),_:1})]),_:1},8,["modelValue"]),Uu])]),_:1})):B("",!0)]),_:1},8,["model"])]),_:1})),[[ae,d.value]]),a(ne,null,{default:s(()=>[a(I,{onClick:o[12]||(o[12]=f=>n.$router.back())},{default:s(()=>[Mu]),_:1}),a(I,{type:"primary",onClick:i},{default:s(()=>[Ou]),_:1})]),_:1})])}}});export{st as default};
