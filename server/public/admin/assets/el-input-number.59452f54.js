import{a8 as re,x as te,F as d,au as g,d as le,ct as ie,P as ae,r as ue,l as se,ao as oe,k as v,dD as V,I as pe,ap as de,L as ce,m as be,ae as me,o as m,c as A,Q as G,h as r,T as C,v as I,a as D,w as L,f as y,dE as _e,dF as he,p as R,i as Y,dg as fe,dG as ve,az as T,X as ge,D as Ne,M as j,$ as xe}from"./index.c1f325b4.js";import{E as we}from"./el-input.e89a13b8.js";import{C as Ve,I as Ie,U as ye}from"./event.776e7e11.js";import{v as H}from"./index.207c757c.js";const Ee=re({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,disabled:Boolean,size:te,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:i=>i===null||d(i)||["min","max"].includes(i),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:i=>i>=0&&i===Number.parseInt(`${i}`,10)},validateEvent:{type:Boolean,default:!0}}),ke={[Ve]:(i,E)=>i!==E,blur:i=>i instanceof FocusEvent,focus:i=>i instanceof FocusEvent,[Ie]:i=>d(i)||g(i),[ye]:i=>d(i)||g(i)},Se=["aria-label","onKeydown"],Pe=["aria-label","onKeydown"],ze={name:"ElInputNumber"},Fe=le({...ze,props:Ee,emits:ke,setup(i,{expose:E,emit:b}){const t=i,{t:B}=ie(),p=ae("input-number"),h=ue(),u=se({currentValue:t.modelValue,userInput:null}),{formItem:_}=oe(),M=v(()=>d(t.modelValue)&&N(t.modelValue,-1)<t.min),K=v(()=>d(t.modelValue)&&N(t.modelValue)>t.max),Q=v(()=>{const e=U(t.step);return V(t.precision)?Math.max(U(t.modelValue),e):(e>t.precision,t.precision)}),k=v(()=>t.controls&&t.controlsPosition==="right"),O=pe(),f=de(),W=v(()=>{if(u.userInput!==null)return u.userInput;let e=u.currentValue;if(g(e))return"";if(d(e)){if(Number.isNaN(e))return"";V(t.precision)||(e=e.toFixed(t.precision))}return e}),S=(e,n)=>{if(V(n)&&(n=Q.value),n===0)return Math.round(e);let l=String(e);const a=l.indexOf(".");if(a===-1||!l.replace(".","").split("")[a+n])return e;const x=l.length;return l.charAt(x-1)==="5"&&(l=`${l.slice(0,Math.max(0,x-1))}6`),Number.parseFloat(Number(l).toFixed(n))},U=e=>{if(g(e))return 0;const n=e.toString(),l=n.indexOf(".");let a=0;return l!==-1&&(a=n.length-l-1),a},N=(e,n=1)=>d(e)?S(e+t.step*n):u.currentValue,P=()=>{if(f.value||K.value)return;const e=t.modelValue||0,n=N(e);F(n)},z=()=>{if(f.value||M.value)return;const e=t.modelValue||0,n=N(e,-1);F(n)},$=(e,n)=>{const{max:l,min:a,step:s,precision:c,stepStrictly:x,valueOnClear:w}=t;let o=Number(e);if(g(e)||Number.isNaN(o))return null;if(e===""){if(w===null)return null;o=Ne(w)?{min:a,max:l}[w]:w}return x&&(o=S(Math.round(o/s)*s,c)),V(c)||(o=S(o,c)),(o>l||o<a)&&(o=o>l?l:a,n&&b("update:modelValue",o)),o},F=e=>{var n;const l=u.currentValue,a=$(e);l!==a&&(u.userInput=null,b("update:modelValue",a),b("input",a),b("change",a,l),t.validateEvent&&((n=_==null?void 0:_.validate)==null||n.call(_,"change").catch(s=>j())),u.currentValue=a)},X=e=>u.userInput=e,q=e=>{const n=e!==""?Number(e):"";(d(n)&&!Number.isNaN(n)||e==="")&&F(n),u.userInput=null},J=()=>{var e,n;(n=(e=h.value)==null?void 0:e.focus)==null||n.call(e)},Z=()=>{var e,n;(n=(e=h.value)==null?void 0:e.blur)==null||n.call(e)},ee=e=>{b("focus",e)},ne=e=>{var n;b("blur",e),t.validateEvent&&((n=_==null?void 0:_.validate)==null||n.call(_,"blur").catch(l=>j()))};return ce(()=>t.modelValue,e=>{u.currentValue=$(e,!0),u.userInput=null},{immediate:!0}),be(()=>{var e;const{min:n,max:l,modelValue:a}=t,s=(e=h.value)==null?void 0:e.input;if(s.setAttribute("role","spinbutton"),Number.isFinite(l)?s.setAttribute("aria-valuemax",String(l)):s.removeAttribute("aria-valuemax"),Number.isFinite(n)?s.setAttribute("aria-valuemin",String(n)):s.removeAttribute("aria-valuemin"),s.setAttribute("aria-valuenow",String(u.currentValue)),s.setAttribute("aria-disabled",String(f.value)),!d(a)&&a!=null){let c=Number(a);Number.isNaN(c)&&(c=null),b("update:modelValue",c)}}),me(()=>{var e;const n=(e=h.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${u.currentValue}`)}),E({focus:J,blur:Z}),(e,n)=>(m(),A("div",{class:C([r(p).b(),r(p).m(r(O)),r(p).is("disabled",r(f)),r(p).is("without-controls",!e.controls),r(p).is("controls-right",r(k))]),onDragstart:n[0]||(n[0]=T(()=>{},["prevent"]))},[e.controls?G((m(),A("span",{key:0,role:"button","aria-label":r(B)("el.inputNumber.decrease"),class:C([r(p).e("decrease"),r(p).is("disabled",r(M))]),onKeydown:I(z,["enter"])},[D(r(R),null,{default:L(()=>[r(k)?(m(),y(r(_e),{key:0})):(m(),y(r(he),{key:1}))]),_:1})],42,Se)),[[r(H),z]]):Y("v-if",!0),e.controls?G((m(),A("span",{key:1,role:"button","aria-label":r(B)("el.inputNumber.increase"),class:C([r(p).e("increase"),r(p).is("disabled",r(K))]),onKeydown:I(P,["enter"])},[D(r(R),null,{default:L(()=>[r(k)?(m(),y(r(fe),{key:0})):(m(),y(r(ve),{key:1}))]),_:1})],42,Pe)),[[r(H),P]]):Y("v-if",!0),D(r(we),{id:e.id,ref_key:"input",ref:h,type:"number",step:e.step,"model-value":r(W),placeholder:e.placeholder,disabled:r(f),size:r(O),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[I(T(P,["prevent"]),["up"]),I(T(z,["prevent"]),["down"])],onBlur:ne,onFocus:ee,onInput:X,onChange:q},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown"])],34))}});var Ae=ge(Fe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Me=xe(Ae);export{Me as E};
