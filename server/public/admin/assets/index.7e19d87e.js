import{c as A,d as N,e as T,f as j,g as q}from"./dev_tools.e58d2e5b.js";import{u as I}from"./pages.3811fcb2.js";import R from"./data-table.59079218.js";import{P as L}from"./index.bf392a60.js";import z from"./code-preview.1ddb8c62.js";import{P as C}from"./index.ff7b23c4.js";import{_ as H,d as J,u as K,m as x,r as M,e as u,aP as O,o as h,c as Q,a as e,w as t,f as g,i,ba as W,g as k,G as X,j as Y,h as s,bS as Z}from"./index.140321e9.js";const ee={class:"code-generation"},te={class:"m-l-20"},oe=s("\u67E5\u8BE2"),ae=s("\u91CD\u7F6E"),le=s("\u5BFC\u5165\u6570\u636E\u8868"),ne=s("\u751F\u6210\u4EE3\u7801"),se=s("\u5220\u9664"),ue={class:"m-t-15"},ie=s("\u9884\u89C8"),de=s("\u4EE3\u7801\u751F\u6210"),ce=s("\u7F16\u8F91"),re=s("\u540C\u6B65"),_e=s("\u5220\u9664"),me={class:"flex row-right m-t-20"},pe=J({__name:"index",setup(fe){K();const d=x({table_name:"",table_comment:""}),c=x({show:!1,code:[]}),{pager:m,requestApi:f,resetParams:E,resetPage:V}=I({callback:q,params:d}),r=M([]),B=l=>{r.value=l.map(({id:o})=>o)},D=async l=>{await A({id:l})},F=async l=>{await N({id:l}),f()},P=async l=>{const o=Z.service({text:"\u6B63\u5728\u751F\u6210\u4E2D..."});try{const p=await T({id:l});c.show=!0,c.code=p,o.close()}catch{o.close()}},y=async l=>{const o=await j({id:l});o.file&&window.open(o.file,"_blank")};return f(),(l,o)=>{const p=u("el-input"),v=u("el-form-item"),n=u("el-button"),S=u("el-form"),w=u("el-card"),_=u("el-table-column"),$=u("router-link"),G=u("el-table"),U=O("loading");return h(),Q("div",ee,[e(w,{shadow:"never"},{default:t(()=>[e(S,{class:"ls-form",model:d,"label-width":"80px",inline:""},{default:t(()=>[e(v,{label:"\u8868\u540D\u79F0"},{default:t(()=>[e(p,{modelValue:d.table_name,"onUpdate:modelValue":o[0]||(o[0]=a=>d.table_name=a),class:"ls-input"},null,8,["modelValue"])]),_:1}),e(v,{label:"\u8868\u63CF\u8FF0"},{default:t(()=>[e(p,{modelValue:d.table_comment,"onUpdate:modelValue":o[1]||(o[1]=a=>d.table_comment=a),class:"ls-input"},null,8,["modelValue"])]),_:1}),e(v,null,{default:t(()=>[g("div",te,[e(n,{type:"primary",onClick:i(V)},{default:t(()=>[oe]),_:1},8,["onClick"]),e(n,{onClick:i(E)},{default:t(()=>[ae]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["model"])]),_:1}),W((h(),k(w,{class:"m-t-16",shadow:"never"},{default:t(()=>[e(R,{class:"inline m-r-10",onSuccess:i(f)},{default:t(()=>[e(n,{type:"primary"},{default:t(()=>[le]),_:1})]),_:1},8,["onSuccess"]),e(n,{disabled:!r.value.length,onClick:o[2]||(o[2]=a=>y(r.value))},{default:t(()=>[ne]),_:1},8,["disabled"]),e(C,{class:"m-l-10 inline",disabled:!r.value.length,content:"\u786E\u8BA4\u5220\u9664\u9009\u4E2D\u6570\u636E\u8868\uFF1F",onConfirm:o[3]||(o[3]=a=>F(r.value))},{trigger:t(()=>[e(n,{disabled:!r.value.length},{default:t(()=>[se]),_:1},8,["disabled"])]),_:1},8,["disabled"]),g("div",ue,[e(G,{data:i(m).lists,onSelectionChange:B},{default:t(()=>[e(_,{type:"selection",width:"55"}),e(_,{label:"\u8868\u540D\u79F0",prop:"table_name"}),e(_,{label:"\u8868\u63CF\u8FF0",prop:"table_comment"}),e(_,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"create_time"}),e(_,{label:"\u66F4\u65B0\u65F6\u95F4",prop:"update_time"}),e(_,{label:"\u64CD\u4F5C",width:"240",fixed:"right"},{default:t(({row:a})=>[e(n,{type:"text",onClick:b=>P(a.id)},{default:t(()=>[ie]),_:2},1032,["onClick"]),e(n,{type:"text",onClick:b=>y(a.id)},{default:t(()=>[de]),_:2},1032,["onClick"]),e($,{class:"m-l-10",to:{path:"/dev_tools/code/edit",query:{id:a.id}}},{default:t(()=>[e(n,{type:"text"},{default:t(()=>[ce]),_:1})]),_:2},1032,["to"]),e(C,{class:"inline m-l-10",content:"\u786E\u8BA4\u8981\u540C\u6B65\u8868\u7ED3\u6784\u5417\uFF1F",onConfirm:b=>D(a.id)},{trigger:t(()=>[e(n,{type:"text"},{default:t(()=>[re]),_:1})]),_:2},1032,["onConfirm"]),e(C,{class:"inline m-l-10",onConfirm:b=>F(a.id)},{trigger:t(()=>[e(n,{type:"text"},{default:t(()=>[_e]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),g("div",me,[e(L,{modelValue:i(m),"onUpdate:modelValue":o[4]||(o[4]=a=>X(m)?m.value=a:null),layout:"total, prev, pager, next, jumper",onChange:i(f)},null,8,["modelValue","onChange"])])]),_:1})),[[U,i(m).loading]]),c.show?(h(),k(z,{key:0,modelValue:c.show,"onUpdate:modelValue":o[5]||(o[5]=a=>c.show=a),code:c.code},null,8,["modelValue","code"])):Y("",!0)])}}});var we=H(pe,[["__scopeId","data-v-36633026"]]);export{we as default};
