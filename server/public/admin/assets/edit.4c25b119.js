import{ac as oe,dR as q,dS as R,b5 as y,G as te,d as I,P as ue,r as S,e as D,n as p,am as le,j as d,Q as C,w as u,k as w,t as M,V as X,Y as V,W,q as B,bX as se,b2 as ae,$ as ne,dT as re,a3 as ie,s as L,f as K,bA as pe,K as de,N as G,o as ce,m as l,h as Q,l as a,X as O,az as z,aT as j,dU as me,dV as fe,x as Fe,i as ve,b1 as Y,dW as h}from"./index.7262943b.js";import{E as _e,a as Ee}from"./el-form-item.adebf638.js";import{E as be}from"./el-input-number.06539340.js";import{E as he,a as Ce}from"./el-radio.616d5b13.js";/* empty css               */import"./el-select.6e6c92e8.js";import"./el-tree.6919aafa.js";import"./el-checkbox.196ebd48.js";import{E as Ve}from"./el-tree-select.53437285.js";import{m as Be,a as ye,b as we}from"./menu.ae873742.js";import{P as ge}from"./index.1b8c47a3.js";import"./isEqual.7bc4708d.js";import"./index.b7555bb8.js";import"./index.7d022602.js";import"./index.76da2cec.js";import"./index.5186c1e4.js";const De=oe({trigger:q.trigger,placement:R.placement,disabled:q.disabled,visible:y.visible,transition:y.transition,popperOptions:R.popperOptions,tabindex:R.tabindex,content:y.content,popperStyle:y.popperStyle,popperClass:y.popperClass,enterable:{...y.enterable,default:!0},effect:{...y.effect,default:"light"},teleported:y.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0}}),Ae={"update:visible":c=>te(c),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},ke={name:"ElPopover"},Ue=I({...ke,props:De,emits:Ae,setup(c,{expose:m,emit:f}){const v=c,E=ue("popover"),s=S(),A=D(()=>{var e;return(e=p(s))==null?void 0:e.popperRef}),t=D(()=>[{width:le(v.width)},v.popperStyle]),k=D(()=>[E.b(),v.popperClass,{[E.m("plain")]:!!v.content}]),g=D(()=>v.transition==="el-fade-in-linear"),U=()=>{var e;(e=s.value)==null||e.hide()},T=()=>{f("before-enter")},F=()=>{f("before-leave")},i=()=>{f("after-enter")},_=()=>{f("update:visible",!1),f("after-leave")};return m({popperRef:A,hide:U}),(e,o)=>(d(),C(p(ae),se({ref_key:"tooltipRef",ref:s},e.$attrs,{trigger:e.trigger,placement:e.placement,disabled:e.disabled,visible:e.visible,transition:e.transition,"popper-options":e.popperOptions,tabindex:e.tabindex,content:e.content,offset:e.offset,"show-after":e.showAfter,"hide-after":e.hideAfter,"auto-close":e.autoClose,"show-arrow":e.showArrow,"aria-label":e.title,effect:e.effect,enterable:e.enterable,"popper-class":p(k),"popper-style":p(t),teleported:e.teleported,persistent:e.persistent,"gpu-acceleration":p(g),onBeforeShow:T,onBeforeHide:F,onShow:i,onHide:_}),{content:u(()=>[e.title?(d(),w("div",{key:0,class:X(p(E).e("title")),role:"title"},M(e.title),3)):V("v-if",!0),W(e.$slots,"default",{},()=>[B(M(e.content),1)])]),default:u(()=>[e.$slots.reference?W(e.$slots,"reference",{key:0}):V("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration"]))}});var Te=ne(Ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const H=(c,m)=>{const f=m.arg||m.value,v=f==null?void 0:f.popperRef;v&&(v.triggerRef=c)};var Ne={mounted(c,m){H(c,m)},updated(c,m){H(c,m)}};const $e="popover",Se=re(Ne,$e),Pe=ie(Te,{directive:Se});const Re={class:"icon-select"},Oe={class:"flex justify-between"},Me=a("div",{class:"mb-3"},"\u8BF7\u9009\u62E9\u56FE\u6807",-1),Le=["onClick"],Ie={class:"h-72"},qe={class:"flex flex-wrap"},We={class:"flex w-4"},Ge=B("\u65E0"),ze=I({__name:"picker",props:{modelValue:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(c,{emit:m}){const f=S(0),v=[{name:"element\u56FE\u6807",icons:me()},{name:"\u672C\u5730\u56FE\u6807",icons:fe()}],E=L(),s=K({inputValue:"",popoverVisible:!1,popoverWidth:0,mouseoverSelect:!1,inputFocus:!1}),A=()=>{s.inputFocus=s.popoverVisible=!0},t=()=>{s.inputFocus=!1,s.popoverVisible=s.mouseoverSelect},k=F=>{s.mouseoverSelect=s.popoverVisible=!1,m("update:modelValue",F),m("change",F)},g=()=>{m("update:modelValue",""),m("change","")},U=D(()=>{var _,e;const F=(e=(_=v[f.value])==null?void 0:_.icons)!=null?e:[];if(!s.inputValue)return F;const i=s.inputValue.toLowerCase();return F.filter(o=>{if(o.toLowerCase().indexOf(i)!==-1)return o})}),T=()=>{G(()=>{var i;const F=(i=E.value)==null?void 0:i.$el.offsetWidth;s.popoverWidth=F<300?300:F})};return pe(document.body,"click",()=>{s.popoverVisible=!!(s.inputFocus||s.mouseoverSelect)}),de(()=>s.popoverVisible,async F=>{var i,_;await G(),F?(i=E.value)==null||i.focus():(_=E.value)==null||_.blur()}),ce(()=>{T()}),(F,i)=>{const _=Fe,e=ve,o=Y,P=Pe;return d(),w("div",Re,[l(P,{visible:s.popoverVisible,"onUpdate:visible":i[3]||(i[3]=n=>s.popoverVisible=n),width:s.popoverWidth},{reference:u(()=>[l(p(Q),{ref_key:"inputRef",ref:E,modelValue:s.inputValue,"onUpdate:modelValue":i[2]||(i[2]=n=>s.inputValue=n),modelModifiers:{trim:!0},placeholder:"\u641C\u7D22\u56FE\u6807",disabled:c.disabled,onFocus:A,onBlur:t},{prepend:u(()=>[a("div",We,[c.modelValue?(d(),C(_,{key:c.modelValue,name:c.modelValue},null,8,["name"])):(d(),w(O,{key:1},[Ge],64))])]),append:u(()=>[l(e,null,{default:u(()=>[l(_,{name:"el-icon-Close",size:18,onClick:g})]),_:1})]),_:1},8,["modelValue","disabled"])]),default:u(()=>[a("div",{onMouseover:i[0]||(i[0]=j(n=>s.mouseoverSelect=!0,["stop"])),onMouseout:i[1]||(i[1]=j(n=>s.mouseoverSelect=!1,["stop"]))},[a("div",null,[a("div",Oe,[Me,a("div",null,[(d(),w(O,null,z(v,(n,b)=>a("span",{key:b,class:X(["cursor-pointer text-sm ml-2",{"text-primary":b==f.value}]),onClick:$=>f.value=b},M(n.name),11,Le)),64))])]),a("div",Ie,[l(o,null,{default:u(()=>[a("div",qe,[(d(!0),w(O,null,z(p(U),n=>(d(),w("div",{key:n,class:"m-1"},[l(e,{onClick:b=>k(n)},{default:u(()=>[l(_,{name:n,size:18},null,8,["name"])]),_:2},1032,["onClick"])]))),128))])]),_:1})])])],32)]),_:1},8,["visible","width"])])}}}),je={class:"edit-popup"},He={class:"h-[400px]"},Xe=B("\u76EE\u5F55"),Ke=B("\u83DC\u5355"),Qe=B("\u6309\u94AE"),Ye={class:"w-80"},Je={class:"w-80"},Ze={class:"w-80"},xe=a("div",{class:"form-tips"}," \u8BBF\u95EE\u7684\u8DEF\u7531\u5730\u5740\uFF0C\u5982\uFF1A`user`\uFF0C\u5982\u5916\u7F51\u5730\u5740\u9700\u5185\u94FE\u8BBF\u95EE\u5219\u4EE5`http(s)://`\u5F00\u5934 ",-1),eo={class:"w-80"},oo=a("div",{class:"form-tips"}," \u8BBF\u95EE\u7684\u7EC4\u4EF6\u8DEF\u5F84\uFF0C\u5982\uFF1A`user/setting`\uFF0C\u9ED8\u8BA4\u5728`views`\u76EE\u5F55\u4E0B ",-1),to={class:"w-80"},uo=a("div",{class:"form-tips"}," \u5C06\u4F5C\u4E3Aserver\u7AEFAPI\u9A8C\u6743\u4F7F\u7528\uFF0C\u5982`auth.admin/user`\uFF0C\u8BF7\u8C28\u614E\u4FEE\u6539 ",-1),lo={class:"w-80"},so=a("div",{class:"form-tips"},' \u8BBF\u95EE\u8DEF\u7531\u7684\u9ED8\u8BA4\u4F20\u9012\u53C2\u6570\uFF0C\u5982\uFF1A`{"id": 1, "name": "admin"}`\u6216`id=1&name=admin` ',-1),ao=B("\u663E\u793A"),no=B("\u9690\u85CF"),ro=a("div",{class:"form-tips"}," \u9009\u62E9\u9690\u85CF\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4F46\u4ECD\u7136\u53EF\u4EE5\u8BBF\u95EE ",-1),io=B("\u6B63\u5E38"),po=B("\u505C\u7528"),co=a("div",{class:"form-tips"}," \u9009\u62E9\u505C\u7528\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4E5F\u4E0D\u80FD\u88AB\u8BBF\u95EE ",-1),ko=I({__name:"edit",emits:["success","close"],setup(c,{expose:m,emit:f}){const v=L(),E=L(),s=S("add"),A=D(()=>s.value=="edit"?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355"),t=K({id:"",pid:0,type:h.CATALOGUE,icon:"",name:"",sort:1,paths:"",perms:"",component:"",selected:"",params:"",is_cache:0,is_show:1,is_disable:0}),k={pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355",trigger:["blur","change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",trigger:"blur"}],paths:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740",trigger:"blur"}],component:[{required:!0,message:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u5730\u5740",trigger:"blur"}]},g=S([]),U=async()=>{const e=await Be({page_type:0}),o={id:0,name:"\u9876\u7EA7",children:[]};o.children=e.lists,g.value.push(o)},T=async()=>{var e,o;await((e=v.value)==null?void 0:e.validate()),s.value=="edit"?await ye(t):await we(t),(o=E.value)==null||o.close(),f("success")},F=(e="add")=>{var o;s.value=e,(o=E.value)==null||o.open()},i=e=>{for(const o in t)e[o]!=null&&e[o]!=null&&(t[o]=e[o])},_=()=>{f("close")};return U(),m({open:F,setFormData:i}),(e,o)=>{const P=Ve,n=_e,b=he,$=Ce,N=Q,J=ze,Z=be,x=Ee,ee=Y;return d(),w("div",je,[l(ge,{ref_key:"popupRef",ref:E,title:p(A),async:!0,width:"700px",clickModalClose:!0,onConfirm:T,onClose:_},{default:u(()=>[a("div",He,[l(ee,null,{default:u(()=>[l(x,{ref_key:"formRef",ref:v,model:t,"label-width":"120px",rules:k},{default:u(()=>[l(n,{label:"\u7236\u7EA7\u83DC\u5355",prop:"pid"},{default:u(()=>[l(P,{class:"w-80",modelValue:t.pid,"onUpdate:modelValue":o[0]||(o[0]=r=>t.pid=r),data:g.value,clearable:"","node-key":"id",props:{label:"name"},"default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355","check-strictly":""},null,8,["modelValue","data"])]),_:1}),l(n,{label:"\u83DC\u5355\u7C7B\u578B",prop:"type",required:""},{default:u(()=>[l($,{modelValue:t.type,"onUpdate:modelValue":o[1]||(o[1]=r=>t.type=r)},{default:u(()=>[l(b,{label:p(h).CATALOGUE},{default:u(()=>[Xe]),_:1},8,["label"]),l(b,{label:p(h).MENU},{default:u(()=>[Ke]),_:1},8,["label"]),l(b,{label:p(h).BUTTON},{default:u(()=>[Qe]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"\u83DC\u5355\u540D\u79F0",prop:"name"},{default:u(()=>[a("div",Ye,[l(N,{modelValue:t.name,"onUpdate:modelValue":o[2]||(o[2]=r=>t.name=r),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])])]),_:1}),t.type!=p(h).BUTTON?(d(),C(n,{key:0,label:"\u83DC\u5355\u56FE\u6807",prop:"icon"},{default:u(()=>[a("div",Je,[l(J,{modelValue:t.icon,"onUpdate:modelValue":o[3]||(o[3]=r=>t.icon=r)},null,8,["modelValue"])])]),_:1})):V("",!0),l(n,{label:"\u83DC\u5355\u6392\u5E8F",prop:"sort"},{default:u(()=>[l(Z,{modelValue:t.sort,"onUpdate:modelValue":o[4]||(o[4]=r=>t.sort=r)},null,8,["modelValue"])]),_:1}),t.type!=p(h).BUTTON?(d(),C(n,{key:1,label:"\u8DEF\u7531\u8DEF\u5F84",prop:"paths"},{default:u(()=>[a("div",null,[a("div",Ze,[l(N,{modelValue:t.paths,"onUpdate:modelValue":o[5]||(o[5]=r=>t.paths=r),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u8DEF\u5F84"},null,8,["modelValue"])]),xe])]),_:1})):V("",!0),t.type==p(h).MENU?(d(),C(n,{key:2,label:"\u7EC4\u4EF6\u8DEF\u5F84",prop:"component"},{default:u(()=>[a("div",null,[a("div",eo,[l(N,{modelValue:t.component,"onUpdate:modelValue":o[6]||(o[6]=r=>t.component=r),placeholder:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u8DEF\u5F84"},null,8,["modelValue"])]),oo])]),_:1})):V("",!0),t.type!=p(h).CATALOGUE?(d(),C(n,{key:3,label:"\u6743\u9650\u5B57\u7B26",prop:"perms"},{default:u(()=>[a("div",null,[a("div",to,[l(N,{modelValue:t.perms,"onUpdate:modelValue":o[7]||(o[7]=r=>t.perms=r),placeholder:"\u8BF7\u8F93\u5165\u6743\u9650\u5B57\u7B26"},null,8,["modelValue"])]),uo])]),_:1})):V("",!0),t.type==p(h).MENU?(d(),C(n,{key:4,label:"\u8DEF\u7531\u53C2\u6570",prop:"params"},{default:u(()=>[a("div",null,[a("div",lo,[l(N,{modelValue:t.params,"onUpdate:modelValue":o[8]||(o[8]=r=>t.params=r),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u53C2\u6570"},null,8,["modelValue"])]),so])]),_:1})):V("",!0),t.type!=p(h).BUTTON?(d(),C(n,{key:5,label:"\u662F\u5426\u663E\u793A",prop:"is_show",required:""},{default:u(()=>[a("div",null,[l($,{modelValue:t.is_show,"onUpdate:modelValue":o[9]||(o[9]=r=>t.is_show=r)},{default:u(()=>[l(b,{label:1},{default:u(()=>[ao]),_:1}),l(b,{label:0},{default:u(()=>[no]),_:1})]),_:1},8,["modelValue"]),ro])]),_:1})):V("",!0),t.type!=p(h).BUTTON?(d(),C(n,{key:6,label:"\u83DC\u5355\u72B6\u6001",prop:"is_disable",required:""},{default:u(()=>[a("div",null,[l($,{modelValue:t.is_disable,"onUpdate:modelValue":o[10]||(o[10]=r=>t.is_disable=r)},{default:u(()=>[l(b,{label:0},{default:u(()=>[io]),_:1}),l(b,{label:1},{default:u(()=>[po]),_:1})]),_:1},8,["modelValue"]),co])]),_:1})):V("",!0)]),_:1},8,["model"])]),_:1})])]),_:1},8,["title"])])}}});export{ko as default};
