import{a8 as K,a9 as A,am as ae,d as U,y as H,ac as Y,P as j,r as N,L as I,K as Q,b7 as L,af as le,o as re,c as se,T as ie,h as E,q as pe,X as oe,N as G,aA as J,dV as me,dW as ue,k as D,m as ne,ae as ge,a as _,p as M,d3 as xe,d4 as we,cs as ye,dd as V,D as ke,F as Te,l as be,Y as Ne,dL as Pe,U as de,dI as Z,O as ze,dX as ee,b as Ce,Q as Se,aw as Ee,i as Ie,$ as $e,a0 as Re}from"./index.7dd96511.js";import{U as ce}from"./event.776e7e11.js";const q=Symbol("tabsRootContextKey"),Be=K({tabs:{type:A(Array),default:()=>ae([])}}),Oe={name:"ElTabBar"},Le=U({...Oe,props:Be,setup(e,{expose:n}){const S=e,y="ElTabBar",r=G(),x=H(q);x||Y(y,"<el-tabs><el-tab-bar /></el-tabs>");const h=j("tabs"),b=N(),p=N(),d=()=>{let s=0,P=0;const m=["top","bottom"].includes(x.props.tabPosition)?"width":"height",i=m==="width"?"x":"y";return S.tabs.every(t=>{var u,v,z,$;const R=(v=(u=r.parent)==null?void 0:u.refs)==null?void 0:v[`tab-${t.paneName}`];if(!R)return!1;if(!t.active)return!0;P=R[`client${L(m)}`];const F=i==="x"?"left":"top";s=R.getBoundingClientRect()[F]-(($=(z=R.parentElement)==null?void 0:z.getBoundingClientRect()[F])!=null?$:0);const B=window.getComputedStyle(R);return m==="width"&&(S.tabs.length>1&&(P-=Number.parseFloat(B.paddingLeft)+Number.parseFloat(B.paddingRight)),s+=Number.parseFloat(B.paddingLeft)),!1}),{[m]:`${P}px`,transform:`translate${L(i)}(${s}px)`}},f=()=>p.value=d();return I(()=>S.tabs,async()=>{await Q(),f()},{immediate:!0}),le(b,()=>f()),n({ref:b,update:f}),(s,P)=>(re(),se("div",{ref_key:"barRef",ref:b,class:ie([E(h).e("active-bar"),E(h).is(E(x).props.tabPosition)]),style:pe(p.value)},null,6))}});var Fe=oe(Le,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const Ae=K({panes:{type:A(Array),default:()=>ae([])},currentName:{type:[String,Number],default:""},editable:Boolean,onTabClick:{type:A(Function),default:J},onTabRemove:{type:A(Function),default:J},type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),te="ElTabNav",Me=U({name:te,props:Ae,setup(e,{expose:n}){const S=G(),y=H(q);y||Y(te,"<el-tabs><tab-nav /></el-tabs>");const r=j("tabs"),x=me(),h=ue(),b=N(),p=N(),d=N(),f=N(!1),s=N(0),P=N(!1),m=N(!0),i=D(()=>["top","bottom"].includes(y.props.tabPosition)?"width":"height"),t=D(()=>({transform:`translate${i.value==="width"?"X":"Y"}(-${s.value}px)`})),u=()=>{if(!b.value)return;const a=b.value[`offset${L(i.value)}`],o=s.value;if(!o)return;const l=o>a?o-a:0;s.value=l},v=()=>{if(!b.value||!p.value)return;const a=p.value[`offset${L(i.value)}`],o=b.value[`offset${L(i.value)}`],l=s.value;if(a-l<=o)return;const k=a-l>o*2?l+o:a-o;s.value=k},z=async()=>{const a=p.value;if(!f.value||!d.value||!b.value||!a)return;await Q();const o=d.value.querySelector(".is-active");if(!o)return;const l=b.value,k=["top","bottom"].includes(y.props.tabPosition),w=o.getBoundingClientRect(),g=l.getBoundingClientRect(),C=k?a.offsetWidth-g.width:a.offsetHeight-g.height,T=s.value;let c=T;k?(w.left<g.left&&(c=T-(g.left-w.left)),w.right>g.right&&(c=T+w.right-g.right)):(w.top<g.top&&(c=T-(g.top-w.top)),w.bottom>g.bottom&&(c=T+(w.bottom-g.bottom))),c=Math.max(c,0),s.value=Math.min(c,C)},$=()=>{if(!p.value||!b.value)return;const a=p.value[`offset${L(i.value)}`],o=b.value[`offset${L(i.value)}`],l=s.value;if(o<a){const k=s.value;f.value=f.value||{},f.value.prev=k,f.value.next=k+o<a,a-k<o&&(s.value=a-o)}else f.value=!1,l>0&&(s.value=0)},R=a=>{const o=a.code,{up:l,down:k,left:w,right:g}=V;if(![l,k,w,g].includes(o))return;const C=Array.from(a.currentTarget.querySelectorAll("[role=tab]")),T=C.indexOf(a.target);let c;o===w||o===l?T===0?c=C.length-1:c=T-1:T<C.length-1?c=T+1:c=0,C[c].focus(),C[c].click(),F()},F=()=>{m.value&&(P.value=!0)},B=()=>P.value=!1;return I(x,a=>{a==="hidden"?m.value=!1:a==="visible"&&setTimeout(()=>m.value=!0,50)}),I(h,a=>{a?setTimeout(()=>m.value=!0,50):m.value=!1}),le(d,$),ne(()=>setTimeout(()=>z(),0)),ge(()=>$()),n({scrollToActiveTab:z,removeFocus:B}),I(()=>e.panes,()=>S.update(),{flush:"post"}),()=>{const a=f.value?[_("span",{class:[r.e("nav-prev"),r.is("disabled",!f.value.prev)],onClick:u},[_(M,null,{default:()=>[_(xe,null,null)]})]),_("span",{class:[r.e("nav-next"),r.is("disabled",!f.value.next)],onClick:v},[_(M,null,{default:()=>[_(we,null,null)]})])]:null,o=e.panes.map((l,k)=>{var w,g,C,T;const c=(g=(w=l.props.name)!=null?w:l.index)!=null?g:`${k}`,W=l.isClosable||e.editable;l.index=`${k}`;const fe=W?_(M,{class:"is-icon-close",onClick:O=>e.onTabRemove(l,O)},{default:()=>[_(ye,null,null)]}):null,ve=((T=(C=l.slots).label)==null?void 0:T.call(C))||l.props.label,he=l.active?0:-1;return _("div",{ref:`tab-${c}`,class:[r.e("item"),r.is(y.props.tabPosition),r.is("active",l.active),r.is("disabled",l.props.disabled),r.is("closable",W),r.is("focus",P.value)],id:`tab-${c}`,key:`tab-${c}`,"aria-controls":`pane-${c}`,role:"tab","aria-selected":l.active,tabindex:he,onFocus:()=>F(),onBlur:()=>B(),onClick:O=>{B(),e.onTabClick(l,c,O)},onKeydown:O=>{W&&(O.code===V.delete||O.code===V.backspace)&&e.onTabRemove(l,O)}},[ve,fe])});return _("div",{ref:d,class:[r.e("nav-wrap"),r.is("scrollable",!!f.value),r.is(y.props.tabPosition)]},[a,_("div",{class:r.e("nav-scroll"),ref:b},[_("div",{class:[r.e("nav"),r.is(y.props.tabPosition),r.is("stretch",e.stretch&&["top","bottom"].includes(y.props.tabPosition))],ref:p,style:t.value,role:"tablist",onKeydown:R},[e.type?null:_(Fe,{tabs:[...e.panes]},null),o])])])}}}),Ve=K({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:A(Function),default:()=>!0},stretch:Boolean}),X=e=>ke(e)||Te(e),De={[ce]:e=>X(e),"tab-click":(e,n)=>n instanceof Event,"tab-change":e=>X(e),edit:(e,n)=>["remove","add"].includes(n),"tab-remove":e=>X(e),"tab-add":()=>!0};var Ke=U({name:"ElTabs",props:Ve,emits:De,setup(e,{emit:n,slots:S,expose:y}){var r,x;const h=j("tabs"),b=N(),p=be({}),d=N((x=(r=e.modelValue)!=null?r:e.activeName)!=null?x:"0"),f=t=>{d.value=t,n(ce,t),n("tab-change",t)},s=async t=>{var u,v,z;if(!(d.value===t||Z(t)))try{await((u=e.beforeLeave)==null?void 0:u.call(e,t,d.value))!==!1&&(f(t),(z=(v=b.value)==null?void 0:v.removeFocus)==null||z.call(v))}catch{}},P=(t,u,v)=>{t.props.disabled||(s(u),n("tab-click",t,v))},m=(t,u)=>{t.props.disabled||Z(t.props.name)||(u.stopPropagation(),n("edit",t.props.name,"remove"),n("tab-remove",t.props.name))},i=()=>{n("edit",void 0,"add"),n("tab-add")};return I(()=>e.activeName,t=>s(t)),I(()=>e.modelValue,t=>s(t)),I(d,async()=>{var t;await Q(),(t=b.value)==null||t.scrollToActiveTab()}),Ne(q,{props:e,currentName:d,registerPane:v=>p[v.uid]=v,unregisterPane:v=>delete p[v]}),y({currentName:d}),()=>{const t=e.editable||e.addable?_("span",{class:h.e("new-tab"),tabindex:"0",onClick:i,onKeydown:z=>{z.code===V.enter&&i()}},[_(M,{class:h.is("icon-plus")},{default:()=>[_(Pe,null,null)]})]):null,u=_("div",{class:[h.e("header"),h.is(e.tabPosition)]},[t,_(Me,{ref:b,currentName:d.value,editable:e.editable,type:e.type,panes:Object.values(p),stretch:e.stretch,onTabClick:P,onTabRemove:m},null)]),v=_("div",{class:h.e("content")},[de(S,"default")]);return _("div",{class:[h.b(),h.m(e.tabPosition),{[h.m("card")]:e.type==="card",[h.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[u,v]:[v,u]])}}});const Ue=K({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),je=["id","aria-hidden","aria-labelledby"],qe={name:"ElTabPane"},We=U({...qe,props:Ue,setup(e){const n=e,S="ElTabPane",y=G(),r=ze(),x=H(q);x||Y(S,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const h=j("tab-pane"),b=N(),p=D(()=>n.closable||x.props.closable),d=ee(()=>{var i;return x.currentName.value===((i=n.name)!=null?i:b.value)}),f=N(d.value),s=D(()=>{var i;return(i=n.name)!=null?i:b.value}),P=ee(()=>!n.lazy||f.value||d.value);I(d,i=>{i&&(f.value=!0)});const m=be({uid:y.uid,slots:r,props:n,paneName:s,active:d,index:b,isClosable:p});return ne(()=>{x.registerPane(m)}),Ce(()=>{x.unregisterPane(m.uid)}),(i,t)=>E(P)?Se((re(),se("div",{key:0,id:`pane-${E(s)}`,class:ie(E(h).b()),role:"tabpanel","aria-hidden":!E(d),"aria-labelledby":`tab-${E(s)}`},[de(i.$slots,"default")],10,je)),[[Ee,E(d)]]):Ie("v-if",!0)}});var _e=oe(We,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const Ye=$e(Ke,{TabPane:_e}),Qe=Re(_e);export{Qe as E,Ye as a};
