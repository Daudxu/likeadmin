var He=Object.defineProperty;var Ue=(e,n,o)=>n in e?He(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o;var te=(e,n,o)=>(Ue(e,typeof n!="symbol"?n+"":n,o),o);import{K as Y,T as Ke,bF as me,bj as he,N as F,bk as Ee,aJ as J,d as Be,i as je,bG as We,h as qe,bH as Ze,aF as we,bI as ke,b4 as Ge,aU as Xe,P as Te,r as M,bt as Me,f as Je,e as h,bJ as x,ak as pe,I as Qe,o as Se,ah as Ye,bK as xe,a2 as _e,$ as Ie,bL as en,b8 as k,j as p,Q as b,w as y,R as O,aP as H,m as T,l as g,V as r,a0 as _,aT as N,k as U,Z as V,Y as E,t as S,p as q,W as $e,q as oe,ao as Ae,aW as Le,D as De,bM as $,bN as ee,bc as ge,aZ as nn,aM as tn,bd as on,ac as sn,ad as Z,bA as an,bO as ln,X as rn,bP as ve,bQ as un,bR as G}from"./index.7262943b.js";import{v as ye,L as be}from"./el-loading.1d2859d4.js";import{u as cn}from"./index.5186c1e4.js";const dn=(e,n)=>{let o;Y(()=>e.value,s=>{var l,a;s?(o=document.activeElement,Ke(n)&&((a=(l=n.value).focus)==null||a.call(l))):o.focus()})},se="_trap-focus-children",I=[],Ce=e=>{if(I.length===0)return;const n=I[I.length-1][se];if(n.length>0&&e.code===J.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const o=e.shiftKey,s=e.target===n[0],l=e.target===n[n.length-1];s&&o&&(e.preventDefault(),n[n.length-1].focus()),l&&!o&&(e.preventDefault(),n[0].focus())}},fn={beforeMount(e){e[se]=me(e),I.push(e),I.length<=1&&he(document,"keydown",Ce)},updated(e){F(()=>{e[se]=me(e)})},unmounted(){I.shift(),I.length===0&&Ee(document,"keydown",Ce)}},mn={install(e){e.directive("loading",ye),e.config.globalProperties.$loading=be},directive:ye,service:be},pn=Be({name:"ElMessageBox",directives:{TrapFocus:fn},components:{ElButton:je,ElFocusTrap:We,ElInput:qe,ElOverlay:Ze,ElIcon:we,...ke},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Ge},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{t:o}=Xe(),s=Te("message-box"),l=M(!1),{nextZIndex:a}=Me(),t=Je({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:a()}),d=h(()=>{const c=t.type;return{[s.bm("icon",c)]:c&&x[c]}}),u=pe(),f=pe(),m=Qe(h(()=>e.buttonSize),{prop:!0,form:!0,formItem:!0}),C=h(()=>t.icon||x[t.type]||""),i=h(()=>!!t.message),v=M(),ie=M(),P=M(),j=M(),re=M(),Pe=h(()=>t.confirmButtonClass);Y(()=>t.inputValue,async c=>{await F(),e.boxType==="prompt"&&c!==null&&ce()},{immediate:!0}),Y(()=>l.value,c=>{var B,A;c&&(e.boxType!=="prompt"&&(t.autofocus?P.value=(A=(B=re.value)==null?void 0:B.$el)!=null?A:v.value:P.value=v.value),t.zIndex=a()),e.boxType==="prompt"&&(c?F().then(()=>{var fe;j.value&&j.value.$el&&(t.autofocus?P.value=(fe=Ve())!=null?fe:v.value:P.value=v.value)}):(t.editorErrorMessage="",t.validateError=!1))});const ze=h(()=>e.draggable);cn(v,ie,ze),Se(async()=>{await F(),e.closeOnHashChange&&he(window,"hashchange",z)}),Ye(()=>{e.closeOnHashChange&&Ee(window,"hashchange",z)});function z(){!l.value||(l.value=!1,F(()=>{t.action&&n("action",t.action)}))}const ue=()=>{e.closeOnClickModal&&W(t.distinguishCancelAndClose?"close":"cancel")},Fe=en(ue),Ne=c=>{if(t.inputType!=="textarea")return c.preventDefault(),W("confirm")},W=c=>{var B;e.boxType==="prompt"&&c==="confirm"&&!ce()||(t.action=c,t.beforeClose?(B=t.beforeClose)==null||B.call(t,c,t,z):z())},ce=()=>{if(e.boxType==="prompt"){const c=t.inputPattern;if(c&&!c.test(t.inputValue||""))return t.editorErrorMessage=t.inputErrorMessage||o("el.messagebox.error"),t.validateError=!0,!1;const B=t.inputValidator;if(typeof B=="function"){const A=B(t.inputValue);if(A===!1)return t.editorErrorMessage=t.inputErrorMessage||o("el.messagebox.error"),t.validateError=!0,!1;if(typeof A=="string")return t.editorErrorMessage=A,t.validateError=!0,!1}}return t.editorErrorMessage="",t.validateError=!1,!0},Ve=()=>{const c=j.value.$refs;return c.input||c.textarea},de=()=>{W("close")},Oe=()=>{e.closeOnPressEscape&&de()};return e.lockScroll&&xe(l),dn(l),{..._e(t),ns:s,overlayEvent:Fe,visible:l,hasMessage:i,typeClass:d,contentId:u,inputId:f,btnSize:m,iconComponent:C,confirmButtonClasses:Pe,rootRef:v,focusStartRef:P,headerRef:ie,inputRef:j,confirmRef:re,doClose:z,handleClose:de,onCloseRequested:Oe,handleWrapperClick:ue,handleInputEnter:Ne,handleAction:W,t:o}}}),gn=["aria-label","aria-describedby"],vn=["aria-label"],yn=["id"];function bn(e,n,o,s,l,a){const t=k("el-icon"),d=k("close"),u=k("el-input"),f=k("el-button"),m=k("el-focus-trap"),C=k("el-overlay");return p(),b(Ae,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=i=>e.$emit("vanish")),persisted:""},{default:y(()=>[O(T(C,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:y(()=>[g("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:r(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...i)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...i)),onMousedown:n[9]||(n[9]=(...i)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...i)),onMouseup:n[10]||(n[10]=(...i)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...i))},[T(m,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:y(()=>[g("div",{ref:"rootRef",class:r([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:_(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=N(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(p(),U("div",{key:0,ref:"headerRef",class:r(e.ns.e("header"))},[g("div",{class:r(e.ns.e("title"))},[e.iconComponent&&e.center?(p(),b(t,{key:0,class:r([e.ns.e("status"),e.typeClass])},{default:y(()=>[(p(),b(V(e.iconComponent)))]),_:1},8,["class"])):E("v-if",!0),g("span",null,S(e.title),1)],2),e.showClose?(p(),U("button",{key:0,type:"button",class:r(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=i=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=q(N(i=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[T(t,{class:r(e.ns.e("close"))},{default:y(()=>[T(d)]),_:1},8,["class"])],42,vn)):E("v-if",!0)],2)):E("v-if",!0),g("div",{id:e.contentId,class:r(e.ns.e("content"))},[g("div",{class:r(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(p(),b(t,{key:0,class:r([e.ns.e("status"),e.typeClass])},{default:y(()=>[(p(),b(V(e.iconComponent)))]),_:1},8,["class"])):E("v-if",!0),e.hasMessage?(p(),U("div",{key:1,class:r(e.ns.e("message"))},[$e(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(p(),b(V(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(p(),b(V(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:y(()=>[oe(S(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):E("v-if",!0)],2),O(g("div",{class:r(e.ns.e("input"))},[T(u,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=i=>e.inputValue=i),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:r({invalid:e.validateError}),onKeydown:q(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),g("div",{class:r(e.ns.e("errormsg")),style:_({visibility:e.editorErrorMessage?"visible":"hidden"})},S(e.editorErrorMessage),7)],2),[[H,e.showInput]])],10,yn),g("div",{class:r(e.ns.e("btns"))},[e.showCancelButton?(p(),b(f,{key:0,loading:e.cancelButtonLoading,class:r([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=i=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=q(N(i=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:y(()=>[oe(S(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):E("v-if",!0),O(T(f,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:r([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=i=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=q(N(i=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:y(()=>[oe(S(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[H,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,gn)]),_:3},8,["z-index","overlay-class","mask"]),[[H,e.visible]])]),_:3})}var Cn=Ie(pn,[["render",bn],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const K=new Map,hn=(e,n,o=null)=>{const s=on(Cn,e);return s.appContext=o,ee(s,n),document.body.appendChild(n.firstElementChild),s.component},En=()=>document.createElement("div"),Bn=(e,n)=>{const o=En();e.onVanish=()=>{ee(null,o),K.delete(l)},e.onAction=a=>{const t=K.get(l);let d;e.showInput?d={value:l.inputValue,action:a}:d=a,e.callback?e.callback(d,s.proxy):a==="cancel"||a==="close"?e.distinguishCancelAndClose&&a!=="cancel"?t.reject("close"):t.reject("cancel"):t.resolve(d)};const s=hn(e,o,n),l=s.proxy;for(const a in e)ge(e,a)&&!ge(l.$props,a)&&(l[a]=e[a]);return Y(()=>l.message,(a,t)=>{$(a)?s.slots.default=()=>[a]:$(t)&&!$(a)&&delete s.slots.default},{immediate:!0}),l.visible=!0,l};function R(e,n=null){if(!Le)return Promise.reject();let o;return De(e)||$(e)?e={message:e}:o=e.callback,new Promise((s,l)=>{const a=Bn(e,n!=null?n:R._context);K.set(a,{options:e,callback:o,resolve:s,reject:l})})}const wn=["alert","confirm","prompt"],kn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};wn.forEach(e=>{R[e]=Tn(e)});function Tn(e){return(n,o,s,l)=>{let a;return nn(o)?(s=o,a=""):tn(o)?a="":a=o,R(Object.assign({title:a,message:n,type:"",...kn[e]},s,{boxType:e}),l)}}R.close=()=>{K.forEach((e,n)=>{n.doClose()}),K.clear()};R._context=null;const w=R;w.install=e=>{w._context=e._context,e.config.globalProperties.$msgbox=w,e.config.globalProperties.$messageBox=w,e.config.globalProperties.$alert=w.alert,e.config.globalProperties.$confirm=w.confirm,e.config.globalProperties.$prompt=w.prompt};const L=w,Re=["success","info","warning","error"],Mn=sn({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:Z([String,Object]),default:""},id:{type:String,default:""},message:{type:Z([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:Z(Function),default:()=>{}},onClose:{type:Z(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...Re,""],default:""},zIndex:{type:Number,default:0}}),Sn={destroy:()=>!0},In=Be({name:"ElNotification",components:{ElIcon:we,...ke},props:Mn,emits:Sn,setup(e){const n=Te("notification"),o=M(!1);let s;const l=h(()=>{const v=e.type;return v&&x[e.type]?n.m(v):""}),a=h(()=>x[e.type]||e.icon||""),t=h(()=>e.position.endsWith("right")?"right":"left"),d=h(()=>e.position.startsWith("top")?"top":"bottom"),u=h(()=>({[d.value]:`${e.offset}px`,zIndex:e.zIndex}));function f(){e.duration>0&&({stop:s}=ln(()=>{o.value&&C()},e.duration))}function m(){s==null||s()}function C(){o.value=!1}function i({code:v}){v===J.delete||v===J.backspace?m():v===J.esc?o.value&&C():f()}return Se(()=>{f(),o.value=!0}),an(document,"keydown",i),{ns:n,horizontalClass:t,typeClass:l,iconComponent:a,positionStyle:u,visible:o,close:C,clearTimer:m,startTimer:f}}}),$n=["id"],An=["textContent"],Ln={key:0},Dn=["innerHTML"];function Rn(e,n,o,s,l,a){const t=k("el-icon"),d=k("close");return p(),b(Ae,{name:e.ns.b("fade"),onBeforeLeave:e.onClose,onAfterLeave:n[3]||(n[3]=u=>e.$emit("destroy")),persisted:""},{default:y(()=>[O(g("div",{id:e.id,class:r([e.ns.b(),e.customClass,e.horizontalClass]),style:_(e.positionStyle),role:"alert",onMouseenter:n[0]||(n[0]=(...u)=>e.clearTimer&&e.clearTimer(...u)),onMouseleave:n[1]||(n[1]=(...u)=>e.startTimer&&e.startTimer(...u)),onClick:n[2]||(n[2]=(...u)=>e.onClick&&e.onClick(...u))},[e.iconComponent?(p(),b(t,{key:0,class:r([e.ns.e("icon"),e.typeClass])},{default:y(()=>[(p(),b(V(e.iconComponent)))]),_:1},8,["class"])):E("v-if",!0),g("div",{class:r(e.ns.e("group"))},[g("h2",{class:r(e.ns.e("title")),textContent:S(e.title)},null,10,An),O(g("div",{class:r(e.ns.e("content")),style:_(e.title?void 0:{margin:0})},[$e(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(p(),U(rn,{key:1},[E(" Caution here, message could've been compromized, nerver use user's input as message "),E(" eslint-disable-next-line "),g("p",{innerHTML:e.message},null,8,Dn)],2112)):(p(),U("p",Ln,S(e.message),1))])],6),[[H,e.message]]),e.showClose?(p(),b(t,{key:0,class:r(e.ns.e("closeBtn")),onClick:N(e.close,["stop"])},{default:y(()=>[T(d)]),_:1},8,["class","onClick"])):E("v-if",!0)],2)],46,$n),[[H,e.visible]])]),_:3},8,["name","onBeforeLeave"])}var Pn=Ie(In,[["render",Rn],["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const ne={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},ae=16;let zn=1;const D=function(e={},n=null){if(!Le)return{close:()=>{}};(typeof e=="string"||$(e))&&(e={message:e});const o=e.position||"top-right";let s=e.offset||0;ne[o].forEach(({vm:C})=>{var i;s+=(((i=C.el)==null?void 0:i.offsetHeight)||0)+ae}),s+=ae;const{nextZIndex:l}=Me(),a=`notification_${zn++}`,t=e.onClose,d={zIndex:l(),offset:s,...e,id:a,onClose:()=>{Fn(a,o,t)}};let u=document.body;ve(e.appendTo)?u=e.appendTo:De(e.appendTo)&&(u=document.querySelector(e.appendTo)),ve(u)||(u=document.body);const f=document.createElement("div"),m=T(Pn,d,$(d.message)?{default:()=>d.message}:null);return m.appContext=n!=null?n:D._context,m.props.onDestroy=()=>{ee(null,f)},ee(m,f),ne[o].push({vm:m}),u.appendChild(f.firstElementChild),{close:()=>{m.component.proxy.visible=!1}}};Re.forEach(e=>{D[e]=(n={})=>((typeof n=="string"||$(n))&&(n={message:n}),D({...n,type:e}))});function Fn(e,n,o){const s=ne[n],l=s.findIndex(({vm:f})=>{var m;return((m=f.component)==null?void 0:m.props.id)===e});if(l===-1)return;const{vm:a}=s[l];if(!a)return;o==null||o(a);const t=a.el.offsetHeight,d=n.split("-")[0];s.splice(l,1);const u=s.length;if(!(u<1))for(let f=l;f<u;f++){const{el:m,component:C}=s[f].vm,i=Number.parseInt(m.style[d],10)-t-ae;C.props.offset=i}}function Nn(){for(const e of Object.values(ne))e.forEach(({vm:n})=>{n.component.proxy.visible=!1})}D.closeAll=Nn;D._context=null;const X=un(D,"$notify");const le=class{constructor(){te(this,"loadingInstance",null)}static getInstance(){var n;return(n=this.instance)!=null?n:this.instance=new le}msg(n){G.info(n)}msgError(n){G.error(n)}msgSuccess(n){G.success(n)}msgWarning(n){G.warning(n)}alert(n){L.alert(n,"\u7CFB\u7EDF\u63D0\u793A")}alertError(n){L.alert(n,"\u7CFB\u7EDF\u63D0\u793A",{type:"error"})}alertSuccess(n){L.alert(n,"\u7CFB\u7EDF\u63D0\u793A",{type:"success"})}alertWarning(n){L.alert(n,"\u7CFB\u7EDF\u63D0\u793A",{type:"warning"})}notify(n){X.info(n)}notifyError(n){X.error(n)}notifySuccess(n){X.success(n)}notifyWarning(n){X.warning(n)}confirm(n){return L.confirm(n,"\u6E29\u99A8\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"})}prompt(n,o,s){return L.prompt(n,o,{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",...s})}loading(n){this.loadingInstance=mn.service({lock:!0,text:n})}closeLoading(){var n;(n=this.loadingInstance)==null||n.close()}};let Q=le;te(Q,"instance",null);const Kn=Q.getInstance();export{Kn as f};
