System.register(["./element-plus-legacy.9a978554.js","./picker-legacy.fd57aa7e.js","./index-legacy.e2911894.js","./useDictOptions-legacy.07b6ef59.js","./index-legacy.bb301f21.js","./role-legacy.b90b4dad.js","./post-legacy.756a997b.js","./department-legacy.1dc37121.js","./@vue-legacy.6b85f8d1.js"],(function(e){"use strict";var l,a,d,o,r,t,u,s,i,n,p,c,m,b,_,f,g,v,V,w,y,j,h,x,U,k,q,D,C;return{setters:[e=>{l=e.Z,a=e.C,d=e.D,o=e.Q,r=e.R,t=e.t,u=e.F},e=>{s=e._},e=>{i=e.P},e=>{n=e.u},e=>{p=e.r},e=>{c=e.r},e=>{m=e.e},e=>{b=e.d},e=>{_=e.d,f=e.s,g=e.r,v=e.e,V=e.a1,w=e.o,y=e.c,j=e.W,h=e.O,x=e.a,U=e.u,k=e.X,q=e.a9,D=e.M,C=e.T}],execute:function(){function R(e){return p.post({url:"/auth.admin/edit",params:e})}e({a:R,b:function(e){return p.post({url:"/auth.admin/delete",params:e})},c:function(e){return p.get({url:"/auth.admin/lists",params:e})}});const E={class:"edit-popup"},F=x("div",{class:"form-tips"},"建议尺寸：100*100px，支持jpg，jpeg，png格式",-1),N=x("div",{class:"form-tips"},"允许多人同时在线登录",-1);e("_",_({__name:"edit",emits:["success","close"],setup(e,{expose:_,emit:O}){const M=f(),P=f(),Q=g("add"),S=v((()=>"edit"==Q.value?"编辑管理员":"新增管理员")),T=V({id:"",account:"",name:"",dept_id:"",jobs_id:"",role_id:"",avatar:"",password:"",password_confirm:"",disable:0,multipoint_login:1,root:0}),W=(e,l,a)=>{T.password&&(l||a(new Error("请再次输入密码")),l!==T.password&&a(new Error("两次输入密码不一致!"))),a()},X=V({account:[{required:!0,message:"请输入账号",trigger:["blur"]}],name:[{required:!0,message:"请输入名称",trigger:["blur"]}],role_id:[{required:!0,message:"请选择角色",trigger:["blur"]}],password:[{required:!0,message:"请输入密码",trigger:["blur"]}],password_confirm:[{required:!0,message:"请输入确认密码",trigger:["blur"]},{validator:W,trigger:"blur"}]}),{optionsData:Z}=n({role:{api:c},jobs:{api:m},dept:{api:b}}),z=async()=>{var e;await(M.value?.validate()),"edit"==Q.value?await R(T):await(e=T,p.post({url:"/auth.admin/add",params:e})),P.value?.close(),O("success")},A=()=>{O("close")};return _({open:(e="add")=>{Q.value=e,P.value?.open()},setFormData:async e=>{const l=await(a={id:e.id},p.get({url:"/auth.admin/detail",params:a}));var a;for(const d in T)null!=l[d]&&null!=l[d]&&(T[d]=l[d]),0==Number(T.dept_id)&&(T.dept_id=""),0==Number(T.jobs_id)&&(T.jobs_id="");X.password=[],X.password_confirm=[{validator:W,trigger:"blur"}]}}),(e,n)=>{const p=a,c=d,m=s,b=l,_=o,f=r,g=t,v=u;return w(),y("div",E,[j(i,{ref_key:"popupRef",ref:P,title:U(S),async:!0,width:"550px",onConfirm:z,onClose:A},{default:h((()=>[j(v,{ref_key:"formRef",ref:M,model:T,"label-width":"84px",rules:X},{default:h((()=>[j(c,{label:"账号",prop:"account"},{default:h((()=>[j(p,{modelValue:T.account,"onUpdate:modelValue":n[0]||(n[0]=e=>T.account=e),disabled:1==T.root,placeholder:"请输入账号",clearable:""},null,8,["modelValue","disabled"])])),_:1}),j(c,{label:"头像"},{default:h((()=>[x("div",null,[x("div",null,[j(m,{modelValue:T.avatar,"onUpdate:modelValue":n[1]||(n[1]=e=>T.avatar=e),limit:1},null,8,["modelValue"])]),F])])),_:1}),j(c,{label:"名称",prop:"name"},{default:h((()=>[j(p,{modelValue:T.name,"onUpdate:modelValue":n[2]||(n[2]=e=>T.name=e),placeholder:"请输入名称",clearable:""},null,8,["modelValue"])])),_:1}),j(c,{label:"归属部门",prop:"dept_id"},{default:h((()=>[j(b,{class:"flex-1",modelValue:T.dept_id,"onUpdate:modelValue":n[3]||(n[3]=e=>T.dept_id=e),data:U(Z).dept,clearable:"","node-key":"id",props:{value:"id",label:"name",disabled:e=>1!==e.status},"check-strictly":"","default-expand-all":!0,placeholder:"请选择上级部门"},null,8,["modelValue","data","props"])])),_:1}),j(c,{label:"岗位",prop:"jobs_id"},{default:h((()=>[j(f,{class:"flex-1",modelValue:T.jobs_id,"onUpdate:modelValue":n[4]||(n[4]=e=>T.jobs_id=e),clearable:"",placeholder:"请选择岗位"},{default:h((()=>[(w(!0),y(k,null,q(U(Z).jobs,((e,l)=>(w(),D(_,{key:l,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),j(c,{label:"角色",prop:"role_id"},{default:h((()=>[j(f,{modelValue:T.role_id,"onUpdate:modelValue":n[5]||(n[5]=e=>T.role_id=e),disabled:1==T.root,class:"flex-1",placeholder:"请选择角色",clearable:""},{default:h((()=>[1==T.root?(w(),D(_,{key:0,label:"系统管理员",value:0})):C("",!0),(w(!0),y(k,null,q(U(Z).role,((e,l)=>(w(),D(_,{key:l,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),j(c,{label:"密码",prop:"password"},{default:h((()=>[j(p,{modelValue:T.password,"onUpdate:modelValue":n[6]||(n[6]=e=>T.password=e),"show-password":"",clearable:"",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),j(c,{label:"确认密码",prop:"password_confirm"},{default:h((()=>[j(p,{modelValue:T.password_confirm,"onUpdate:modelValue":n[7]||(n[7]=e=>T.password_confirm=e),"show-password":"",clearable:"",placeholder:"请输入确认密码"},null,8,["modelValue"])])),_:1}),1!=T.root?(w(),D(c,{key:0,label:"管理员状态"},{default:h((()=>[j(g,{modelValue:T.disable,"onUpdate:modelValue":n[8]||(n[8]=e=>T.disable=e),"active-value":0,"inactive-value":1},null,8,["modelValue"])])),_:1})):C("",!0),j(c,{label:"多处登录"},{default:h((()=>[x("div",null,[j(g,{modelValue:T.multipoint_login,"onUpdate:modelValue":n[9]||(n[9]=e=>T.multipoint_login=e),"active-value":1,"inactive-value":0},null,8,["modelValue"]),N])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title"])])}}}))}}}));
