{"version":3,"sources":["webpack:///./src/views/permission/role/edit.vue?935c","webpack:///./src/components/footer-btns/index.vue?6a81","webpack:///./src/components/footer-btns/index.vue?3ddd","webpack:///./src/components/footer-btns/index.vue","webpack:///./src/components/footer-btns/index.vue?4143","webpack:///./src/views/permission/role/edit.vue?6dd3","webpack:///./src/views/permission/role/edit.vue?3831","webpack:///./src/views/permission/role/edit.vue","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./node_modules/core-js/modules/es.array.find-index.js"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","render","_ctx","_cache","$props","$setup","$data","$options","$slots","undefined","__exports__","style","_hoisted_4","_hoisted_5","_component_el_page_header","_component_el_card","_component_el_input","_component_el_form_item","_component_el_button","_component_el_tree","_component_el_form","_component_footer_btns","shadow","default","content","id","onBack","$event","$router","back","_","rules","ref","model","formData","size","label","prop","modelValue","name","placeholder","desc","type","autosize","minRows","maxRows","onClick","allSelect","close","data","menu","permissionsTree","icon","props","children","onCheckChange","handlePermissionsCheckChange","onSubmit","components","FooterBtns","setup","route","router","formRef","treeRef","auth_keys","allAuthKeys","required","message","trigger","value","validate","valid","roleEdit","roleAdd","getMenu","then","res","menuFlatten","map","item","auth_key","catch","err","console","log","setTimeout","roleDetail","setCheckedKeys","checked","index","findIndex","push","splice","query","$","global","toAbsoluteIndex","toIntegerOrInfinity","lengthOfArrayLike","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","TypeError","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","this","len","actualStart","argumentsLength","arguments","length","$findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","Array","callbackfn"],"mappings":"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","file":"js/chunk-0efa8cb2.13414182.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./edit.vue?vue&type=style&index=0&id=fa9feb98&lang=scss&scoped=true\"","import { renderSlot as _renderSlot, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-2209f60a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"footer-wrap\" }\nconst _hoisted_2 = { class: \"footer-content\" }\nconst _hoisted_3 = { class: \"flex flex-center\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _renderSlot(_ctx.$slots, \"default\", {}, undefined, true)\n      ])\n    ])\n  ]))\n}","\nimport { defineComponent } from 'vue'\nexport default defineComponent({})\n","import { render } from \"./index.vue?vue&type=template&id=2209f60a&scoped=true&ts=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=2209f60a&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/likeshop002/Desktop/project/likeadmin/admin/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2209f60a\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=2209f60a&scoped=true&lang=scss\"","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-fa9feb98\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"role-edit\" }\nconst _hoisted_2 = {\n  class: \"flex\",\n  style: {\"margin-top\":\"3px\"}\n}\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 全选 \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" 全不选 \")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"保存\")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_el_page_header = _resolveComponent(\"el-page-header\")!\n  const _component_el_card = _resolveComponent(\"el-card\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_tree = _resolveComponent(\"el-tree\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_footer_btns = _resolveComponent(\"footer-btns\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_el_card, { shadow: \"never\" }, {\n      default: _withCtx(() => [\n        _createVNode(_component_el_page_header, {\n          content:  _ctx.id ? '编辑角色':'新增角色',\n          onBack: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$router.back()))\n        }, null, 8, [\"content\"])\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_el_card, {\n      shadow: \"never\",\n      class: \"m-t-15\"\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_component_el_form, {\n          rules: _ctx.rules,\n          ref: \"formRef\",\n          class: \"ls-form\",\n          model: _ctx.formData,\n          \"label-width\": \"150px\",\n          size: \"small\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_form_item, {\n              label: \"名称\",\n              prop: \"name\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_input, {\n                  modelValue: _ctx.formData.name,\n                  \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.formData.name) = $event)),\n                  placeholder: \"请输入名称\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, {\n              label: \"备注\",\n              prop: \"desc\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_input, {\n                  modelValue: _ctx.formData.desc,\n                  \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.formData.desc) = $event)),\n                  placeholder: \"请输入备注\",\n                  type: \"textarea\",\n                  autosize: { minRows: 4, maxRows: 6 }\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, {\n              label: \"备注\",\n              prop: \"desc\"\n            }, {\n              default: _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_2, [\n                  _createVNode(_component_el_button, {\n                    type: \"text\",\n                    size: \"mini\",\n                    onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.allSelect()))\n                  }, {\n                    default: _withCtx(() => [\n                      _hoisted_3\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_el_button, {\n                    type: \"text\",\n                    size: \"mini\",\n                    onClick: _cache[4] || (_cache[4] = ($event: any) => (_ctx.close()))\n                  }, {\n                    default: _withCtx(() => [\n                      _hoisted_4\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _createVNode(_component_el_tree, {\n                  ref: \"treeRef\",\n                  data: _ctx.menu.permissionsTree,\n                  \"node-key\": \"auth_key\",\n                  \"default-expand-all\": \"\",\n                  icon: \"ArrowRight\",\n                  props: {\r\n                           children: 'sons',\r\n                           label: 'name'\r\n                       },\n                  \"empty-text\": \"\",\n                  \"show-checkbox\": \"\",\n                  onCheckChange: _ctx.handlePermissionsCheckChange\n                }, null, 8, [\"data\", \"onCheckChange\"])\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"rules\", \"model\"])\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_footer_btns, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          size: \"small\",\n          onClick: _ctx.onSubmit\n        }, {\n          default: _withCtx(() => [\n            _hoisted_5\n          ]),\n          _: 1\n        }, 8, [\"onClick\"])\n      ]),\n      _: 1\n    })\n  ]))\n}","\r\n    import {\r\n        defineComponent,\r\n        reactive,\r\n        onMounted,\r\n        Ref,\r\n        ref,\n        toRefs\r\n    } from \"vue\";\r\n    import {\r\n        apiConfigGetMenu,\r\n        apiConfigGetAuth,\r\n        apiRoleAdd,\r\n        apiRoleEdit,\r\n        apiRoleDetail,\r\n    } from '@/api/auth'\r\n    import {\r\n        ElInput,\r\n        ElForm\r\n    } from 'element-plus'\r\n    import FooterBtns from '@/components/footer-btns/index.vue'\n    import { useAdmin } from '@/core/hooks/app'\n    import { flatten } from '@/utils/util'\r\n    export default defineComponent({\n        components: {\n            FooterBtns\n        },\r\n        setup() {\r\n            const { route, router } = useAdmin()\r\n            const formRef: Ref < typeof ElForm | null > = ref(null)\r\n            const treeRef: Ref<typeof ElForm | null> = ref(null)\r\n            const id: Ref < Number | null > = ref(null) // 当前编辑角色ID  '\r\n\r\n            // 表单数据\r\n            const {\r\n                formData,\r\n                menu\r\n            } = toRefs(\r\n                reactive({\r\n                    formData: {\r\n                        name: '', // 角色名称\r\n                        desc: '', // 备注\r\n                        auth_keys: [], // 权限\r\n                    },\r\n\r\n                    menu: {\r\n                        permissionsTree: [], // 菜单\n                        allAuthKeys: [], // 菜单全部的auth_keys\r\n                    },\r\n                })\r\n            )\r\n\r\n            // 表单验证\r\n            const rules = {\r\n                name: [{\r\n                    required: true,\r\n                    message: '请输入角色名称',\r\n                    trigger: ['blur'],\r\n                }, ],\r\n            }\r\n\r\n            // 确定提交\r\n            const onSubmit = () => {\r\n                formRef.value?.validate((valid: boolean) => {\r\n                    if (!valid) return\r\n\r\n                    id.value ? roleEdit() : roleAdd()\r\n                })\r\n            }\r\n\r\n\r\n            const getMenu = () => {\r\n                apiConfigGetMenu()\r\n                    .then((res: any) => {\n                        // 获取菜单\r\n                        menu.value.permissionsTree = res\r\n                        // console.log('res', res)\n\n                        // 数组扁平化\n                        let menuFlatten = flatten(res, [], 'sons')\n                        // console.log(menuFlatten)\n                        // 获取菜单全部 auth_key\n                        menu.value.allAuthKeys = menuFlatten.map((item: any) => item.auth_key) as never\r\n                    })\r\n                    .catch((err: any) => {\r\n                        console.log('err', err)\r\n                    })\r\n            }\r\n\r\n            // 添加角色\r\n            const roleAdd = () => {\r\n                apiRoleAdd({...formData.value})\r\n                    .then((res: any) => {\r\n                        console.log('res', res)\n                        setTimeout(() => {\n                            router.back()\n                        }, 500)\r\n                    })\r\n                    .catch((err: any) => {\r\n                        console.log('err', err)\r\n                    })\r\n            }\r\n            // 编辑角色\r\n            const roleEdit = () => {\r\n                apiRoleEdit({\r\n                        ...formData.value,\n                        id: id.value,\r\n                    })\r\n                    .then((res: any) => {\r\n                        console.log('res', res)\n                        setTimeout(() => {\n                            router.back()\n                        }, 500)\r\n                    })\r\n                    .catch((err: any) => {\r\n                        console.log('err', err)\r\n                    })\r\n            }\r\n\r\n            // 角色详情\r\n            const roleDetail = () => {\r\n                apiRoleDetail({\r\n                        id: id.value,\r\n                    })\r\n                    .then((res: any) => {\r\n                        console.log('res', res)\r\n\r\n                        formData.value = res\n                        // formData.value.auth_keys = []\n\n                        treeRef.value?.setCheckedKeys(res.auth_keys);\r\n                    })\r\n                    .catch((err: any) => {\r\n                        console.log('err', err)\r\n                    })\r\n            }\r\n\r\n            // 权限树触发函数\r\n            const handlePermissionsCheckChange = (data: any, checked: boolean) => {\r\n                console.log(data)\r\n                if (!data.auth_key) {\r\n                    return\r\n                }\r\n                let index = formData.value.auth_keys.findIndex(\r\n                    (item) => item == data.auth_key\r\n                )\r\n                if (checked) {\r\n                    index == -1 && (formData.value.auth_keys as any).push(data.auth_key)\r\n                    return\r\n                }\r\n\r\n                if (index != -1) {\r\n                    formData.value.auth_keys.splice(index, 1)\r\n                }\r\n            }\n\n            // 全选\n            const allSelect = () => {\n                treeRef.value?.setCheckedKeys(menu.value.allAuthKeys);\n            }\n\n            // 全不选\n            const close = () => {\n                treeRef.value?.setCheckedKeys([]);\n            }\r\n\r\n            onMounted(() => {\r\n                const query: any = route.query\r\n                if (query.id) {\r\n                    id.value = query.id * 1\r\n                    roleDetail()\r\n                }\r\n\r\n                getMenu()\r\n            })\r\n\r\n            return {\r\n                id,\r\n                formData,\r\n                menu,\r\n                formRef,\n                treeRef,\r\n                rules,\r\n                getMenu,\r\n                roleAdd,\r\n                roleEdit,\r\n                roleDetail,\r\n                onSubmit,\r\n                handlePermissionsCheckChange,\n                close,\n                allSelect,\r\n            }\r\n        },\r\n    })\r\n","import { render } from \"./edit.vue?vue&type=template&id=fa9feb98&scoped=true&ts=true\"\nimport script from \"./edit.vue?vue&type=script&lang=ts\"\nexport * from \"./edit.vue?vue&type=script&lang=ts\"\n\nimport \"./edit.vue?vue&type=style&index=0&id=fa9feb98&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/likeshop002/Desktop/project/likeadmin/admin/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fa9feb98\"]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar TypeError = global.TypeError;\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n"],"sourceRoot":""}