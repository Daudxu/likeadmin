(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0efa8cb2"],{"0643":function(e,t,n){"use strict";n("0e0d")},"0e0d":function(e,t,n){},"54c0":function(e,t,n){"use strict";var o=n("7a23"),c={class:"footer-wrap"},r={class:"footer-content"},a={class:"flex flex-center"};function l(e,t,n,l,u,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,[Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("div",a,[Object(o["renderSlot"])(e.$slots,"default",{},void 0,!0)])])])}var u=Object(o["defineComponent"])({}),i=(n("606b"),n("6b0d")),d=n.n(i);const s=d()(u,[["render",l],["__scopeId","data-v-2209f60a"]]);t["a"]=s},"56cc":function(e,t,n){},"606b":function(e,t,n){"use strict";n("56cc")},7897:function(e,t,n){"use strict";n.r(t);n("b0c0");var o=n("7a23"),c={class:"role-edit"},r={class:"flex",style:{"margin-top":"3px"}},a=Object(o["createTextVNode"])(" 全选 "),l=Object(o["createTextVNode"])(" 全不选 "),u=Object(o["createTextVNode"])("保存");function i(e,t,n,i,d,s){var f=Object(o["resolveComponent"])("el-page-header"),b=Object(o["resolveComponent"])("el-card"),m=Object(o["resolveComponent"])("el-input"),h=Object(o["resolveComponent"])("el-form-item"),j=Object(o["resolveComponent"])("el-button"),O=Object(o["resolveComponent"])("el-tree"),v=Object(o["resolveComponent"])("el-form"),p=Object(o["resolveComponent"])("footer-btns");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,[Object(o["createVNode"])(b,{shadow:"never"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{content:e.id?"编辑角色":"新增角色",onBack:t[0]||(t[0]=function(t){return e.$router.back()})},null,8,["content"])]})),_:1}),Object(o["createVNode"])(b,{shadow:"never",class:"m-t-15"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{rules:e.rules,ref:"formRef",class:"ls-form",model:e.formData,"label-width":"150px",size:"small"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{label:"名称",prop:"name"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{modelValue:e.formData.name,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formData.name=t}),placeholder:"请输入名称"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(h,{label:"备注",prop:"desc"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{modelValue:e.formData.desc,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.formData.desc=t}),placeholder:"请输入备注",type:"textarea",autosize:{minRows:4,maxRows:6}},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(h,{label:"备注",prop:"desc"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",r,[Object(o["createVNode"])(j,{type:"text",size:"mini",onClick:t[3]||(t[3]=function(t){return e.allSelect()})},{default:Object(o["withCtx"])((function(){return[a]})),_:1}),Object(o["createVNode"])(j,{type:"text",size:"mini",onClick:t[4]||(t[4]=function(t){return e.close()})},{default:Object(o["withCtx"])((function(){return[l]})),_:1})]),Object(o["createVNode"])(O,{ref:"treeRef",data:e.menu.permissionsTree,"node-key":"auth_key","default-expand-all":"",icon:"ArrowRight",props:{children:"sons",label:"name"},"empty-text":"","show-checkbox":"",onCheckChange:e.handlePermissionsCheckChange},null,8,["data","onCheckChange"])]})),_:1})]})),_:1},8,["rules","model"])]})),_:1}),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(j,{type:"primary",size:"small",onClick:e.onSubmit},{default:Object(o["withCtx"])((function(){return[u]})),_:1},8,["onClick"])]})),_:1})])}var d=n("5530"),s=(n("d81d"),n("c740"),n("a434"),n("9baa")),f=n("54c0"),b=n("ca4d"),m=n("6ddb"),h=Object(o["defineComponent"])({components:{FooterBtns:f["a"]},setup:function(){var e=Object(b["a"])(),t=e.route,n=e.router,c=Object(o["ref"])(null),r=Object(o["ref"])(null),a=Object(o["ref"])(null),l=Object(o["toRefs"])(Object(o["reactive"])({formData:{name:"",desc:"",auth_keys:[]},menu:{permissionsTree:[],allAuthKeys:[]}})),u=l.formData,i=l.menu,f={name:[{required:!0,message:"请输入角色名称",trigger:["blur"]}]},h=function(){var e;null===(e=c.value)||void 0===e||e.validate((function(e){e&&(a.value?v():O())}))},j=function(){Object(s["g"])().then((function(e){i.value.permissionsTree=e;var t=Object(m["a"])(e,[],"sons");i.value.allAuthKeys=t.map((function(e){return e.auth_key}))})).catch((function(e){console.log("err",e)}))},O=function(){Object(s["h"])(Object(d["a"])({},u.value)).then((function(e){console.log("res",e),setTimeout((function(){n.back()}),500)})).catch((function(e){console.log("err",e)}))},v=function(){Object(s["k"])(Object(d["a"])(Object(d["a"])({},u.value),{},{id:a.value})).then((function(e){console.log("res",e),setTimeout((function(){n.back()}),500)})).catch((function(e){console.log("err",e)}))},p=function(){Object(s["j"])({id:a.value}).then((function(e){var t;console.log("res",e),u.value=e,null===(t=r.value)||void 0===t||t.setCheckedKeys(e.auth_keys)})).catch((function(e){console.log("err",e)}))},k=function(e,t){if(console.log(e),e.auth_key){var n=u.value.auth_keys.findIndex((function(t){return t==e.auth_key}));t?-1==n&&u.value.auth_keys.push(e.auth_key):-1!=n&&u.value.auth_keys.splice(n,1)}},C=function(){var e;null===(e=r.value)||void 0===e||e.setCheckedKeys(i.value.allAuthKeys)},x=function(){var e;null===(e=r.value)||void 0===e||e.setCheckedKeys([])};return Object(o["onMounted"])((function(){var e=t.query;e.id&&(a.value=1*e.id,p()),j()})),{id:a,formData:u,menu:i,formRef:c,treeRef:r,rules:f,getMenu:j,roleAdd:O,roleEdit:v,roleDetail:p,onSubmit:h,handlePermissionsCheckChange:k,close:x,allSelect:C}}}),j=(n("0643"),n("6b0d")),O=n.n(j);const v=O()(h,[["render",i],["__scopeId","data-v-fa9feb98"]]);t["default"]=v},a434:function(e,t,n){"use strict";var o=n("23e7"),c=n("da84"),r=n("23cb"),a=n("5926"),l=n("07fa"),u=n("7b0b"),i=n("65f0"),d=n("8418"),s=n("1dde"),f=s("splice"),b=c.TypeError,m=Math.max,h=Math.min,j=9007199254740991,O="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var n,o,c,s,f,v,p=u(this),k=l(p),C=r(e,k),x=arguments.length;if(0===x?n=o=0:1===x?(n=0,o=k-C):(n=x-2,o=h(m(a(t),0),k-C)),k+n-o>j)throw b(O);for(c=i(p,o),s=0;s<o;s++)f=C+s,f in p&&d(c,s,p[f]);if(c.length=o,n<o){for(s=C;s<k-o;s++)f=s+o,v=s+n,f in p?p[v]=p[f]:delete p[v];for(s=k;s>k-o+n;s--)delete p[s-1]}else if(n>o)for(s=k-o;s>C;s--)f=s+o-1,v=s+n-1,f in p?p[v]=p[f]:delete p[v];for(s=0;s<n;s++)p[s+C]=arguments[s+2];return p.length=k-o+n,c}})},c740:function(e,t,n){"use strict";var o=n("23e7"),c=n("b727").findIndex,r=n("44d2"),a="findIndex",l=!0;a in[]&&Array(1)[a]((function(){l=!1})),o({target:"Array",proto:!0,forced:l},{findIndex:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),r(a)}}]);
//# sourceMappingURL=chunk-0efa8cb2.13414182.js.map